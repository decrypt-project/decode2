{"version":3,"sources":["dist/js/ew.js"],"names":["ew$1","$$1","luxon","_interopDefaultLegacy","e","default","ew__default","$__default","luxon__default","DateTime$1","DateTime","Validators","__proto__","userLevelId","el","ew","checkInteger","value","language","phrase","parseInt","userLevelName","id","elId","document","getElementById","name","trim","level","sameText","includes","toLowerCase","required","fieldName","_$el$data","$el","$p","closest","data","substring","css","hasValue","replace","fileRequired","elFn","mismatchPassword","startsWith","elPwd","between","x","z","endsWith","val","toUpperCase","passwordStrength","isMaskedPassword","hasClass","username","raw","match","RegExp","escapeRegExChars","INVALID_USERNAME_CHARACTERS","password","ENCRYPTED_PASSWORD","INVALID_PASSWORD_CHARACTERS","email","getValue","checkEmail","emails","cnt","err","checkEmails","datetime","format","checkDate","time","checkTime","float","checkNumber","range","min","max","checkRange","integer","phone","checkPhone","zip","checkZip","creditCard","checkCreditCard","ssn","checkSsn","guid","checkGuid","regex","pattern","checkByRegEx","url","checkUrl","custom","fn","_len","arguments","length","args","Array","_key","captcha","recaptcha","_grecaptcha","grecaptcha","getResponse","dataset","minDate","minDateTime","formatPattern","HTMLElement","minValue","minFormat","parseDate","Date","fromJSDate","zone","formatDateTime","DATE_FORMAT","TIME_FORMAT","maxDate","maxDateTime","maxValue","maxFormat","parseNumber","_defineProperties","target","props","i","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","o","p","setPrototypeOf","_inheritsLoose","subClass","superClass","create","constructor","_defineProperty","obj","batchSettings","type","contentType","processData","dataType","toJSON","JSON","stringify","parse","batchSetup","options","extend","Batch","batch","func","this","undefined","parent","ajaxSetup","_batch","requests","add","_func$name","call","clear","send","instance","success","parentSuccess","status","xhr","map","request","settings","childSuccess","statusText","_deliver","ajax","_addRequest","push","_responses$error","_responses$error2","responses","error","description","alert","each","response","_request$settings$com","_request$settings$suc","complete","$ajax","FormBase","pageId","$self","_initiated","element","$element","htmlForm","initSearchPanel","modified","emptyRow","multiPage","autoSuggests","lists","formKeyCountName","submitWithFetch","enableOnInit","filterList","disableForm","body","style","cursor","form","getForm","elements","filter","prop","addClass","trigger","enableForm","$elements","removeClass","not","appendHidden","$form","$dp","attr","find","ar","serializeArray","forEach","appendTo","canSubmit","async","_await$this$validate","_this$validate","updateTextArea","validate","$dps","dp","j","test","$els","result","evt","Event","originalEvent","isDefaultPrevented","isObject","submit","_e$originalEvent","_e$originalEvent$subm","formAction","submitter","parseUrl","pathname","setAttribute","getAttribute","method","serialize","fetch","finally","getList","_this$getElement","_this$getElement$data","field","getElement","compileTemplates","values","list","template","isString","templates","getOptionTemplate","_this$element","_this$element2","tagName","getElements","fixId","multiple","rowindex","t","split","prefix","isNumber","updateList","immediate","_Object$entries$find","entries","entry","parents","parentFields","slice","lookupOptions","updateOptions","getOptionValues","updateLists","_form$querySelector","isUndefined","querySelector","selector","_ref","join","_ref2","isArray","bind","deferreds","batchSize","ajaxBatchSize","b","splice","getApiUrl","API_LOOKUP_ACTION","when","then","source","fail","console","log","always","createAutoSuggest","assign","limit","AUTO_SUGGEST_MAX_ENTRIES","autoSuggestSettings","AutoSuggest","initEditors","ed","active","save","destroyEditor","destroy","onError","msg","initUpload","index","later","AJAX_DELAY","upload","setupFilters","filters","$sf","toggleClass","$df","$delete","$save","saveFilters","CLIENT_SEARCH_FILTER","localStorage","setItem","PROJECT_NAME","SERVER_SEARCH_FILTER","currentPage","done","_result$","off","on","prompt","input","html","sanitize","prevAll","remove","next","$submenu","insertBefore","cmd","refresh","setLayout","append","one","init","hasFormData","text","hide","render","loadjs","ready","setTimeout","is","$tab","$panel","$container","width","CONFIRM_CANCEL","href","window","location","from","matches","forms","beforeSend","before","Field","fldvar","validators","invalid","validator","addValidator","_proto","addError","_this$_error","_error","clearErrors","clearValidators","_element","shouldValidate","updateFeedback","resetInvalid","_this$_element","_this$_element$classL","_this$_element$closes","_this$_element$closes2","classList","contains","server","fieldContainerSelector","innerHTML","errorMessage","_this$_element$closes3","feedback","setInvalid","focus","setFocus","canFocus","_el$style","_el$classList","hidden","readonly","disabled","display","get","_checkbox","checked","set","_this$_element2","_this$_element2$id","activeElement","Form","_FormBase","_this","tryFocus","addField","fields","getField","addFields","apply","addCustomError","rowIndex","setFieldElement","delay","makeVisible","focusDelay","preventScroll","autoFocusPreventScroll","_focused","_this$_error2","getFocusable","getFieldElements","autoFocus","detailpage","querySelectorAll","_ew$forms$get","TABLE_BASIC_SEARCH","gotoPageByElement","$pane","validateFields","getCurrentRowIndex","row","_form$querySelector2","_e$currentTarget","validateRequired","updateSelected","addcnt","inlineAdd","action","currentTarget","keycnt","keyCount","gridinsert","rowcnt","_await$this$customVal","_this$customValidate","String","customValidate","returnFocus","detailpages","_await$frm$validate","frm","_this$getForm$dataset","getFieldValue","_ew$forms$get2","some","_this$getForm$querySe","FormBuilder","setId","setPageId","setLists","setQueryBuilderLists","autoFillTargetFields","childFields","filterFieldVars","filterFields","addList","setFields","setValidate","setCustomValidate","setValidateRequired","setSubmit","setFormKeyCountName","setEmptyRow","setMultiPage","setSubmitWithFetch","setFilterList","setInitSearchPanel","setEnableOnInit","build","MultiPage","context","AjaxLookup","_this$list$parentFiel","_this$list$parentFiel2","elementId","formElement","m","pf","debounce","recordCount","formatResult","opt","isAutoSuggest","jsRenderHelpers","displayValue","generateRequest","page","LANGUAGE_ID","getUserParams","getOptionValue","getUrl","query","start","params","URLSearchParams","q","n","rnd","random","toString","prepare","transform","results","totalRecordCount","records","toSelect2Data","every","item","hasOwnProperty","Set","gf","group","children","lf","df","df2","df3","df4","_isAutoSuggest","_AjaxLookup","$input","minWidth","maxHeight","highlight","hint","minLength","classNames","forceSelection","forceSelect","lineHeight","paddingY","lookupAllDisplayFields","d","setValue","ta","isOpen","menu","empty","$item","getActiveSelectable","typeahead","close","timer","loadingMore","tpl","suggestion","footer","syncResults","asyncResults","cancel","getSyncResults","Infinity","$menu","$node","$dataset","suggestionHeight","outerHeight","suggestions","rendered","count","h","scrollTop","toggle","loadingMoreTimer","_loadingMoreTimer","$footer","_loadingMoreTimer2","offset","top","getMore","v","findIndex","option","selected","SelectionListOption","datasets","_append","Forms","_ew$getForm","_forms","f","ids","keys","lang","Select2Language","errorLoading","inputTooLong","overChars","maximum","inputTooShort","remainingChars","minimum","maximumSelected","noResults","searching","removeAllItems","removeItem","search","Utils$3","select2","amd","require","_defined","Select2ResultsDecorator","decorated","$results","displayMessage","escapeMarkup","hideLoading","$message","message","className","sort","cols","len","$row","last","$option","pagination","more","createElement","c","attrs","role","Element","msMatchesSelector","webkitMatchesSelector","_resultId","title","StoreData","Utils$2","ModalResults","container","_container$listeners$","listeners","pop","$highlighted","getHighlightedResults","GetData","_mousedown","$this","ModalSearch","$search","removeAttr","KEYS","$","PRINT_SCREEN","DropdownSearchDecorator","handleSearch","which","TAB","SHIFT","CTRL","ALT","_keyUpPrevented","term","Select2AttachBody","_AttachBody","_attachPositioningHandler","events","handler","_positionDropdown","_resizeDropdown","_detachPositioningHandler","_showDropdown","$dropdownContainer","$dropdownParent","_popper","Popper","createPopper","placement","IS_RTL","modifiers","enabled","_this$_popper2","update","_this$_popper3","ModalAttachBody","_bindContainerResultHandlers","stopPropagation","position","$dropdown","_containerResultsHandlersBound","$modal","_self$$search$","_updateDropdown","_e$originalEvent2","detach","end","oldValue","modal","event","draggable","FilterAttachBody","_hideDropdown","_this$_popper","outerWidth","_dropdownButton$close","contents","clone","triggerHandler","selection","_handleClear","$filterDropdown","dropdownButton","reference","DropdownAttachBody","_defined$1","AllowClear$1","Utils$1","FilterAllowClear","_AllowClear","_","isDisabled","$clear","$selection","previousVal","placeholder","unselectData","prevented","Select2MultipleSelectionDecorator","Select2DataAdapterDecorator","_data$element","ResultsList","SingleSelection","MultipleSelection","Placeholder","AllowClear","SelectionSearch","EventRelay","Utils","Translation","SelectData","ArrayData","AjaxData","Tags","Tokenizer","MinimumInputLength","MaximumInputLength","MaximumSelectionLength","Dropdown","DropdownSearch","HidePlaceholder","InfiniteScroll","MinimumResultsForSearch","SelectOnClose","CloseOnSelect","DropdownCSS","TagsSearchHighlight","Defaults","defaults","dataAdapter","Decorate","minimumInputLength","maximumInputLength","maximumSelectionLength","tags","tokenSeparators","tokenizer","resultsAdapter","columns","customOption","iconClass","templateResult","selectOptions","_templateResult","loading","selectOnClose","dropdownAdapter","minimumResultsForSearch","closeOnSelect","dropdownCssClass","dropdown","selectionAdapter","allowClear","translations","dir","currentUrl","URL","$document$1","$body","initIcons","_e$target","tooltipOptions","IS_MOBILE","tooltip","_bootstrap$Tooltip$ge","bootstrap","Tooltip","getInstance","initPasswordOptions","_e$target2","pStrength","MIN_PASSWORD_STRENGTH","changeBackground","backgrounds","passwordValidFrom","onPasswordStrengthChanged","strength","percentage","$pst","$pb","pct","valid","setValid","pGenerator","passwordLength","GENERATE_PASSWORD_LENGTH","uppercase","GENERATE_PASSWORD_UPPERCASE","lowercase","GENERATE_PASSWORD_LOWERCASE","numbers","GENERATE_PASSWORD_NUMBER","specialChars","GENERATE_PASSWORD_SPECIALCHARS","onPasswordGenerated","pwd","PATH_BASE","API_URL","qs","route","encodeURIComponent","_pathname","_hash","hash","searchParams","createSearchParams","getSearchParams","setSearchParams","mergeSearchParams","buildUrl","_len2","_key2","has","setSearchParam","deleteSearchParam","_len3","names","_key3","delete","PAGE_LAYOUT","sanitizeUrl","decodeURIComponent","initExportLinks","_e$target3","fileDownload","getchartParams","preventDefault","TOKEN_NAME_KEY","TOKEN_NAME","ANTIFORGERY_TOKEN_KEY","ANTIFORGERY_TOKEN","initMultiSelectCheckboxes","_e$target4","$cbs","_update","getError","_result$error","_result$error2","failureMessage","isHtml","API_EXPORT_ACTION","swal","Swal","fire","sweetAlertSettings","showConfirmButton","allowOutsideClick","allowEscapeKey","willOpen","showLoading","_fetch","ct","headers","_getError","json","blob","createObjectURL","Blob","a","cd","download","appendChild","click","objectUrl","revokeObjectURL","catch","lazyLoad","_e$target5","LAZY_LOAD","img","LAZY_LOAD_DELAY","src","initLightboxes","_e$target6","USE_COLORBOX","lightboxSettings","current","previous","xhrError","imgError","colorbox","rel","initPdfObjects","_e$target7","EMBED_PDF","PDFObjectOptions","PDFObject","embed","fallbackLink","initTooltips","_e$target8","popover","popoverOptions","parseJson","searchOperatorChange","parm","$fld","$fld2","hasY","$cond","hasCond","$and","opr","$opr2","opr2","isBetween","isEmptyOpr","isEmptyOpr2","hideOpr2","hideX","hideY","initForms","_e$target9","isFunction$1","_alert","cb","config","confirmButtonText","customClass","htmlContainer","show","isConfirmed","_prompt","cfg","_config","showCancelButton","cancelButtonText","inputValidator","toast","toastOptions","Toasts","first","showToast","class","autohide","autoHideSuccessMessage","autoHideSuccessMessageDelay","$f","parentId","change","_obj","_batch$send","els","getId","isTextbox","isFilter","$elf","typ","elf","_updateOptions","autoFill","fo","frmo","arp","$obj","arr","clearOptions","addOpt","newOption","selectOption","_updateSibling","isBoolean","ds","isNativeSelectOne","isModalLookup","MULTIPLE_OPTION_SEPARATOR","jqXHR","textStatus","errorThrown","root","exportCustom","divId","exportType","tblVar","_div$children$","div","customexport","exportEmail","convertToBool","charts","exportCharts","chart","chartEngine","streamType","stream","toBase64Image","fileName","_export","export","exportSelected","emailForm","keySelected","postParams","_document$querySelect","$iframe","isHiddenTextArea","_el$dataset","modalLookup","_el$dataset2","isSelect2","isBooleanCheckbox","isHidden","reset","once","MOBILE_DETECT","version","scrollIntoView","_OverlayScrollbars","OverlayScrollbars","scroll","selectAll","clearSelected","tbl","rowIndexes","r","rows","clearDelete","$tr","siblings","addBack","clickDelete","setupTable","force","HTMLTableElement","$tbl","$rows","isset","tBodies","$target","cells","parentsUntil","RESPONSIVE_TABLE_CLASS","cell","rowSpan","clientHeight","offsetHeight","attach","$r","setupGrid","grid","$grid","htmlDecode","$root","selectors","getFieldSelector","table","s1","s2","flatMap","tag","sel","eq","getAncestorBy","node","parentNode","_node","nodeType","o1","o2","headerCase","str","charAt","samePath","p1","p2","ar1","ar2","LIST_ACTION","VIEW_ACTION","EDIT_ACTION","isValue","getOptionTexts","lo","hasAttribute","removeAll","valueSeparator","sep","reduce","optionHtml","OPTION_HTML_TEMPLATE","addOption","_obj$querySelector","optGroup","g","label","_obj$dataset","_forms$get$getList","_forms$get$getList$pa","_obj$options$","selectedIndex","opts","autoselect","_init$headers","_init$headers$get","Headers","isApi","API_JWT_TOKEN","IS_WINDOWS_AUTHENTICATION","API_JWT_AUTHORIZATION_HEADER","_ajaxStop","lastPageSubmit","executeScript","replaceAll","matchAll","createRange","createContextualFragment","s","addScript","stripScript","scr","HTMLScriptElement","removeScript","getContent","keepScripts","_m$","$content","getOptions","modalDialogHide","$dlg","removeData","showing","reload","dest_array","destEl","v0","pid","post","$tt","trig","Popover","content","wd","_getTipElement","initSearchFilters","_e$target11","btn","IS_LOGGEDIN","IS_SYS_ADMIN","CURRENT_USER_NAME","_frm$filterList$filte","_frm$filterList","formId","getItem","_ref3","_ref4","copyToClipboard","_source","_source2","innerText","left","select","execCommand","removeChild","object_value","showMessage","arg","_arg$target","doc","$div","$alert","$heading","w","$toast","Math","floor","Pace","_forms$get","ajaxSend","jqxhr","allowed","hostname","setRequestHeader","ajaxStart","ajaxStop","ajaxError","Interval","dt","fromSQL","fromSeconds","toFormat","locale","numberingSystem","getNumberingSystem","parseDateTime","fromFormat","redirect","_ew$vars","newUrl","vars","login","protocol","host","isMediumScreen","matchMedia","screenMediaQuery","promise","$overlay","overlayTemplate","Response","validation","warningMessage","successMessage","$html","unshift","history","pushState","$old","$new","$tmpl","$searchType","TABLE_BASIC_SEARCH_TYPE","replaceWith","initPage","_bootstrap$Tooltip$ge7","_fixLayoutHeightTimer","functions","Select2Utils","Select2Defaults","createSelect","selectId","lookup","processResults","_data$records$length","_data$records","transport","failure","$select","_$$data$$dropdown$fin","createModalLookup","_data$records$length2","_data$records2","_$$data$$dropdown$fin2","createFilter","_data$records$length3","_data$records3","_$$data$$dropdown$fin3","getSearchParam","setSessionTimer","timeoutTime","keepAliveTimer","counter","useKeepAlive","SESSION_KEEP_ALIVE_INTERVAL","IS_AUTOLOGIN","keepAlive","API_SESSION_ACTION","token","resetTimer","SESSION_TIMEOUT_COUNTDOWN","SESSION_TIMEOUT","timeout","timerInterval","timerProgressBar","setInterval","getHtmlContainer","sec","timeleft","round","getTimerLeft","textContent","willClose","clearInterval","setTimer","dismiss","DismissReason","TIMEOUT_URL","keepAliveInterval","updateDropdownPosition","prev","isFunction","setSearchType","searchType","phraseId","getQueryBuilderFilterInput","rule","_document$getElementB","_document$getElementB2","_span$innerHTML$repla","fldVar","tmplId","span","cloneNode","queryBuilderErrorClass","$0","$1","$2","getQueryBuilderValueSetter","getQueryBuilderFilterValidation","callback","$value","errors","operator","nb_inputs","$invalid","applyTemplate","classId","isModal","_parent$querySelector","subtmpl","rowspan","childNodes","views","hasTag","jsRenderAttributes","scripts","tmpl","toggleGroup","idx","valueChanged","fobj","infix","fld","bool","oldEl","fnEl","setLanguage","submitAction","_window$msg","isPostBack","isMultiple","_success","_submit","isDismissed","removeSpaces","clearError","jquery","sortUrl","sortType","shiftKey","ctrlKey","ctrl","inlineAction","_args$evt","$btn","$detached","ewAction","$record","curindex","_fail","_always","_deleted","_disableInlineButtons","_enableInlineButtons","_getTable","_updateRowIndexes","$data","inline","rowtype","Promise","resolve","prepend","_submitSuccess","$main","ROWTYPE_VIEW","ROWTYPE_ADD","returnUrl","_$grid$data","modalDialogShow","confirmDelete","selectAllKeys","selectKey","chk","addGridRow","_bootstrap$Tooltip$ge2","$tpl","$lastrow","suffix","$keycnt","FORM_KEY_COUNT_NAME","FORM_ROW_ACTION_NAME","attributes","dispose","after","scrollHeight","deleteGridRow","_bootstrap$Tooltip$ge3","rowidx","_delete","$keyact","htmlEncode","sameString","optionsHtml","MAX_OPTION_COUNT","enable2FA","TWO_FACTOR_AUTHENTICATION_TYPE","API_2FA_ACTION","API_2FA_SHOW","_result$error4","imageUrl","showLoaderOnConfirm","isLoading","getConfirmButton","disableInput","getImage","onload","enableInput","getInput","preConfirm","API_2FA_VERIFY","showValidationMessage","_result$error3","_result$error7","inputValue","account","API_2FA_SEND_OTP","_result$error5","_result$error6","disable2FA","API_2FA_RESET","_result$error8","_result$error9","sendOTP","_result$error10","_result$error11","showBackupCodes","showDenyButton","showLoaderOnDeny","denyButtonText","denyButton","disableButtons","API_2FA_BACKUP_CODES","codes","enableButtons","preDeny","getDenyButton","API_2FA_NEW_BACKUP_CODES","addOptionDialogShow","_args$evt2","lnk","addOptionDialog","_results","objName","API_OBJECT_NAME","re","linkField","dfs","displayFields","ffs","pfs","lfv","ff","txt","obj2","_results2","_results3","API_ADD_ACTION","nodeName","_args$evt3","_bootstrap$Tooltip$ge4","_args$evt4","_args$evt4$currentTar","_args$evt5","_args$evt5$currentTar","_$dlg$data","_$dlg$data2","modalDialog","size","_caption","$lnk","caption","_hide","handleResult","_current","view","_createButtons","_button","_return","_resp$headers$get","resp","isJson","hasErrors","lnkData","$dlglnk","stopImmediatePropagation","Modal","_focustrap","__handleFocusin","_handleFocusin","_e$target10","Accept","importDialogShow","_args$evt6","_bootstrap$Tooltip$ge5","importDialog","sse","$dropzone","$bd","$progress","classname","$msg","hideMessage","showProgress","pc","updateProgress","tcnt","totalCount","scnt","successCount","fcnt","failCount","filename","file","addRow","_index","initialized","Tabulator","autoColumns","autoColumnsDefinitions","definitions","column","headerSort","resizable","visible","headerSortTristate","formatter","textOverflow","getRow","getData","importTabulatorOptions","importComplete","_sse","fileResults","files","fileResult","rollbacked","IMPORT_MAX_FAILURES","saveImport","importFail","_sse2","_table2","clearData","API_ACTION_NAME","API_IMPORT_ACTION","API_FILE_TOKEN_NAME","EventSource","addEventListener","importUploadOptions","acceptFileTypes","IMPORT_FILE_ALLOWED_EXTENSIONS","fileupload","API_UPLOAD_ACTION","autoUpload","singleFileUploads","dropZone","messages","maxFileSize","maxNumberOfFiles","minFileSize","SESSION_ID","_data$result","_data$result$files","importfiles","ok","filetoken","_table","importFiles","processfail","progressall","loaded","total","uploadProgress","hdr","_this$querySelector","_table3","_table4","removeAttribute","emailDialogShow","emailDialog","_e$target$querySelect","_$$closest$find$data","MAX_EMAIL_RECIPIENT","showDrillDown","pos","spinnerTemplate","draggableOptions","boundary","cache","$tip","responseText","_result$error12","_result$error13","setContent","_convert","API_LIST_ACTION","API_VIEW_ACTION","API_DELETE_ACTION","responseJSON","toggleSearchOperator","toggleLayout","_bootstrap$Tooltip$ge6","layout","DECIMAL_SEPARATOR","min_value","max_value","creditcard_string","tempdigit","doubledigit","checkdigit","email_cnt","arEmails","nid","$ft","$fn","$fa","$label","_confirmDelete","confirm","uploadUrl","API_JQUERY_UPLOAD_ACTION","_downloadTemplate","_uploadTemplate","formData","session","deepAssign","multipart","loadImageFileTypes","loadVideoFileTypes","loadAudioFileTypes","filesContainer","uploadTemplateId","downloadTemplateId","uploadTemplate","downloadTemplate","previewMaxWidth","UPLOAD_THUMBNAIL_WIDTH","previewMaxHeight","UPLOAD_THUMBNAIL_HEIGHT","uploadOptions","MULTIPLE_UPLOAD_SEPARATOR","fid","indexOf","_data$files","l","_data$files2","_data$result2","_data$result2$files","_data$files3","getLocaleFromPlatform","NUMBERING_SYSTEM","numeralSystem","delimiters","thousands","GROUPING_SEPARATOR","decimal","Intl","NumberFormat","resolvedOptions","formatTimeSpan","allDay","to","isValid","equals","startOf","minus","interval","days","Number","isInteger","parseTime","formatCurrency","CURRENCY_FORMAT","formats","currency","CURRENCY_SYMBOL","formatNumber","NUMBER_FORMAT","formatPercent","PERCENT_FORMAT","_e$target12","$tables","initPanels","renderJsTemplates","_localStorage$getItem","inputs","$rpt","mh","USE_JAVASCRIPT_MESSAGE","togglePassword","$i","updateChart","$debug","isMobile","isDark","fixLayoutHeight","addEventHandlers","fullCalendar$1","fullCalendar","calendar","updateTable","eventFields","addUrl","viewUrl","editUrl","deleteUrl","copyUrl","fullCalendarOptions","eventPopoverOptions","processJson","convertValue","_calendar$getEventByI","getEventById","addEvent","curEvent","groupId","setStart","setEnd","setAllDay","setExtendedProp","setProp","processEvent","info","relatedEvents","apiAction","API_EDIT_ACTION","processRequest","revert","reject","toPlainObject","collapseExtendedProps","toISOString","apiUrl","getFldParm","currentTable","urlAddId","addEventDialogShow","startStr","endStr","startFld","endFld","viewEventDialogShow","customButtons","headerToolbar","bsDropdown","getOrCreatePopover","Default","getOrCreateInstance","seq","shift","_Array$from$find$repl","_Array$from$find","popoverClass","_templateFactory","generateGetBoundingClientRect","y","rect","getBoundingClientRect","jsEvent","offsetX","offsetY","height","right","bottom","virtualElement","useContextMenu","bsToggle","clearMenus","_menu","eventId","editEventDialogShow","deleteEvent","drop","draggedEl","eventReceive","eventDragStart","_bootstrap$Popover$ge","eventDrop","eventResize","eventClick","_bootstrap$Popover$ge2","button","open","usePopover","_getOrCreatePopover","showViewPageOnEventClick","eventMouseEnter","_bsDropdown","_getOrCreatePopover2","_isShown","eventMouseLeave","_bsDropdown2","_bootstrap$Popover$ge3","FullCalendar","Calendar","isPushNotificationSupported","navigator","urlBase64ToUint8Array","base64String","base64","repeat","rawData","atob","outputArray","Uint8Array","charCodeAt","sendSubscriptionToServer","subscription","getKey","contentEncoding","PushManager","supportedContentEncodings","FormData","endpoint","btoa","fromCharCode","createSubscription","API_PUSH_NOTIFICATION_ACTION","API_PUSH_NOTIFICATION_SUBSCRIBE","serviceWorkerReg","serviceWorker","pushManager","subscribe","userVisibleOnly","applicationServerKey","PUSH_SERVER_PUBLIC_KEY","getSubscription","setSubscription","inst","subscribeNotification","Notification","permission","_await$getSubscriptio","requestPermission","checkSubscription","unsubscribeNotification","res","unsubscribe","API_PUSH_NOTIFICATION_DELETE","SERVICE_WORKER","register","scope","webpush","pushNotificationDialogShow","pushDialog","successes","acc","cur","failures","inited","latlng","useSingleMap","showAllMarkers","useMarkerClusterer","ext","maps","singleMapHeight","singleMapWidth","showMapOnTop","createMap","createBounds","createMarkerClusterer","marker","createMarker","fitBounds","promises","address","geocodingDelay","geocode","latitude","longitude","isNaN","createLatLng","all","MobileDetect","userAgent","mobile","formid","formID","pageIndex","maxPageIndex","minPageIndex","pageIndexes","$pages","$collapses","isTab","isCollapse","hideDisabledButton","hideInactivePages","lockTabs","hideTabs","showPagerTop","showPagerBottom","pagerTemplate","_show","_properties","pageShow","gotoPage","$page","gotoPageByIndex","gotoPageByElementId","togglePage","$tabs","google","setCenter","$bodies","$document","debugMode","DEBUG","animate","panel","Collapse","actions","_this$form","pageSize","zIndex","blueimp","processQueue","fileTypes","cropperOptions","cropperCanvasOptions","widget","processActions","cropImage","dfd","Deferred","that","cropperDialog","Cropper","getCroppedCanvas","toBlob","File","resolveWith","rejectWith","isFinite","isDate","periodic","clearTimeout","rec","_this$data","_this$data2","toNumber","toDate","_ew$vars$tables","_ew$vars$tables$table","_ew$vars$tables$table2","_ew$vars$tables$table3","tables","clientFormatPattern","toJsDate","toJSDate","mutationList","mutation","MutationObserver","observe","_parent","attributeFilter","attributeOldValue","subtree","isNil","isNaNNumber","isFiniteNumber","multiplyByPowerOfTen","number","powerOfTenExponent","NaN","numAsString","indexOfE","log10","numberThatIsPowerOfTen","LOG10E","toObject","entriesResolver","object","escapeRegexString","string","memoize","cacheKey","powerOf10LookupObject","currentValue","additionalZeros","isPowerOfTen","toBase","valueUnit","unitScale","base","scale","toBaseMultiplier","convertUnit","originUnit","targetUnit","valueAsBase","resolvedScale","conversionFactorFromBase","unitScaleDefinition","unit","convert","toBest","exclude","cutOffNumber","best","scaleUnit","absoluteResult","abs","scaleDefinition","stringRepeat","createUnitScaleFromLocaleAbbreviations","scaleItem","scaleItemIndex","formattedStringToNumber","inputString","_a","stringOriginal","stringWithLatinDigits","numericStringWithExtraInfo","numeralSystemMap","numericStringLength","numeralSystemToLatinSystemMap","digit","digitIndex","output","numericStringIndex","char","replaceNumeralSystemWithLatinNumbers","zeroFormat","nullFormat","decimalDelimiterFromLocale","stringWithDotDecimalDelimiter","abbreviationScalingFactor","abbreviations","abbreviationsSortedByLengthDesc","abbreviation","scapedAbbreviationForRegex","regexp","getScalingFactorFromAbbreviations","negativeFactor","numberAsString","code","ordinal","merge","newObject","argsLength","truncateNumber","ceil","getPatternParts","patternMask","isInEscapedPart","currentEscapedWord","parts","escaped","patternIncludes","patternRemoveEscapedText","patternReplace","searchValue","replaceValue","stringIncludes","splitStringInTwoParts","separator","indexOfSearchChar","countChars","stringChar","parsePattern","inputPattern","resolvedInputPattern","patternMaskAfterSignRule","signRules","patternWithoutEscapedText","negativeParentheses","forceSign","outputPatternMask","signRule","patternMaskAfterAbbreviationRule","abbreviationRules","compactUnit","compact","abbreviationRegExpResult","compactAuto","abbreviationRule","patternMaskAfterOptionalDecimalPlacesRule","optionalDecimalPlacesRules","optionalFractionDigits","optionalDecimalPlacesRule","outputPatternMaskWithoutEscapedText","decimalPlacesRules","patternPrecisionPart","minimumFractionDigits","maximumFractionDigits","trimmedPatternPrecisionPart","patternPrecisionPartWithoutClosingBracket","precisionSplitted","fractionDigits","decimalPlacesRule","minimumIntegerDigits","patternMaskIntegerPart","minimumIntegerDigitsRule","grouping","patternMaskAfterHandlingNumberPosition","numberPositionRule","patternMaskWithEnsuredSignPosition","addSignPositionIfItDoesNotExists","scaleValueWithAbbreviation","patternRules","forcedAbbreviationUnit","abbreviationsFromLocale","targetPowerOfTenExponent","k","scaleDefinitionFromLocale","closestPowerOfTenWithAvailableAbbreviation","distanceFromTarget","resolveForcedAbbreviationUnit","scaledValue","localizedUnit","roundNumber","precision","roundingFunction","resolvedPrecision","roundedScaledValue","numberToNonExponentialString","valueAsString","significand","exponent","exponentAsNumber","integerPartOfSignificand","fractionalPartOfSignificand","numberOfZerosToAdd","formatPositiveExponentResult","significandAsString","negativeExponentAbsoluteValue","outputIntegerPartOfSignificand","outputFractionalPartOfSignificand","firstCharInIntegerPart","formatNegativeExponentResult","numberToFixed","finiteNumber","fractionalPartOfValueAsString","targetFractionDigitsAmount","roundedValue","integerPart","fractionalPart","addTrailingZerosInFractionalPart","roundValueAndAddTrailingZeros","rounding","resolvedRoundingFunction","replaceDigitsWithNumeralSystem","numericString","scaleAndRoundValue","scaledValueLocalizedUnit","rescaledValue","rescaledValueLocalizedUnit","currentAbbreviationScale","newScaledValue","newScaledValueUnit","rescaleRoundedValue","numberToFormattedNumber","resolvedValue","localizedAbbreviationUnit","isValueNegative","signedZero","isValueZero","valueAsStringWithoutSign","removeSignIfExists","decimalPart","splitNumberIntegerAndDecimalParts","valueIntegerPartWithLeadingZeros","valueIntegerPartWithoutSign","addOrRemoveLeadingZerosToValue","valueIntegerPartWithThousandsSeparator","valueIntegerPartWithLeadingZerosAndWithoutSign","digitGroupingStyle","thousandsSeparator","restDigitGrouping","groupingSubIteration","addThousandsSeparatorToValueIntegerPart","numeralSystemFromLocale","integerPartWithNumeralSystem","decimalPartWithNumeralSystem","fullNumberWithNumeralSystem","abbreviationLocalizedUnit","patternMaskWithSignInfo","fullFormattedValueWithoutSign","addSignInfoToFullFormattedNumber","fullFormattedValueWithNormalizedText","patternStripAndNormalizeEscapedText","bpsFormatter","regexps","unformat","patternWithEscapedBPS","timeFormatter","absoluteValue","sign","hours","minutes","seconds","isNegative","timeArray","reverse","decimalSuffixes","binarySuffixes","unformatRegex","concat","bytesDecimalScale","unitIndex","pow","bytesBinaryScale","currencySymbolsMap","EUR","USD","XCD","AUD","INR","BRL","CAD","XAF","CNY","NZD","XPF","GBP","HKD","ILS","JPY","KRW","XOF","MXN","TWD","VND","BUILT_IN_FORMATTERS","hasNotScalePercentageSymbolInPattern","scalePercentage","patternWithEscapedPercentage","currencyFromOptions","localizedCurrencySymbol","patternWithEscapedCurrencySymbol","_b","localizedOrdinal","patternWithEscapedOrdinal","scaledValueUnit","patternWithEscapedBytes","exponential","toExponential","patternWithoutExponential","roundHalfAwayFromZero","resolveFormatOptions","formatOptions","_c","roundingOption","resolveRoundingOption","resolvedLocale","optionsLocale","defaultLocale","resolveOptionsLocale","resolvedFormatters","optionsFormatters","formatters","defaultPattern","nanFormat","nonBreakingSpace","parse$1","inputStringWithNormalSpaces","unformatFunctionFromFormatters","matcher","getUnformatFunctionIfMatch","format$1","parseFloat","resolvedPattern","resolvedValueAsNumber","formatFunctionFromFormatters","getFormatFunctionIfMatch","_errorFormat","arg2","arg3","withOptions","baseOptions","optionsFromArguments","rtlDirCheck","appendLeftToRightMarkIfIsRTL","isRTL","languagesWith4DigitsGroupingStyle","getAbbreviations","languageTag","digits","intlFormatOptions","notation","useGrouping","compactDisplay","digitOfZero","digitOfOne","digitOfTwo","abbreviationResultForOne","toLocaleString","abbreviationResultForTwo","abbreviationOne","abbreviationTwo","resultIndex","_err","getLocaleFromPlatform$1","resolvedLanguageTag","localizedNumber","lookupObject","repeatedChar","digitsAsArray","getNumeralSystemDigits","resolvedDigits","localizedNumberWithoutDigits","groupingDelimiter","fractionDelimiter","getGroupingAndFractionDelimiters","groupingStyle","subIterationIndex","digitOrGroupingDelimiter","getGroupingStyle","shortAbbreviations","_abbreviationsLong","numerable","jQuery"],"mappings":"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","sourcesContent":["/*!\n * JavaScript for PHPMaker v2023.13.0\n * Copyright (c) e.World Technology Limited. All rights reserved.\n */\n(function (ew$1, $$1, luxon) {\n  'use strict';\n\n  var _interopDefaultLegacy = e => e && typeof e === 'object' && 'default' in e ? e : { default: e };\n\n  var ew__default = /*#__PURE__*/_interopDefaultLegacy(ew$1);\n  var $__default = /*#__PURE__*/_interopDefaultLegacy($$1);\n  var luxon__default = /*#__PURE__*/_interopDefaultLegacy(luxon);\n\n  function MultiPage(formid) {\r\n    var self = this;\r\n    this.$form = null;\r\n    this.formID = formid;\r\n    this.pageIndex = 1;\r\n    this.maxPageIndex = 0;\r\n    this.minPageIndex = 0;\r\n    this.pageIndexes = [];\r\n    this.$pages = null;\r\n    this.$collapses = null;\r\n    this.isTab = false; // Is tabs\r\n\r\n    this.isCollapse = false; // Is collapses (accordion)\r\n\r\n    this.lastPageSubmit = false; // Enable submit button for the last page only\r\n\r\n    this.hideDisabledButton = false; // Hide disabled submit button\r\n\r\n    this.hideInactivePages = false; // Hide inactive pages\r\n\r\n    this.lockTabs = false; // Set inactive tabs as disabled\r\n\r\n    this.hideTabs = false; // Hide all tabs\r\n\r\n    this.showPagerTop = false; // Show pager at top\r\n\r\n    this.showPagerBottom = false; // Show pager at bottom\r\n\r\n    this.pagerTemplate = '<nav><ul class=\"pagination\"><li class=\"page-item previous ew-prev\"><a href=\"#\" class=\"page-link\"><i class=\"fa-solid fa-angle-left\"></i> {Prev}</a></li><li class=\"page-item next ew-next\"><a href=\"#\" class=\"page-link\">{Next} <i class=\"fa-solid fa-angle-right\"></i></a></li></ul></nav>'; // Pager template\r\n    // \"show\" handler (for disabled tabs)\r\n\r\n    var _show = function (e) {\r\n      e.preventDefault();\r\n    }; // Set properties\r\n\r\n    var _properties = [\"lastPageSubmit\", \"hideDisabledButton\", \"hideInactivePages\", \"lockTabs\", \"hideTabs\", \"showPagerTop\", \"showPagerBottom\", \"pagerTemplate\"];\r\n\r\n    this.set = function () {\r\n      if (arguments.length == 1 && $__default.default.isObject(arguments[0])) {\r\n        var obj = arguments[0];\r\n\r\n        for (var i in obj) {\r\n          var p = i[0].toLowerCase() + i.substring(1); // Camel case\r\n\r\n          if (_properties.includes(p)) this[p] = obj[i];\r\n        }\r\n      }\r\n    }; // DOM loaded\r\n\r\n    this.init = function () {\r\n      var tpl = this.pagerTemplate.replace(/\\{prev\\}/i, ew.language.phrase(\"Prev\")).replace(/\\{next\\}/i, ew.language.phrase(\"Next\"));\r\n\r\n      if (this.isTab) {\r\n        if (this.showPagerTop) this.$pages.closest(\".ew-nav\").before(tpl);\r\n        if (this.showPagerBottom) this.$pages.closest(\".ew-nav\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().prev(\":has([data-bs-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent().next(\":has([data-bs-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n          return false;\r\n        });\r\n        if (this.hideTabs) this.$form.find(\".ew-multi-page > .ew-nav > .nav-tabs\").hide();\r\n      } else if (this.isCollapse) {\r\n        if (this.showPagerTop) this.$collapses.closest(\".ew-accordion\").before(tpl);\r\n        if (this.showPagerBottom) this.$collapses.closest(\".ew-accordion\").after(tpl);\r\n        this.$form.find(\".ew-prev\").click(function (e) {\r\n          self.$pages.closest(\".accordion-item\").filter(\":has(.collapse.show)\").prev(\":has([data-bs-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-bs-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n        this.$form.find(\".ew-next\").click(function (e) {\r\n          self.$pages.closest(\".accordion-item\").filter(\":has(.collapse.show)\").next(\":has([data-bs-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\").toggleClass(\"disabled d-none\", false).find(\"[data-bs-toggle=collapse]\").click();\r\n          return false;\r\n        });\r\n      }\r\n\r\n      this.pageShow();\r\n    }; // Page show\r\n\r\n    this.pageShow = function () {\r\n      if (this.isTab) {\r\n        if (this.lockTabs) this.$pages.on(\"show.bs.tab\", _show);\r\n        this.$pages.each(function () {\r\n          var $this = $__default.default(this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.hasClass(\"active\"));\r\n          if (self.lockTabs) $this.toggleClass(\"disabled\", !$this.hasClass(\"active\"));\r\n        });\r\n      } else if (this.isCollapse) {\r\n        this.$pages.closest(\".accordion-item\").each(function () {\r\n          var $this = $__default.default(this);\r\n          if (self.hideInactivePages) $this.toggleClass(\"d-none\", !$this.find(\".collapse.show\")[0]);\r\n        });\r\n      }\r\n\r\n      var disabled = this.lastPageSubmit && this.pageIndex != this.maxPageIndex;\r\n      var $btn = this.$form.closest(\".content, .modal-content\").find(\"#btn-action, button.ew-submit\").prop(\"disabled\", disabled).toggle(!this.hideDisabledButton || !disabled);\r\n      $__default.default(\".ew-captcha\").toggle($btn.is(\":visible:not(:disabled)\")); // Re-captcha uses class \"disabled\", not \"disabled\" property.\r\n\r\n      disabled = this.pageIndex <= this.minPageIndex;\r\n      this.$form.find(\".ew-prev\").toggleClass(\"disabled\", disabled);\r\n      disabled = this.pageIndex >= this.maxPageIndex;\r\n      this.$form.find(\".ew-next\").toggleClass(\"disabled\", disabled);\r\n    }; // Go to page by index\r\n\r\n    this.gotoPage = function (i) {\r\n      if (i <= 0 || i < this.minPageIndex || i > this.maxPageIndex) return;\r\n\r\n      if (this.pageIndex != i) {\r\n        var $page = this.$pages.eq(i - 1);\r\n\r\n        if (this.isTab) {\r\n          if ($page.is(\":not(.d-none):not(.disabled)\")) $page.click();else $page.parent().next(\":has([data-bs-toggle=tab]):not(.d-none):not(.disabled)\").find(\"[data-bs-toggle=tab]\").toggleClass(\"disabled\", false).click();\r\n        } else if (this.isCollapse) {\r\n          var $p = $page.closest(\".accordion-item\");\r\n          if ($p.is(\":not(.d-none)\")) $page.click();else $p.next(\":has([data-bs-toggle=collapse]):not(.d-none)\").find(\"[data-bs-toggle=collapse]\").click();\r\n        }\r\n\r\n        this.pageIndex = i;\r\n      }\r\n    };\r\n\r\n    this.gotoPageByIndex = this.gotoPage; // Go to page by element\r\n\r\n    this.gotoPageByElement = function (el) {\r\n      this.gotoPage(parseInt($__default.default(el).data(\"page\"), 10) || -1);\r\n    }; // Go to page by element's id or name or data-field attribute\r\n\r\n    this.gotoPageByElementId = function (id) {\r\n      var $el = this.$form.find(\"[data-page]\").filter(\"[id='\" + id + \"'],[name='\" + id + \"'],[data-field='\" + id + \"']\");\r\n      this.gotoPageByElement($el);\r\n    }; // Toggle page\r\n\r\n    this.togglePage = function (i, show) {\r\n      if (this.isTab) {\r\n        this.$pages.eq(i - 1).toggleClass(\"d-none\", !show);\r\n      } else if (this.isCollapse) {\r\n        this.$pages.eq(i - 1).closest(\".accordion-item\").toggle(\"d-none\", !show);\r\n      }\r\n    }; // Render\r\n\r\n    this.render = function () {\r\n      this.$form = $__default.default(\"#\" + formid);\r\n      this.pageIndexes = this.$form.find(\"[data-page]\").map(function () {\r\n        var index = parseInt(this.dataset.page, 10);\r\n        return index > 0 ? index : null;\r\n      }).get();\r\n      this.pageIndexes.sort(function (a, b) {\r\n        return a - b;\r\n      });\r\n      this.minPageIndex = this.pageIndexes[0];\r\n      this.maxPageIndex = this.pageIndexes[this.pageIndexes.length - 1];\r\n      var $tabs = this.$form.find(\"[data-bs-toggle=tab]\");\r\n\r\n      if ($tabs[0]) {\r\n        this.$pages = $tabs;\r\n        this.isTab = true;\r\n        $tabs.on(\"shown.bs.tab\", function (e) {\r\n          self.pageIndex = $tabs.index(e.target) + 1;\r\n          self.pageShow();\r\n          $__default.default($__default.default(this).attr(\"href\")).find(\".ew-map\").each(function () {\r\n            var m = ew.maps[this.id];\r\n\r\n            if (m != null && m[\"map\"]) {\r\n              google.maps.event.trigger(m[\"map\"], \"resize\");\r\n              m[\"map\"].setCenter(m[\"latlng\"]);\r\n            }\r\n          });\r\n        });\r\n        this.pageIndex = $tabs.index($tabs.parent(\".active\")) + 1;\r\n      } else {\r\n        this.$collapses = this.$form.find(\"[data-bs-toggle=collapse]\");\r\n\r\n        if (this.$collapses[0]) {\r\n          this.$pages = this.$collapses;\r\n          this.isCollapse = true;\r\n          var $bodies = this.$collapses;\r\n          $bodies.on(\"shown.bs.collapse\", function (e) {\r\n            self.pageIndex = $bodies.index(e.target) + 1;\r\n            self.pageShow();\r\n            $__default.default(this).find(\".ew-map\").each(function () {\r\n              var m = ew.maps[this.id];\r\n\r\n              if (m != null && m[\"map\"]) {\r\n                google.maps.event.trigger(m[\"map\"], \"resize\");\r\n                m[\"map\"].setCenter(m[\"latlng\"]);\r\n              }\r\n            });\r\n          });\r\n          this.pageIndex = $bodies.index($bodies.hasClass(\"show\")) + 1;\r\n        }\r\n      }\r\n\r\n      $__default.default(function () {\r\n        self.init();\r\n      });\r\n    };\r\n  }\n\n  let DateTime$1 = luxon__default.default.DateTime;\r\n  /**\r\n   * User level ID validator\r\n   */\r\n\r\n  function userLevelId(el) {\r\n    if (el && !ew.checkInteger(el.value)) return {\r\n      userLevelId: ew.language.phrase(\"UserLevelIDInteger\")\r\n    };\r\n    let level = parseInt(el.value, 10);\r\n    if (level < 1) return {\r\n      userLevelId: ew.language.phrase(\"UserLevelIDIncorrect\")\r\n    };\r\n    return false;\r\n  }\r\n  /**\r\n   * User level name validator\r\n   * @param {string} id User ID Field input element ID\r\n   */\r\n\r\n  function userLevelName(id) {\r\n    return function (el) {\r\n      let elId = document.getElementById(\"x_\" + id);\r\n\r\n      if (elId && el) {\r\n        let name = el.value.trim(),\r\n            level = parseInt(elId.value.trim(), 10);\r\n\r\n        if (level === 0 && !ew.sameText(name, \"Default\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelDefaultName\")\r\n          };\r\n        } else if (level === -1 && !ew.sameText(name, \"Administrator\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelAdministratorName\")\r\n          };\r\n        } else if (level === -2 && !ew.sameText(name, \"Anonymous\")) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelAnonymousName\")\r\n          };\r\n        } else if (level > 0 && [\"anonymous\", \"administrator\", \"default\"].includes(name.toLowerCase())) {\r\n          return {\r\n            userLevelName: ew.language.phrase(\"UserLevelNameIncorrect\")\r\n          };\r\n        }\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Required validator\r\n   */\r\n\r\n  function required(fieldName) {\r\n    return function (el) {\r\n      var _$el$data;\r\n\r\n      let $el = $__default.default(el),\r\n          $p = $el.closest(\"#r_\" + ((_$el$data = $el.data(\"field\")) == null ? void 0 : _$el$data.substring(2))); // Find the row\r\n\r\n      if (!$p[0]) $p = $el.closest(\"[id^=el]\"); // Find the span\r\n\r\n      if ($p.css(\"display\") == \"none\") {\r\n        // Hidden by .visible()\r\n        return false;\r\n      }\r\n\r\n      if (el && !ew.hasValue(el)) {\r\n        return {\r\n          required: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * File required validator\r\n   */\r\n\r\n  function fileRequired(fieldName) {\r\n    return function (el) {\r\n      let elFn = document.getElementById(\"fn_\" + el.id);\r\n\r\n      if (elFn && !ew.hasValue(elFn)) {\r\n        return {\r\n          fileRequired: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Mismatch password validator\r\n   */\r\n\r\n  function mismatchPassword(el) {\r\n    let id;\r\n    if (el.id.startsWith(\"c_\")) // Confirm Password field in Register page\r\n      id = el.id.replace(/^c_/, \"x_\");else if (el.id == \"cpwd\") // Change Password page\r\n      id = \"npwd\";\r\n    let elPwd = document.getElementById(id);\r\n\r\n    if (el.value !== elPwd.value) {\r\n      return {\r\n        mismatchPassword: ew.language.phrase(\"MismatchPassword\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Between validator\r\n   */\r\n\r\n  function between(el) {\r\n    let x, z;\r\n\r\n    if (el.id.startsWith(\"y_\")) {\r\n      x = document.getElementById(el.id.replace(/^y_/, \"x_\"));\r\n      z = document.getElementById(el.id.replace(/^y_/, \"z_\"));\r\n    } else if (el.id.endsWith(\"_value_1\")) {\r\n      // QueryBuider\r\n      x = document.getElementById(el.id.replace(/_value_1$/, \"_value_0\"));\r\n      z = document.getElementById(el.id.replace(/_value_1$/, \"_operator\"));\r\n    }\r\n\r\n    if (ew.hasValue(x) && $__default.default(z).val().toUpperCase() == \"BETWEEN\" && !ew.hasValue(el)) {\r\n      return {\r\n        between: ew.language.phrase(\"EnterValue2\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Password strength validator\r\n   */\r\n\r\n  function passwordStrength(el) {\r\n    let $el = $__default.default(el);\r\n\r\n    if (!ew.isMaskedPassword(el) && $el.hasClass(\"ew-password-strength\") && !$el.data(\"validated\")) {\r\n      return {\r\n        passwordStrength: ew.language.phrase(\"PasswordTooSimple\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * User name validator\r\n   */\r\n\r\n  function username(raw) {\r\n    return function (el) {\r\n      if (!raw && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_USERNAME_CHARACTERS) + ']'))) return {\r\n        username: ew.language.phrase(\"InvalidUsernameChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Password validator\r\n   */\r\n\r\n  function password(raw) {\r\n    return function (el) {\r\n      if (!raw && !ew.ENCRYPTED_PASSWORD && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_PASSWORD_CHARACTERS) + ']'))) return {\r\n        password: ew.language.phrase(\"InvalidPasswordChars\")\r\n      };\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Email validator\r\n   */\r\n\r\n  function email(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkEmail(value)) {\r\n      return {\r\n        email: ew.language.phrase(\"IncorrectEmail\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Emails validator\r\n   */\r\n\r\n  function emails(cnt, err) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n\r\n      if (!ew.checkEmails(value, cnt)) {\r\n        return {\r\n          emails: err\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * DateTime validator\r\n   * @param {string} format DateTime format\r\n   */\r\n\r\n  function datetime(format) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n\r\n      if (!ew.checkDate(value, format)) {\r\n        return {\r\n          datetime: ew.language.phrase(\"IncorrectDate\").replace(/%s/g, format)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Time validator\r\n   * @param {string} format Time format\r\n   */\r\n\r\n  function time(format) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n\r\n      if (!ew.checkTime(value, format)) {\r\n        return {\r\n          time: ew.language.phrase(\"IncorrectTime\").replace(/%s/g, format)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Float validator\r\n   */\r\n\r\n  function float(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkNumber(value)) {\r\n      return {\r\n        float: ew.language.phrase(\"IncorrectFloat\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Range validator\r\n   * @param {number} min Min value\r\n   * @param {number} max Max value\r\n   */\r\n\r\n  function range(min, max) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n\r\n      if (!ew.checkRange(value, min, max)) {\r\n        return {\r\n          range: ew.language.phrase(\"IncorrectRange\").replace(\"%1\", min).replace(\"%2\", max)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Integer validator\r\n   */\r\n\r\n  function integer(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkInteger(value)) {\r\n      return {\r\n        integer: ew.language.phrase(\"IncorrectInteger\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * US phone validator\r\n   */\r\n\r\n  function phone(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkPhone(value)) {\r\n      return {\r\n        phone: ew.language.phrase(\"IncorrectPhone\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * US ZIP validator\r\n   */\r\n\r\n  function zip(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkZip(value)) {\r\n      return {\r\n        zip: ew.language.phrase(\"IncorrectZip\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Credit card validator\r\n   */\r\n\r\n  function creditCard(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkCreditCard(value)) {\r\n      return {\r\n        creditCard: ew.language.phrase(\"IncorrectCreditCard\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * US SSN validator\r\n   */\r\n\r\n  function ssn(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkSsn(value)) {\r\n      return {\r\n        ssn: ew.language.phrase(\"IncorrectSSN\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * GUID validator\r\n   */\r\n\r\n  function guid(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkGuid(value)) {\r\n      return {\r\n        guid: ew.language.phrase(\"IncorrectGUID\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Regular expression validator\r\n   * @param {string} pattern Regular expression pattern\r\n   */\r\n\r\n  function regex(pattern) {\r\n    return function (el) {\r\n      let value = ew.getValue(el);\r\n\r\n      if (!ew.checkByRegEx(value, pattern)) {\r\n        return {\r\n          regex: ew.language.phrase(\"IncorrectField\")\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * URL validator\r\n   */\r\n\r\n  function url(el) {\r\n    let value = ew.getValue(el);\r\n\r\n    if (!ew.checkUrl(value)) {\r\n      return {\r\n        url: ew.language.phrase(\"IncorrectUrl\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n    * Custom validator\r\n    * @param {Function} fn Function(value, ...args)\r\n    * @param {...any} args Additional arguments for the function\r\n    */\r\n\r\n  function custom(fn) {\r\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n      args[_key - 1] = arguments[_key];\r\n    }\r\n\r\n    return function (el) {\r\n      if (typeof fn == \"function\") {\r\n        let value = ew.getValue(el);\r\n        if (fn(value, ...args)) return {\r\n          custom: ew.language.phrase(\"IncorrectField\")\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Captcha validator\r\n   */\r\n\r\n  function captcha(el) {\r\n    if (el && !ew.hasValue(el)) {\r\n      return {\r\n        captcha: ew.language.phrase(\"EnterValidateCode\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * reCaptcha validator\r\n   */\r\n\r\n  function recaptcha(el) {\r\n    var _grecaptcha;\r\n\r\n    if (el && !ew.hasValue(el) && ((_grecaptcha = grecaptcha) == null ? void 0 : _grecaptcha.getResponse(el.dataset.id)) === \"\") {\r\n      return {\r\n        recaptcha: ew.language.phrase(\"ClickReCaptcha\")\r\n      };\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Min date/time validator\r\n   * @param {Function|HTMLElement|DateTime|Date} min Min date\r\n   */\r\n\r\n  function minDate(min) {\r\n    return function (el) {\r\n      let value = ew.getValue(el),\r\n          format = el.dataset.formatPattern,\r\n          minDateTime;\r\n      min = typeof min == \"function\" ? min() : min;\r\n\r\n      if (min instanceof HTMLElement) {\r\n        let minValue = min.value,\r\n            minFormat = min.dataset.formatPattern;\r\n        if (min.value && min.dataset.formatPattern) minDateTime = ew.parseDate(minValue, minFormat);\r\n      } else if (min instanceof Date) {\r\n        minDateTime = DateTime$1.fromJSDate(min, {\r\n          zone: \"utc\"\r\n        });\r\n      } else if (min instanceof DateTime$1) {\r\n        minDateTime = min;\r\n      }\r\n\r\n      if (value && format && minDateTime) {\r\n        let dateTime = ew.parseDate(value, format);\r\n        if (dateTime < minDateTime) return {\r\n          minDate: ew.language.phrase(\"IncorrectMinDate\").replace(\"%s\", ew.formatDateTime(minDateTime, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT))\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Max date/time validator\r\n   * @param {Function|HTMLElement|DateTime|Date} max Max date\r\n   */\r\n\r\n  function maxDate(max) {\r\n    return function (el) {\r\n      let value = ew.getValue(el),\r\n          format = el.dataset.formatPattern,\r\n          maxDateTime;\r\n      max = typeof max == \"function\" ? max() : max;\r\n\r\n      if (max instanceof HTMLElement) {\r\n        let maxValue = max.value,\r\n            maxFormat = max.dataset.formatPattern;\r\n        if (max.value && max.dataset.formatPattern) maxDateTime = ew.parseDate(maxValue, maxFormat);\r\n      } else if (max instanceof Date) {\r\n        maxDateTime = DateTime$1.fromJSDate(max, {\r\n          zone: \"utc\"\r\n        });\r\n      } else if (max instanceof DateTime$1) {\r\n        maxDateTime = max;\r\n      }\r\n\r\n      if (value && format && maxDateTime) {\r\n        let dateTime = ew.parseDate(value, format);\r\n        if (dateTime > maxDateTime) return {\r\n          maxDate: ew.language.phrase(\"IncorrectMaxDate\").replace(\"%s\", ew.formatDateTime(maxDateTime, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT))\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Min validator\r\n   * @param {Function|HTMLElement|String|Number} min Min value\r\n   */\r\n\r\n  function min(min) {\r\n    return function (el) {\r\n      let value = ew.parseNumber(ew.getValue(el)),\r\n          minValue;\r\n      min = typeof min == \"function\" ? min() : min;\r\n\r\n      if (min instanceof HTMLElement) {\r\n        minValue = ew.parseNumber(ew.getValue(min));\r\n      } else if (typeof min == \"string\") {\r\n        minValue = ew.parseNumber(min);\r\n      } else if (typeof min == \"number\") {\r\n        minValue = min;\r\n      }\r\n\r\n      if (typeof value == \"number\" && typeof minValue == \"number\") {\r\n        if (value < minValue) return {\r\n          min: ew.language.phrase(\"IncorrectMin\").replace(\"%s\", minValue)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n  /**\r\n   * Max validator\r\n   * @param {Function|HTMLElement|String|Number} max Max value\r\n   */\r\n\r\n  function max(max) {\r\n    return function (el) {\r\n      let value = ew.parseNumber(ew.getValue(el)),\r\n          maxValue;\r\n      max = typeof max == \"function\" ? max() : max;\r\n\r\n      if (max instanceof HTMLElement) {\r\n        maxValue = ew.parseNumber(ew.getValue(max));\r\n      } else if (typeof max == \"string\") {\r\n        maxValue = ew.parseNumber(max);\r\n      } else if (typeof max == \"number\") {\r\n        maxValue = max;\r\n      }\r\n\r\n      if (typeof value == \"number\" && typeof maxValue == \"number\") {\r\n        if (value > maxValue) return {\r\n          max: ew.language.phrase(\"IncorrectMax\").replace(\"%s\", maxValue)\r\n        };\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\n\n  var Validators = {\n    __proto__: null,\n    userLevelId,\n    userLevelName,\n    required,\n    fileRequired,\n    mismatchPassword,\n    between,\n    passwordStrength,\n    username,\n    password,\n    email,\n    emails,\n    datetime,\n    time,\n    float,\n    range,\n    integer,\n    phone,\n    zip,\n    creditCard,\n    ssn,\n    guid,\n    regex,\n    url,\n    custom,\n    captcha,\n    recaptcha,\n    minDate,\n    maxDate,\n    min,\n    max\n  };\n\n  function _defineProperties(target, props) {\r\n    for (var i = 0; i < props.length; i++) {\r\n      var descriptor = props[i];\r\n      descriptor.enumerable = descriptor.enumerable || false;\r\n      descriptor.configurable = true;\r\n      if (\"value\" in descriptor) descriptor.writable = true;\r\n      Object.defineProperty(target, descriptor.key, descriptor);\r\n    }\r\n  }\r\n\r\n  function _createClass(Constructor, protoProps, staticProps) {\r\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\r\n    if (staticProps) _defineProperties(Constructor, staticProps);\r\n    Object.defineProperty(Constructor, \"prototype\", {\r\n      writable: false\r\n    });\r\n    return Constructor;\r\n  }\n\n  function _assertThisInitialized(self) {\r\n    if (self === void 0) {\r\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\r\n    }\r\n\r\n    return self;\r\n  }\n\n  function _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\r\n      o.__proto__ = p;\r\n      return o;\r\n    };\r\n\r\n    return _setPrototypeOf(o, p);\r\n  }\n\n  function _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    _setPrototypeOf(subClass, superClass);\r\n  }\n\n  function _defineProperty(obj, key, value) {\r\n    if (key in obj) {\r\n      Object.defineProperty(obj, key, {\r\n        value: value,\r\n        enumerable: true,\r\n        configurable: true,\r\n        writable: true\r\n      });\r\n    } else {\r\n      obj[key] = value;\r\n    }\r\n\r\n    return obj;\r\n  }\n\n  /*\r\n   * Based on: jquery.batch v0.1.0\r\n   * Copyright 2013, Matt Morgan (@mlmorg)\r\n   * MIT license\r\n   */\r\n  // Global batch settings\r\n\r\n  $__default.default.batchSettings = {\r\n    type: 'POST',\r\n    contentType: 'application/json',\r\n    processData: false,\r\n    dataType: 'json',\r\n    toJSON: JSON.stringify,\r\n    parse: data => data\r\n  }; // Setup method\r\n\r\n  $__default.default.batchSetup = function (options) {\r\n    return $__default.default.extend($__default.default.batchSettings, options);\r\n  }; // $.batch class\r\n  // -------------\r\n\r\n  var Batch = $__default.default.batch = function (func, options) {\r\n    // Always instantiate a Batch class even if called without \"new\"\r\n    if (!(this instanceof Batch)) {\r\n      return new Batch(func, options);\r\n    } // Shift arguments if func is an object\r\n\r\n    if (typeof func === 'object') {\r\n      options = func;\r\n      func = undefined;\r\n    } // Default options\r\n\r\n    this.options = $__default.default.extend({}, $__default.default.batchSettings, options); // Find a parent batch object, if we're nested\r\n\r\n    this.parent = $__default.default.ajaxSetup()._batch; // Requests storage\r\n\r\n    this.requests = []; // Add any requests\r\n\r\n    if (func) {\r\n      this.add(func);\r\n    }\r\n\r\n    return this;\r\n  }; // Our methods\r\n\r\n  $__default.default.extend(Batch.prototype, {\r\n    // Method for adding requests to the batch\r\n    add: function (func) {\r\n      var _func$name;\r\n\r\n      // Set global _batch variable in jQuery.ajaxSettings\r\n      $__default.default.ajaxSetup({\r\n        _batch: this.parent || this\r\n      }); // Call the user's function\r\n\r\n      if ((_func$name = func.name) != null && _func$name.startsWith('bound ')) {\r\n        // Bound function\r\n        func();\r\n      } else {\r\n        func.call($__default.default.ajaxSetup()._batch);\r\n      } // Remove the global _batch variable when we're not nested\r\n\r\n      if (!this.parent) {\r\n        $__default.default.ajaxSetup({\r\n          _batch: null\r\n        });\r\n      }\r\n\r\n      return this;\r\n    },\r\n    // Clear requests storage\r\n    clear: function () {\r\n      this.requests = [];\r\n    },\r\n    // Method for running the batch request\r\n    send: function (options) {\r\n      options = options || {};\r\n      var instance = this; // When we're handling a child batch object, wrap any success functions\r\n      // and add them to the parent batch success\r\n\r\n      if (this.parent && options.success) {\r\n        var parentSuccess = this.parent.options.success;\r\n\r\n        this.parent.options.success = function (data, status, xhr) {\r\n          options.success(data, status, xhr);\r\n\r\n          if (parentSuccess) {\r\n            parentSuccess(data, status, xhr);\r\n          }\r\n        };\r\n      } // When we're handling the top-most batch, send the request\r\n      else if (this.requests.length) {\r\n        // Map an array of requests\r\n        var requests = $__default.default.map(this.requests, function (request) {\r\n          return request.settings.data;\r\n        }); // Override the success callback\r\n\r\n        var success = options.success;\r\n        var childSuccess = this.options.success;\r\n\r\n        options.success = function (data, statusText, xhr) {\r\n          // Call our _deliver method to handle each individual batch request response\r\n          instance._deliver.call(instance, data, statusText); // Child batch success functions\r\n\r\n          if (childSuccess) {\r\n            childSuccess(data, statusText, xhr);\r\n          } // User's success function\r\n\r\n          if (success) {\r\n            success(data, statusText, xhr);\r\n          }\r\n        }; // Build the Ajax request options\r\n\r\n        options = $__default.default.extend({}, this.options, options); // Create hash of requests to pass as the data in the Ajax request\r\n\r\n        if (!options.data) {\r\n          options.data = $__default.default.batchSettings.toJSON(requests);\r\n        } // Call the request\r\n\r\n        return $__default.default.ajax(options);\r\n      }\r\n    },\r\n    // Private method to add a request to the batch requests array\r\n    _addRequest: function (xhr, settings) {\r\n      this.requests.push({\r\n        xhr: xhr,\r\n        settings: settings\r\n      });\r\n    },\r\n    // Delivers each batch request response to its intended xhr success/complete function\r\n    _deliver: function (data, statusText) {\r\n      var _responses$error;\r\n\r\n      var instance = this; // Pass the response off to the user to parse out the responses\r\n\r\n      var responses = $__default.default.batchSettings.parse(data);\r\n\r\n      if (responses != null && (_responses$error = responses.error) != null && _responses$error.description) {\r\n        var _responses$error2;\r\n\r\n        ew__default.default.alert(responses == null ? void 0 : (_responses$error2 = responses.error) == null ? void 0 : _responses$error2.description);\r\n        return;\r\n      } // Loop through the responses\r\n\r\n      $__default.default.each(responses, function (i, response) {\r\n        var _request$settings$com;\r\n\r\n        // Only work with batch requests that we have stored\r\n        if (!instance.requests[i]) {\r\n          return;\r\n        } // Grab the stored request data\r\n\r\n        var request = instance.requests[i]; // Build statusText a la jQuery based on status code\r\n\r\n        request.xhr.statusText = statusText; // Call the user/success function, if it exists. Pass the response body, status text and xhr.\r\n\r\n        if (statusText === 'success') {\r\n          var _request$settings$suc;\r\n\r\n          (_request$settings$suc = request.settings.success) == null ? void 0 : _request$settings$suc.call(request.xhr, response, statusText);\r\n        } // Call complete\r\n\r\n        (_request$settings$com = request.settings.complete) == null ? void 0 : _request$settings$com.call(request.xhr, statusText);\r\n      });\r\n    }\r\n  });\r\n  // ---------------\r\n  // Override jQuery.ajax to cancel any outgoing requests called within\r\n  // a $.batch() function and add them to the batch requests array for\r\n  // that batch instance\r\n\r\n  var $ajax = $__default.default.ajax;\r\n\r\n  $__default.default.ajax = function (url, options) {\r\n    // Shift arguments when options are passed as first argument\r\n    if (typeof url === 'object') {\r\n      options = url;\r\n      url = undefined;\r\n    } // Set options object\r\n\r\n    options = options || {}; // Override the jQuery beforeSend method\r\n\r\n    var beforeSend = options.beforeSend;\r\n\r\n    options.beforeSend = function (xhr, settings) {\r\n      // Call the user's beforeSend function, if passed\r\n      if (beforeSend) {\r\n        var before = beforeSend(xhr, settings); // Cancel request if user's beforeSend function returns false\r\n\r\n        if (before === false) {\r\n          return before;\r\n        }\r\n      } // We're only worried about requests made within a $.batch function\r\n      // (aka they have a _batch object)\r\n\r\n      if (settings._batch) {\r\n        // Add request to batch\r\n        settings._batch._addRequest(xhr, settings); // Cancel this request\r\n\r\n        return false;\r\n      }\r\n    }; // Run original $.ajax method for all other requests\r\n\r\n    return $ajax.call(this, url, options);\r\n  };\n\n  function FormBase(id, pageId) {\r\n    let self = this,\r\n        $self = $__default.default(self);\r\n    this._initiated = false;\r\n    this.id = id; // Same ID as the form\r\n\r\n    this.element = document.getElementById(id); // HTML form or div\r\n\r\n    this.$element = $__default.default(this.element); // jQuery object of the form or div\r\n\r\n    this.pageId = pageId;\r\n    this.htmlForm = null; // HTML form element\r\n\r\n    this.initSearchPanel = false; // Expanded by default\r\n\r\n    this.modified = false;\r\n    this.emptyRow = null; // Check empty row\r\n\r\n    this.multiPage = null; // Multi-page\r\n\r\n    this.autoSuggests = {}; // AutoSuggests\r\n\r\n    this.lists = {}; // Dynamic selection lists\r\n\r\n    this.batch = new Batch(); // For batch lookup\r\n\r\n    this.formKeyCountName = \"\"; // For list/grid pages\r\n\r\n    this.submitWithFetch = false; // Submit form with Fetch API and returns Promise\r\n\r\n    this.enableOnInit = false; // Disable form during init\r\n\r\n    this.filterList = null; // Disable form\r\n\r\n    this.disableForm = function () {\r\n      document.body.style.cursor = \"wait\";\r\n      let form = this.getForm();\r\n      $__default.default(form.elements).filter(\":submit:not(.dropdown-toggle), .ew-submit\").prop(\"disabled\", true).addClass(\"disabled\");\r\n      this.trigger(\"disabled\");\r\n    }; // Enable form\r\n\r\n    this.enableForm = function () {\r\n      let form = this.getForm(),\r\n          $elements = $__default.default(form.elements);\r\n      $elements.filter(\".ew-disabled-element\").removeClass(\"ew-disabled-element\").prop(\"disabled\", false);\r\n      $elements.filter(\".ew-enabled-element\").removeClass(\"ew-enabled-element\").prop(\"disabled\", true);\r\n      $elements.filter(\":submit:not(.dropdown-toggle), .ew-submit\").not(\".ew-disabled\") // Exclude submit buttons with .ew-disabled (disabled purposely)\r\n      .prop(\"disabled\", false).removeClass(\"disabled\");\r\n      this.trigger(\"enabled\");\r\n      document.body.style.cursor = \"default\";\r\n    }; // Append hidden element with form name\r\n\r\n    this.appendHidden = function (el) {\r\n      var form = this.getForm(),\r\n          $form = $__default.default(form),\r\n          $dp = $__default.default(el).closest(\".ew-form\"),\r\n          name = $dp.attr(\"id\") + \"$\" + el.name;\r\n      if ($form.find(\"input:hidden[name='\" + name + \"']\")[0]) // Already appended\r\n        return;\r\n      var ar = $dp.find('[name=\"' + el.name + '\"]').serializeArray();\r\n\r\n      if (ar.length) {\r\n        ar.forEach(function (o, i) {\r\n          $__default.default('<input type=\"hidden\" name=\"' + name + '\">').val(o.value).appendTo($form);\r\n        });\r\n      } else {\r\n        $__default.default('<input type=\"hidden\" name=\"' + name + '\">').val(\"\").appendTo($form);\r\n      }\r\n    }; // Can submit\r\n\r\n    this.canSubmit = async function (e) {\r\n      var _await$this$validate, _this$validate;\r\n\r\n      var form = this.getForm(),\r\n          $form = $__default.default(form);\r\n      this.disableForm();\r\n      this.updateTextArea();\r\n\r\n      if (((_await$this$validate = await ((_this$validate = this.validate) == null ? void 0 : _this$validate.call(this, e))) != null ? _await$this$validate : true) && !$form.find(\".is-invalid\")[0]) {\r\n        $form.find(\"input[name^=sv_], input[name^=p_], [name*=_query_builder_rule_], .ew-template input, .ew-custom-option\") // Do not submit these values\r\n        .prop(\"disabled\", true).addClass(\"ew-disabled-element\");\r\n        $form.find(\"[data-readonly=1][disabled]\").prop(\"disabled\", false).addClass(\"ew-enabled-element\"); // Submit readonly values\r\n\r\n        var $dps = $form.find(\"input[name=detailpage]\").map(function (i, el) {\r\n          return $form.find(\"#\" + el.value)[0];\r\n        });\r\n\r\n        if ($dps.length > 1) {\r\n          // Multiple Master/Detail, check element names\r\n          $dps.each(function (i, dp) {\r\n            $__default.default(dp).find(\":input\").each(function (j, el) {\r\n              if (/^(fn_)?(x|o)\\d*_/.test(el.name)) {\r\n                var $els = $dps.not(dp).find(\":input[name='\" + el.name + \"']\");\r\n\r\n                if ($els.length) {\r\n                  // Elements with same name found\r\n                  self.appendHidden(el); // Append element with form name\r\n\r\n                  $els.each(function () {\r\n                    self.appendHidden(this); // Append elements with same name and form name\r\n                  });\r\n                }\r\n              }\r\n            });\r\n          });\r\n        }\r\n\r\n        let args = {\r\n          form: form,\r\n          result: true\r\n        },\r\n            evt = $__default.default.Event(\"beforesubmit\", {\r\n          originalEvent: e\r\n        });\r\n        $form.trigger(evt, [args]);\r\n        let result = await args.result; // Support Promise<boolean|Object>\r\n\r\n        if (!evt.isDefaultPrevented() && (result === true || $__default.default.isObject(result) && result.value)) // Support Swal.fire()\r\n          return true;\r\n      } else {\r\n        this.enableForm();\r\n      }\r\n\r\n      return false;\r\n    }; // Submit\r\n\r\n    this.submit = async function (e) {\r\n      var _e$originalEvent, _e$originalEvent$subm;\r\n\r\n      let form = this.getForm(),\r\n          formAction = e == null ? void 0 : (_e$originalEvent = e.originalEvent) == null ? void 0 : (_e$originalEvent$subm = _e$originalEvent.submitter) == null ? void 0 : _e$originalEvent$subm.formAction;\r\n\r\n      if (formAction) {\r\n        formAction = ew.parseUrl(formAction).pathname;\r\n        form.setAttribute(\"action\", formAction);\r\n      }\r\n\r\n      if (await this.canSubmit(e)) {\r\n        if (this.submitWithFetch) {\r\n          let url = form.getAttribute(\"action\"),\r\n              method = form.method.toUpperCase(),\r\n              body = $__default.default(form).serialize();\r\n          return ew.fetch(url, {\r\n            method,\r\n            body\r\n          }).finally(() => this.enableForm()); // Return Promise\r\n        } else {\r\n          form.submit();\r\n        }\r\n      } else {\r\n        this.enableForm();\r\n      }\r\n    }; // Get dynamic selection list by element name or id\r\n\r\n    this.getList = function (name) {\r\n      var _this$getElement, _this$getElement$data;\r\n\r\n      if ($__default.default.isObject(name)) {\r\n        // Object\r\n        let obj = name;\r\n        name = obj.name || obj.id;\r\n        if (name.includes(\"query_builder_rule\")) name = obj.dataset.field;\r\n      }\r\n\r\n      name = name.replace(/^(sv_)?[xy](\\d*|\\$rowindex\\$)_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\r\n\r\n      if (this.lists[name]) return this.lists[name];\r\n      let field = (_this$getElement = this.getElement(name)) == null ? void 0 : (_this$getElement$data = _this$getElement.dataset.field) == null ? void 0 : _this$getElement$data.replace(/^x_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\r\n\r\n      return field ? this.lists[field] : {};\r\n    }; // Compile templates\r\n\r\n    this.compileTemplates = function () {\r\n      let lists = Object.values(this.lists);\r\n\r\n      for (let list of lists) {\r\n        if (list.template && $__default.default.isString(list.template)) list.template = $__default.default.templates(list.template);\r\n      }\r\n    }; // Get option template of dynamic selection list\r\n\r\n    this.getOptionTemplate = function (list) {\r\n      if (list.template && $__default.default.isString(list.template)) list.template = $__default.default.templates(list.template);\r\n      return list.template;\r\n    }; // Get the HTML form element\r\n\r\n    this.getForm = function () {\r\n      if (!this.htmlForm) {\r\n        var _this$element, _this$element2;\r\n\r\n        if (((_this$element = this.element) == null ? void 0 : _this$element.tagName) == \"FORM\") {\r\n          // HTML form\r\n          this.htmlForm = this.element;\r\n        } else if (((_this$element2 = this.element) == null ? void 0 : _this$element2.tagName) == \"DIV\") {\r\n          // HTML div => Grid page\r\n          this.htmlForm = this.element.closest(\"form\");\r\n        }\r\n      }\r\n\r\n      return this.htmlForm;\r\n    }; // Get form element as single element\r\n\r\n    this.getElement = function (name) {\r\n      return name ? ew.getElement(name, this.$element) : this.$element[0];\r\n    }; // Get form element(s) as single element or array of radio/checkbox\r\n\r\n    this.getElements = function (name) {\r\n      return ew.getElements(name, this.$element);\r\n    }; // Fix ID\r\n\r\n    this.fixId = function (id, multiple, rowindex) {\r\n      let t = \"\",\r\n          ar = id.split(\" \");\r\n\r\n      if (ar.length > 1) {\r\n        t = ar[0];\r\n        rowindex = \"\";\r\n        id = ar[1];\r\n      }\r\n\r\n      let prefix = $__default.default.isNumber(rowindex) ? \"x\" + rowindex + \"_\" : \"x_\"; // Add row index\r\n\r\n      id = id.startsWith(\"x_\") ? id.replace(/^x_/, prefix) // Field element name\r\n      : prefix + id; // Field var\r\n\r\n      if (multiple && !id.endsWith(\"[]\")) // Add [] if select-multiple\r\n        id += \"[]\";\r\n      return t ? t + \" \" + id : id;\r\n    };\r\n    /**\r\n     * Update a selection list\r\n     * @param {string|HTMLElement} id - ID (Field param) or HTML element\r\n     * @param {Object} list - List\r\n     * @param {(null|undefined|number)} rowindex - Row index\r\n     * @param {boolean} immediate - Send request immediately\r\n     * @returns\r\n     */\r\n\r\n    this.updateList = function (id, list, rowindex, immediate) {\r\n      var _list, _Object$entries$find;\r\n\r\n      (_list = list) != null ? _list : list = $__default.default.isString(id) // Find the list if not provided\r\n      ? (_Object$entries$find = Object.entries(this.lists).find(entry => entry[0] == id.replace(/^x_/, \"\"))) == null ? void 0 : _Object$entries$find[1] // String\r\n      : this.getList(id); // HTMLElement\r\n\r\n      if (list.template && $__default.default.isString(list.template)) // Compile template in case updateLists() called before init()\r\n        list.template = $__default.default.templates(list.template);\r\n      let form = this.element,\r\n          parents = list.parentFields.slice().map(parent => this.fixId(parent, false, rowindex)),\r\n          // Clone and fix index\r\n      ajax = list.ajax && !list.lookupOptions.length; // Has link table and no lookup cache\r\n\r\n      id = $__default.default.isString(id) ? this.fixId(id, list.multiple, rowindex) : id;\r\n      return !ajax || immediate ? ew.updateOptions.call(this, id, parents, ajax, false) // Non-Ajax (lookup cache or user values) or update immediately\r\n      : [id, parents.map(parent => ew.getOptionValues(parent, form)), ajax, false]; // Ajax (async) => to be batch updated\r\n    };\r\n    /**\r\n     * Update selection lists\r\n     * @param {(null|undefined|number)} rowindex - Row index\r\n     * @param {bool} [immediate] - Send request immediately\r\n     * @returns\r\n     */\r\n\r\n    this.updateLists = function (rowindex, immediate) {\r\n      var _form$querySelector;\r\n\r\n      if (rowindex === null) // rowindex == $rowindex$ == null\r\n        return;\r\n      if (this.pageId == \"grid\" && !$__default.default.isNumber(rowindex) && !$__default.default.isUndefined(rowindex)) return;\r\n      let form = this.getForm(); // Set up $element and htmlForm\r\n\r\n      if ((form == null ? void 0 : (_form$querySelector = form.querySelector(\"input#confirm\")) == null ? void 0 : _form$querySelector.value) == \"confirm\") // Confirm page\r\n        return;\r\n      let selector = Object.entries(this.lists).map(_ref => {\r\n        let [id, list] = _ref;\r\n        return \"[name='\" + this.fixId(id, list.multiple, rowindex) + \"']\";\r\n      }).join();\r\n      if (selector && this.element.querySelector(selector)) // List found\r\n        Object.entries(this.lists).map(_ref2 => {\r\n          let [id, list] = _ref2;\r\n          return this.updateList(id, list, rowindex);\r\n        }) // Update each list\r\n        .filter(result => Array.isArray(result)) // Get ajax requests for batch update\r\n        .forEach(request => this.batch.add(ew.updateOptions.bind(this, ...request))); // Batch update async requests\r\n      // Update the Ajax lists\r\n\r\n      if (this.batch.requests.length) {\r\n        if (rowindex === undefined || immediate) {\r\n          // Called by form or update immediately (add blank row)\r\n          let deferreds = [],\r\n              batchSize = ew.ajaxBatchSize > 0 ? ew.ajaxBatchSize : 1;\r\n\r\n          while (this.batch.requests.length > batchSize) {\r\n            let b = new Batch();\r\n            b.requests = this.batch.requests.splice(0, batchSize);\r\n            deferreds.push(b.send({\r\n              url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n            }));\r\n          }\r\n\r\n          if (this.batch.requests.length > 0) deferreds.push(this.batch.send({\r\n            url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n          }));\r\n          $__default.default.when(...deferreds).then(() => $__default.default(document).trigger(\"updatedone\", [{\r\n            source: self,\r\n            target: form\r\n          }])).fail(error => console.log(error)).always(() => this.batch.clear());\r\n        }\r\n      } else {\r\n        $__default.default(document).trigger(\"updatedone\", [{\r\n          source: self,\r\n          target: form\r\n        }]);\r\n      }\r\n    }; // Create AutoSuggest\r\n\r\n    this.createAutoSuggest = function (settings) {\r\n      var options = Object.assign({\r\n        limit: ew.AUTO_SUGGEST_MAX_ENTRIES,\r\n        form: this\r\n      }, ew.autoSuggestSettings, settings); // Global settings + field specific settings\r\n\r\n      self.autoSuggests[settings.id] = new ew.AutoSuggest(options);\r\n    }; // Init editors\r\n\r\n    this.initEditors = function () {\r\n      var form = this.getForm();\r\n      $__default.default(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default.default(el).data(\"editor\");\r\n        if (ed && !ed.active && !ed.name.includes(\"$rowindex$\")) ed.create();\r\n      });\r\n    }; // Update textareas\r\n\r\n    this.updateTextArea = function (name) {\r\n      var form = this.getForm();\r\n      $__default.default(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default.default(el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n\r\n        ed.save();\r\n        if (name) return false; // Break\r\n      });\r\n    }; // Destroy editor(s)\r\n\r\n    this.destroyEditor = function (name) {\r\n      var form = this.getForm();\r\n      $__default.default(form.elements).filter(\"textarea.editor\").each(function (i, el) {\r\n        var ed = $__default.default(el).data(\"editor\");\r\n        if (!ed || name && ed.name != name) return true; // Continue\r\n\r\n        ed.destroy();\r\n        if (name) return false; // Break\r\n      });\r\n    }; // Show error message\r\n\r\n    this.onError = function (el, msg) {\r\n      return ew.onError(this, el, msg);\r\n    }; // Init file upload\r\n\r\n    this.initUpload = function () {\r\n      var form = this.getForm();\r\n      $__default.default(form.elements).filter(\"input:file:not([name*='$rowindex$'])\").each(function (index) {\r\n        $__default.default.later(ew.AJAX_DELAY * index, null, ew.upload, this); // Delay a little in case of large number of upload fields\r\n      });\r\n    }; // Set up filters\r\n\r\n    this.setupFilters = function (e, filters) {\r\n      let id = this.id,\r\n          data = this.filterList ? this.filterList.data : null,\r\n          $sf = $__default.default(\".ew-save-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !data),\r\n          $df = $__default.default(\".ew-delete-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !filters.length).toggleClass(\"dropdown-toggle\", !!filters.length),\r\n          $delete = $df.parent(\"li\").toggleClass(\"dropdown-submenu dropdown-hover\", !!filters.length).toggleClass(\"disabled\", !filters.length),\r\n          $save = $sf.parent(\"li\").toggleClass(\"disabled\", !data);\r\n\r\n      let saveFilters = function (id, filters) {\r\n        if (ew.CLIENT_SEARCH_FILTER) {\r\n          localStorage.setItem(ew.PROJECT_NAME + \"_\" + id + \"_filters\", JSON.stringify(filters));\r\n        } else if (ew.SERVER_SEARCH_FILTER) {\r\n          document.body.style.cursor = \"wait\";\r\n          $__default.default.ajax(ew.currentPage(), {\r\n            type: \"POST\",\r\n            dataType: \"json\",\r\n            data: {\r\n              \"ajax\": \"savefilters\",\r\n              \"filters\": JSON.stringify(filters)\r\n            }\r\n          }).done(function (result) {\r\n            var _result$;\r\n\r\n            if ((_result$ = result[0]) != null && _result$.success) self.filterList.filters = filters; // Save filters\r\n          }).always(function () {\r\n            document.body.style.cursor = \"default\";\r\n          });\r\n        }\r\n      };\r\n\r\n      $save.off(\"click.ew\").on(\"click.ew\", function (e) {\r\n        // Save filter\r\n        if ($save.hasClass(\"disabled\")) return false;\r\n        ew.prompt({\r\n          input: \"text\",\r\n          html: ew.language.phrase(\"EnterFilterName\")\r\n        }, name => {\r\n          name = ew.sanitize(name);\r\n\r\n          if (name) {\r\n            filters.push([name, data]);\r\n            saveFilters(id, filters);\r\n          }\r\n        }, true);\r\n      }).prevAll().remove();\r\n      $df.next(\"ul.dropdown-menu\").remove();\r\n\r\n      if (filters.length) {\r\n        let $submenu = $__default.default('<ul class=\"dropdown-menu\"></ul>');\r\n        filters.forEach((filter, i, ar) => {\r\n          $__default.default('<li><a class=\"dropdown-item\" data-index=\"' + i + '\" data-ew-action=\"none\">' + filter[0] + '</a></li>').on(\"click\", function (e) {\r\n            // Delete\r\n            let index = this.querySelector(\"a[data-index]\").dataset.index;\r\n            ew.prompt(ew.language.phrase(\"DeleteFilterConfirm\").replace(\"%s\", filter[0]), result => {\r\n              if (result) {\r\n                ar.splice(index, 1);\r\n                saveFilters(id, filters);\r\n              }\r\n            });\r\n          }).appendTo($submenu);\r\n          $__default.default('<li><a class=\"dropdown-item ew-reset-filter-list\" data-index=\"' + i + '\" data-ew-action=\"none\">' + filter[0] + '</a></li>').insertBefore($save).on(\"click\", function (e) {\r\n            let body = {\r\n              cmd: \"resetfilter\",\r\n              filter: JSON.stringify(filter[1])\r\n            };\r\n            ew.refresh(ew.fetch(ew.setLayout(ew.currentPage(), false), {\r\n              method: \"POST\",\r\n              body\r\n            }));\r\n          });\r\n        });\r\n        $__default.default('<li class=\"dropdown-divider\"></li>').insertBefore($save);\r\n        $delete.append($submenu);\r\n      }\r\n    }; // Add event handler\r\n\r\n    this.on = function () {\r\n      $self.on(...arguments);\r\n    }; // Add event handler\r\n\r\n    this.one = function () {\r\n      $self.one(...arguments);\r\n    }; // Remove event handler\r\n\r\n    this.off = function () {\r\n      $self.off(...arguments);\r\n    }; // Trigger event\r\n\r\n    this.trigger = function () {\r\n      $self.trigger(...arguments);\r\n    }; // Init form\r\n\r\n    this.init = function () {\r\n      if (this._initiated) return; // Check form\r\n\r\n      var form = this.getForm();\r\n      if (!form) return;\r\n      var $form = $__default.default(form); // Compile templates\r\n\r\n      this.compileTemplates(); // Search form\r\n\r\n      if (/s(ea)?rch$/.test(this.id)) {\r\n        // Search panel\r\n        if (this.initSearchPanel && !ew.hasFormData(form)) $__default.default(\"#\" + this.id + \"_search_panel\").removeClass(\"show\"); // Hide search operator column\r\n\r\n        if (!$__default.default(\".ew-table .ew-search-operator\").text().trim()) $__default.default(\".ew-table .ew-search-operator\").parent(\"td\").hide(); // Search operators\r\n\r\n        $form.find(\"select[id^=z_]\").each(function () {\r\n          var $this = $__default.default(this).trigger(\"change\");\r\n          if ($this.val() != \"BETWEEN\") $form.find(\"#w_\" + this.id.substring(2)).trigger(\"change\");\r\n        });\r\n      } // Multi-page\r\n\r\n      if (this.multiPage) this.multiPage.render(); // HTML editors\r\n\r\n      loadjs.ready([\"editor\"], () => setTimeout(this.initEditors.bind(this), 0)); // Delay for custom template to apply first\r\n      // Dynamic selection lists\r\n\r\n      this.updateLists(); // Init file upload\r\n\r\n      this.initUpload(); // Submit/Cancel\r\n\r\n      if (this.$element.is(\"form\")) {\r\n        // Not Grid page\r\n        // Detail pages\r\n        this.$element.find(\".ew-detail-pages .ew-nav a[data-bs-toggle=tab]\").on(\"shown.bs.tab\", function (e) {\r\n          var $tab = $__default.default(e.target.getAttribute(\"href\")),\r\n              $panel = $tab.find(\".table-responsive.ew-grid-middle-panel\"),\r\n              $container = $tab.closest(\".container-fluid\");\r\n          if ($panel.width() >= $container.width()) $panel.width($container.width() + \"px\");else $panel.width(\"auto\");\r\n        });\r\n        $form.off(\"submit.ew\").on(\"submit.ew\", function (e) {\r\n          // Bind submit event\r\n          let args = {\r\n            form: form,\r\n            result: self.submit(e)\r\n          },\r\n              evt = $__default.default.Event(\"aftersubmit\", {\r\n            originalEvent: e\r\n          });\r\n          self.trigger(evt, [args]);\r\n          return false; // Disable normal submission\r\n        });\r\n        $form.find(\"[data-field], .ew-priv\").on(\"change\", function () {\r\n          if (ew.CONFIRM_CANCEL) self.modified = true;\r\n        });\r\n        $form.find(\"#btn-cancel[data-href]\").on(\"click\", function () {\r\n          // Cancel\r\n          self.updateTextArea();\r\n          var href = this.dataset.href;\r\n\r\n          if (self.modified && ew.hasFormData(form)) {\r\n            ew.prompt(ew.language.phrase(\"ConfirmCancel\"), result => {\r\n              if (result) {\r\n                $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n\r\n                window.location = href;\r\n              }\r\n            });\r\n          } else {\r\n            $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\r\n\r\n            window.location = href;\r\n          }\r\n        });\r\n      }\r\n\r\n      this._initiated = true; // Store form object as data\r\n\r\n      this.$element.data(\"form\", this); // Enable form\r\n\r\n      if (this.enableOnInit || Array.from(form.elements).find(el => el.matches(\"button.disabled.enable-on-init\"))) this.enableForm(); // Trigger listeners\r\n\r\n      this.trigger(\"initiated\");\r\n    }; // Add to the global forms object\r\n\r\n    ew.forms.add(this);\r\n  }\n\n  /**\r\n   * Class Field\r\n   */\r\n  let Field = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]|Function} validators Validators\r\n     * @param {bool} invalid Initial valid status (e.g. server side)\r\n     */\r\n    function Field(fldvar, validators, invalid) {\r\n      _defineProperty(this, \"name\", \"\");\r\n\r\n      _defineProperty(this, \"validators\", []);\r\n\r\n      _defineProperty(this, \"_validate\", true);\r\n\r\n      this.name = fldvar;\r\n\r\n      if (Array.isArray(validators)) {\r\n        for (let validator of validators) this.addValidator(validator);\r\n      } else if (typeof validators === \"function\") {\r\n        this.addValidator(validators);\r\n      }\r\n\r\n      this.invalid = invalid;\r\n    }\r\n    /**\r\n     * Add validator\r\n     * @param {Function} validator Validator function\r\n     */\r\n\r\n    var _proto = Field.prototype;\r\n\r\n    _proto.addValidator = function addValidator(validator) {\r\n      if (typeof validator === \"function\") this.validators.push(validator);\r\n    }\r\n    /**\r\n     * Get error\r\n     * @returns {Object}\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Add error\r\n     * @param {Object} err Error\r\n     */\r\n    _proto.addError = function addError(err) {\r\n      if (err) {\r\n        var _this$_error;\r\n\r\n        let error = (_this$_error = this._error) != null ? _this$_error : {};\r\n        this._error = { ...error,\r\n          ...err\r\n        };\r\n        this.invalid = true;\r\n      }\r\n    }\r\n    /**\r\n     * Clear all errors\r\n     */\r\n    ;\r\n\r\n    _proto.clearErrors = function clearErrors() {\r\n      this._error = null;\r\n      this.invalid = false;\r\n    }\r\n    /**\r\n     * Clear all validators\r\n     */\r\n    ;\r\n\r\n    _proto.clearValidators = function clearValidators() {\r\n      this.validators = [];\r\n    }\r\n    /**\r\n     * Get error message\r\n     * @returns {string} HTML\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Validate field value\r\n     * @returns {boolean}\r\n     */\r\n    _proto.validate = function validate() {\r\n      let result = true;\r\n      this.clearErrors(); // Reset error\r\n\r\n      if (this._element && this.shouldValidate) {\r\n        if (Array.isArray(this.validators)) {\r\n          for (let validator of this.validators) {\r\n            let err = validator(this._element);\r\n\r\n            if (err !== false) {\r\n              this.addError(err);\r\n              result = false;\r\n            }\r\n          }\r\n\r\n          this.updateFeedback();\r\n        }\r\n      }\r\n\r\n      return result;\r\n    }\r\n    /**\r\n     * Reset invalid property (on page load for Grid-Add/Edit)\r\n     */\r\n    ;\r\n\r\n    _proto.resetInvalid = function resetInvalid() {\r\n      var _this$_element, _this$_element$classL, _this$_element$closes, _this$_element$closes2;\r\n\r\n      this.clearErrors();\r\n      if ((_this$_element = this._element) != null && (_this$_element$classL = _this$_element.classList) != null && _this$_element$classL.contains(\"is-invalid\") && !this._error) this.addError({\r\n        server: (_this$_element$closes = this._element.closest(ew.fieldContainerSelector)) == null ? void 0 : (_this$_element$closes2 = _this$_element$closes.querySelector(\".invalid-feedback\")) == null ? void 0 : _this$_element$closes2.innerHTML\r\n      }); // Server side error\r\n    }\r\n    /**\r\n     * Update the error message to feedback element\r\n     */\r\n    ;\r\n\r\n    _proto.updateFeedback = function updateFeedback() {\r\n      let err = this.errorMessage;\r\n\r\n      if (this._element && err) {\r\n        var _this$_element$closes3;\r\n\r\n        let feedback = (_this$_element$closes3 = this._element.closest(ew.fieldContainerSelector)) == null ? void 0 : _this$_element$closes3.querySelector(\".invalid-feedback\");\r\n        if (feedback) feedback.innerHTML = err;\r\n        ew.setInvalid(this._element);\r\n      }\r\n    }\r\n    /**\r\n     * Set focus\r\n     * @param {Object} options - Focus options\r\n     */\r\n    ;\r\n\r\n    _proto.focus = function focus(options) {\r\n      if (this._element) ew.setFocus(this._element, options);\r\n    }\r\n    /**\r\n     * Check if the field can be focused\r\n     */\r\n    ;\r\n\r\n    _proto.canFocus = function canFocus() {\r\n      var _el$style, _el$classList;\r\n\r\n      let el = this._element;\r\n      return el && !(el.hidden && !el.tagName == \"SELECTION-LIST\" || el.readonly || el.disabled || el.type == \"hidden\" || ((_el$style = el.style) == null ? void 0 : _el$style.display) == \"none\" || (_el$classList = el.classList) != null && _el$classList.contains(\"d-none\"));\r\n    }\r\n    /**\r\n     * Check if focused\r\n     */\r\n    ;\r\n\r\n    _createClass(Field, [{\r\n      key: \"error\",\r\n      get: function () {\r\n        return this._error;\r\n      }\r\n    }, {\r\n      key: \"errorMessage\",\r\n      get: function () {\r\n        if (this._error) {\r\n          return Array.from(Object.values(this._error)).join(\"<br>\");\r\n        }\r\n\r\n        return \"\";\r\n      }\r\n      /**\r\n       * Check if the field should be validated\r\n       */\r\n\r\n    }, {\r\n      key: \"shouldValidate\",\r\n      get: function () {\r\n        return !this._checkbox || this._checkbox.checked;\r\n      }\r\n      /**\r\n       * Set form element\r\n       */\r\n\r\n    }, {\r\n      key: \"element\",\r\n      get:\r\n      /**\r\n       * Get form element\r\n       * @returns {HTMLElement|HTMLElement[]}\r\n       */\r\n      function () {\r\n        return this._element;\r\n      }\r\n      /**\r\n       * Get field value from form element\r\n       * @returns {string|Array}\r\n       */\r\n      ,\r\n      set: function (el) {\r\n        var _this$_element2, _this$_element2$id;\r\n\r\n        this._element = el;\r\n        this._checkbox = (_this$_element2 = this._element) != null && (_this$_element2$id = _this$_element2.id) != null && _this$_element2$id.match(/^[xy]_/) ? document.getElementById(this._element.id.replace(/^[xy]_/, \"u_\").replace(/\\[\\]$/, \"\")) : null; // Find the checkbox for the field in Update page\r\n      }\r\n    }, {\r\n      key: \"value\",\r\n      get: function () {\r\n        return this._element ? ew.getValue(this._element) : \"\";\r\n      }\r\n    }, {\r\n      key: \"focused\",\r\n      get: function () {\r\n        return this._element && this._element == document.activeElement;\r\n      }\r\n    }]);\r\n\r\n    return Field;\r\n  }();\n\n  /**\r\n   * Class Form\r\n   */\r\n\r\n  let Form = /*#__PURE__*/function (_FormBase) {\r\n    _inheritsLoose(Form, _FormBase);\r\n\r\n    /**\r\n     * Constructor\r\n     * @param {string} id Form ID\r\n     * @param {string} pageId Page ID\r\n     */\r\n    function Form(id, pageId) {\r\n      var _this;\r\n\r\n      _this = _FormBase.call(this, id, pageId) || this;\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"row\", {});\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"fields\", {});\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"validateRequired\", true);\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"autoFocus\", true);\r\n\r\n      _defineProperty(_assertThisInitialized(_this), \"autoFocusPreventScroll\", true);\r\n\r\n      _this.on(\"initiated\", function () {\r\n        let form = this.getForm();\r\n\r\n        if (form.classList.contains(\"ew-wait\")) {\r\n          this.one(\"enabled\", function () {\r\n            this.setInvalid();\r\n            this.tryFocus();\r\n          });\r\n          return;\r\n        }\r\n\r\n        this.setInvalid();\r\n        this.tryFocus();\r\n      });\r\n\r\n      return _this;\r\n    }\r\n    /**\r\n     * Add field\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Function[]} validators Validators\r\n     * @param {bool} invalid Invalid\r\n     */\r\n\r\n    var _proto = Form.prototype;\r\n\r\n    _proto.addField = function addField(fldvar, validators, invalid) {\r\n      if (!(fldvar in this.fields)) this.fields[fldvar] = new Field(fldvar, validators, invalid);\r\n    }\r\n    /**\r\n     * Get field\r\n     * @param {string} fldvar Field variable name\r\n     * @returns Field\r\n     */\r\n    ;\r\n\r\n    _proto.getField = function getField(fldvar) {\r\n      return this.fields[fldvar];\r\n    }\r\n    /**\r\n     * Add fields by field definitions\r\n     * @param {Array} fields\r\n     */\r\n    ;\r\n\r\n    _proto.addFields = function addFields(fields) {\r\n      if (Array.isArray(fields)) {\r\n        for (let field of fields) {\r\n          if (Array.isArray(field)) {\r\n            this.addField.apply(this, field);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Add error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {Object} err Error\r\n     */\r\n    ;\r\n\r\n    _proto.addError = function addError(fldvar, err) {\r\n      if (err) {\r\n        var _this$_error;\r\n\r\n        this._error = (_this$_error = this._error) != null ? _this$_error : {};\r\n        this._error[fldvar] = err;\r\n      }\r\n    }\r\n    /**\r\n     * Add custom error\r\n     * @param {string} fldvar Field variable name\r\n     * @param {string} msg Error message\r\n     * @param {number} rowIndex - Row index\r\n     */\r\n    ;\r\n\r\n    _proto.addCustomError = function addCustomError(fldvar, msg, rowIndex) {\r\n      if (fldvar in this.fields) {\r\n        let field = this.fields[fldvar],\r\n            err = {\r\n          custom: msg\r\n        };\r\n        field.addError(err);\r\n        this.setFieldElement(fldvar, rowIndex);\r\n        field.updateFeedback();\r\n        this.addError(fldvar, err);\r\n      }\r\n\r\n      return false;\r\n    }\r\n    /**\r\n     * Get error\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Set focus to a HTML element\r\n     * @param {HTMLElement} el - HTML element to be focused\r\n     */\r\n    _proto.setFocus = function setFocus(el) {\r\n      let delay = this.makeVisible(el) ? Form.focusDelay : 0;\r\n\r\n      if (el && el != document.activeElement && el.focus) {\r\n        let preventScroll = !el.closest(\".modal-body\") && Form.autoFocusPreventScroll && this.autoFocusPreventScroll;\r\n        setTimeout(() => {\r\n          el.focus({\r\n            preventScroll\r\n          });\r\n        }, delay); // Focus after tab transition\r\n\r\n        this._focused = true;\r\n      }\r\n    }\r\n    /**\r\n     * Set focus to the first field with error\r\n     */\r\n    ;\r\n\r\n    _proto.focus = function focus() {\r\n      if (!this.canFocus()) return;\r\n\r\n      for (let [fldvar, field] of Object.entries(this.fields)) {\r\n        var _this$_error2;\r\n\r\n        if (field.invalid || (_this$_error2 = this._error) != null && _this$_error2[fldvar]) {\r\n          this.getFocusable(field);\r\n\r\n          if (field.canFocus()) {\r\n            this.setFocus(field.element);\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    /**\r\n     * Get focuable field element\r\n     * @param {Field} field - Field object\r\n     */\r\n    ;\r\n\r\n    _proto.getFocusable = function getFocusable(field) {\r\n      var _field$element;\r\n\r\n      (_field$element = field.element) != null ? _field$element : field.element = this.getFieldElements(field.name);\r\n      if (!field.canFocus()) field.element = this.getFieldElements(field.name, 0); // Inline-Add\r\n\r\n      if (!field.canFocus()) field.element = this.getFieldElements(field.name, 1); // Inline-Edit or Grid-Add/Edit\r\n    }\r\n    /**\r\n     * Try set focus to a field\r\n     * @param {string|undefined|true} fieldName [undefined] - Field variable name. If undefined, find the first field. If true, always try to focus.\r\n     */\r\n    ;\r\n\r\n    _proto.tryFocus = function tryFocus(fieldName) {\r\n      if (!this.canFocus()) return;\r\n      if (!fieldName && (!Form.autoFocus || !this.autoFocus || this._focused)) return;\r\n\r\n      if (!fieldName && this.invalid) {\r\n        // Has error\r\n        this.focus();\r\n        return;\r\n      }\r\n\r\n      if ([\"add\", \"edit\"].includes(this.pageId)) {\r\n        // Process detail forms\r\n        let form = this.getForm(),\r\n            detailpage = Array.from(form.querySelectorAll(\"input[name=detailpage]\")).find(dp => {\r\n          var _ew$forms$get;\r\n\r\n          return (_ew$forms$get = ew.forms.get(dp.value)) == null ? void 0 : _ew$forms$get.invalid;\r\n        });\r\n\r\n        if (detailpage) {\r\n          detailpage.focus();\r\n          return;\r\n        }\r\n      }\r\n\r\n      for (let [fldvar, field] of Object.entries(this.fields)) {\r\n        if (typeof fieldName == \"string\" && fieldName !== fldvar) continue;\r\n        field.element = null; // Reset field element first so that it will get the first element\r\n\r\n        this.getFocusable(field);\r\n\r\n        if (field.canFocus()) {\r\n          this.setFocus(field.element);\r\n          return;\r\n        }\r\n      }\r\n\r\n      let input = this.element[ew.TABLE_BASIC_SEARCH]; // Quick Search input\r\n\r\n      if (this.id.endsWith(\"srch\") && input && input != document.activeElement) {\r\n        // Extended Search\r\n        input.focus({\r\n          preventScroll: Form.autoFocusPreventScroll && this.autoFocusPreventScroll\r\n        }); // Focus the Quick Search input\r\n\r\n        this._focused = true;\r\n      }\r\n    }\r\n    /**\r\n     * Check if the form can be focused\r\n     */\r\n    ;\r\n\r\n    _proto.canFocus = function canFocus() {\r\n      var _el$style, _el$classList;\r\n\r\n      let el = this.element;\r\n      return el && !(el.hidden || el.type == \"hidden\" || ((_el$style = el.style) == null ? void 0 : _el$style.display) == \"none\" || (_el$classList = el.classList) != null && _el$classList.contains(\"d-none\"));\r\n    }\r\n    /**\r\n     * Make the form visible\r\n     * @param {HTMLElement} el - Focused element\r\n     */\r\n    ;\r\n\r\n    _proto.makeVisible = function makeVisible(el) {\r\n      if (this.multiPage) {\r\n        // Multi-page\r\n        this.multiPage.gotoPageByElement(el);\r\n        return true;\r\n      } else if (this.$element.is(\"div\")) {\r\n        // Multiple Master/Detail\r\n        let $pane = this.$element.closest(\".tab-pane\");\r\n\r\n        if ($pane[0] && !$pane.hasClass(\"active\")) {\r\n          $pane.closest(\".ew-nav\").find(\"a[data-bs-toggle=tab][href='#\" + $pane.attr(\"id\") + \"']\").trigger(\"click\");\r\n          return true;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    }\r\n    /**\r\n     * Validate all fields of the specified row\r\n     * @param {number} rowIndex - Row index\r\n     */\r\n    ;\r\n\r\n    _proto.validateFields = function validateFields(rowIndex) {\r\n      var _rowIndex;\r\n\r\n      (_rowIndex = rowIndex) != null ? _rowIndex : rowIndex = this.getCurrentRowIndex();\r\n      if (rowIndex < 2) // Regular pages (\"\"), Inline-Add (\"0\") or first row (\"1\")\r\n        this.value = null; // Reset\r\n\r\n      this.row = {};\r\n      this._error = null; // Reset\r\n\r\n      let result = true;\r\n\r\n      for (let field of Object.values(this.fields)) {\r\n        field.element = this.getFieldElements(field.name, rowIndex);\r\n        this.row[field.name] = field.value; // Get field value\r\n\r\n        if (field.element && !field.validate()) {\r\n          // Invalid field value\r\n          this.addError(field.name, field.error);\r\n          result = false;\r\n        }\r\n      } // Save the field values of the row\r\n\r\n      if (!this.value) {\r\n        this.value = { ...this.row\r\n        };\r\n      } else {\r\n        if (!Array.isArray(this.value)) this.value = [this.value];\r\n        let index = parseInt(rowIndex, 10) || 0;\r\n        index = index > 1 ? index - 1 : 0;\r\n        this.value[index] = { ...this.row\r\n        };\r\n      }\r\n\r\n      this.focus();\r\n      return result;\r\n    }\r\n    /**\r\n     * Key count (number|NaN)\r\n     */\r\n    ;\r\n\r\n    /**\r\n     * Validate\r\n     * @param {Event} e - Event\r\n     * @returns {bool}\r\n     */\r\n    _proto.validate = async function validate(e) {\r\n      var _form$querySelector, _form$querySelector2, _ref, _e$currentTarget;\r\n\r\n      if (!this.validateRequired) return true; // Ignore validation\r\n\r\n      let form = this.getForm();\r\n      if (((_form$querySelector = form.querySelector(\"#confirm\")) == null ? void 0 : _form$querySelector.value) == \"confirm\") return true;\r\n\r\n      if (this.pageId == \"update\" && !ew.updateSelected(form)) {\r\n        ew.alert(ew.language.phrase(\"NoFieldSelected\"));\r\n        return false;\r\n      }\r\n\r\n      let addcnt = 0,\r\n          inlineAdd = form.querySelector(\".ew-inline-insert\"),\r\n          // Inline-Add\r\n      action = ((_form$querySelector2 = form.querySelector(\"#action\")) == null ? void 0 : _form$querySelector2.value) || ((_ref = (_e$currentTarget = e == null ? void 0 : e.currentTarget) != null ? _e$currentTarget : inlineAdd) == null ? void 0 : _ref.dataset.action),\r\n          keycnt = inlineAdd ? 0 : this.keyCount,\r\n          gridinsert = action == \"gridinsert\" || [\"insert\", \"confirm\"].includes(action) && keycnt,\r\n          // Grid-Add or Master/Detail-Add\r\n      startcnt = inlineAdd ? 0 : 1,\r\n          rowcnt = inlineAdd ? 0 : keycnt || 1;\r\n\r\n      for (let i = startcnt; i <= rowcnt; i++) {\r\n        var _await$this$customVal, _this$customValidate;\r\n\r\n        let rowIndex = keycnt >= 0 ? String(i) : \"\";\r\n        form.dataset.rowindex = rowIndex;\r\n\r\n        if ([\"list\", \"grid\"].includes(this.pageId)) {\r\n          if (gridinsert ? !this.emptyRow(rowIndex) : true) addcnt++;else continue;\r\n        } // Validate fields\r\n\r\n        if (!this.validateFields(rowIndex)) return false; // Call customValidate event\r\n\r\n        if (!((_await$this$customVal = await ((_this$customValidate = this.customValidate) == null ? void 0 : _this$customValidate.call(this, form))) != null ? _await$this$customVal : true)) {\r\n          this.focus();\r\n          return false;\r\n        }\r\n      }\r\n\r\n      delete form.dataset.rowindex; // Reset\r\n\r\n      if (this.pageId == \"list\" && gridinsert && addcnt == 0) {\r\n        // No row added\r\n        ew.alert({\r\n          html: ew.language.phrase(\"NoAddRecord\"),\r\n          returnFocus: false\r\n        }); // Do not return focus\r\n\r\n        this.tryFocus(true);\r\n        return false;\r\n      } // Process detail forms\r\n\r\n      if ([\"add\", \"edit\"].includes(this.pageId)) {\r\n        let detailpages = form.querySelectorAll(\"input[name=detailpage]\");\r\n\r\n        for (let dp of detailpages) {\r\n          var _await$frm$validate;\r\n\r\n          let frm = ew.forms.get(dp.value);\r\n          if (!((_await$frm$validate = await (frm == null ? void 0 : frm.validate == null ? void 0 : frm.validate(e))) != null ? _await$frm$validate : true)) return false;\r\n        }\r\n      }\r\n\r\n      return true;\r\n    }\r\n    /**\r\n     * Get current row index (during validation)\r\n     * @returns {string} Row index\r\n     */\r\n    ;\r\n\r\n    _proto.getCurrentRowIndex = function getCurrentRowIndex() {\r\n      var _this$getForm$dataset;\r\n\r\n      return (_this$getForm$dataset = this.getForm().dataset.rowindex) != null ? _this$getForm$dataset : \"\";\r\n    }\r\n    /**\r\n     * Get field values of the specified row\r\n     * @param {number} rowIndex - Row index\r\n     */\r\n    ;\r\n\r\n    _proto.getValue = function getValue(rowIndex) {\r\n      var _rowIndex2;\r\n\r\n      (_rowIndex2 = rowIndex) != null ? _rowIndex2 : rowIndex = this.getCurrentRowIndex();\r\n      let value = {};\r\n\r\n      for (let field of Object.values(this.fields)) {\r\n        var _field$element2;\r\n\r\n        (_field$element2 = field.element) != null ? _field$element2 : field.element = this.getFieldElements(field.name, rowIndex);\r\n        value[field.name] = field.value; // Get field value\r\n      }\r\n\r\n      return value;\r\n    }\r\n    /**\r\n     * Get a field value of the specified row\r\n     * @param {string} fldvar - Field variable name\r\n     * @param {number} rowIndex - Row index\r\n     */\r\n    ;\r\n\r\n    _proto.getFieldValue = function getFieldValue(fldvar, rowIndex) {\r\n      let field = this.getField(fldvar);\r\n\r\n      if (field) {\r\n        var _rowIndex3, _field$element3;\r\n\r\n        (_rowIndex3 = rowIndex) != null ? _rowIndex3 : rowIndex = this.getCurrentRowIndex();\r\n        (_field$element3 = field.element) != null ? _field$element3 : field.element = this.getFieldElements(field.name, rowIndex);\r\n        return field.value;\r\n      }\r\n\r\n      return null;\r\n    }\r\n    /**\r\n     * Get HTML elements for a field\r\n     * @param {string} name - Field name\r\n     * @param {number} rowIndex - Row index\r\n     * @returns HTMLElement|HTMLElement[]|null\r\n     */\r\n    ;\r\n\r\n    _proto.getFieldElements = function getFieldElements(name, rowIndex) {\r\n      var _rowIndex4;\r\n\r\n      (_rowIndex4 = rowIndex) != null ? _rowIndex4 : rowIndex = this.getCurrentRowIndex();\r\n      return this.getElements(\"x\" + rowIndex + \"_\" + name) || // By name with prefix\r\n      this.getElements(\"x\" + rowIndex + \"_\" + name + \"[]\") || // By name with prefix and []\r\n      this.getElements(name); // By name directly (e.g. email form)\r\n    }\r\n    /**\r\n     * Set the element property of the field object and return the field elements\r\n     * @param {string} fldvar - Field variable name\r\n     * @param {number} rowIndex - Row index\r\n     * @returns HTMLElement|HTMLElement[]|null\r\n     */\r\n    ;\r\n\r\n    _proto.setFieldElement = function setFieldElement(fldvar, rowIndex) {\r\n      let field = this.getField(fldvar);\r\n      if (field) field.element = this.getFieldElements(field.name, rowIndex);\r\n      return field == null ? void 0 : field.element;\r\n    }\r\n    /**\r\n     * Set invalid fields of the specified row\r\n     * @param {number} rowIndex - Row index. If undefined, set for the whole form.\r\n     */\r\n    ;\r\n\r\n    _proto.setInvalid = function setInvalid(rowIndex) {\r\n      let form = this.getForm(); // Get HTML form\r\n\r\n      if (typeof rowIndex === \"undefined\" && this.formKeyCountName) {\r\n        let inlineAdd = form.querySelector(\".ew-inline-insert\"),\r\n            // Inline-Add\r\n        keycnt = inlineAdd ? 0 : this.keyCount,\r\n            startcnt = inlineAdd ? 0 : 1,\r\n            rowcnt = inlineAdd ? 0 : keycnt || 1;\r\n\r\n        for (let i = startcnt; i <= rowcnt; i++) {\r\n          let rowIndex = keycnt >= 0 ? String(i) : \"\";\r\n          this.setInvalid(rowIndex);\r\n        }\r\n      } else {\r\n        var _rowIndex5;\r\n\r\n        (_rowIndex5 = rowIndex) != null ? _rowIndex5 : rowIndex = \"\";\r\n\r\n        for (let field of Object.values(this.fields)) {\r\n          field.element = this.getFieldElements(field.name, rowIndex); // Always get element in case Grid-Add/Edit\r\n\r\n          if (rowIndex) field.resetInvalid(); // For Grid-Add/Edit\r\n\r\n          if (field.invalid) {\r\n            this.addError(field.name, field.error);\r\n            if (!this._focused) this.focus(); // Focus at the current row\r\n          } else {\r\n            continue;\r\n          }\r\n\r\n          ew.setInvalid(field.element);\r\n        } // Process detail forms\r\n\r\n        if ([\"add\", \"edit\"].includes(this.pageId)) form.querySelectorAll(\"input[name=detailpage]\").forEach(dp => {\r\n          var _ew$forms$get2;\r\n\r\n          return (_ew$forms$get2 = ew.forms.get(dp.value)) == null ? void 0 : _ew$forms$get2.setInvalid();\r\n        });\r\n      }\r\n    };\r\n\r\n    _createClass(Form, [{\r\n      key: \"error\",\r\n      get: function () {\r\n        return this._error;\r\n      }\r\n      /**\r\n       * Check if invalid\r\n       */\r\n\r\n    }, {\r\n      key: \"invalid\",\r\n      get: function () {\r\n        return this._error || Object.values(this.fields).some(field => field.invalid);\r\n      }\r\n    }, {\r\n      key: \"keyCount\",\r\n      get: function () {\r\n        var _this$getForm$querySe;\r\n\r\n        let keycnt = this.formKeyCountName ? (_this$getForm$querySe = this.getForm().querySelector(\"#\" + this.formKeyCountName)) == null ? void 0 : _this$getForm$querySe.value : undefined; // Get key_count\r\n\r\n        return parseInt(keycnt, 10);\r\n      }\r\n    }]);\r\n\r\n    return Form;\r\n  }(FormBase);\r\n\r\n  _defineProperty(Form, \"autoFocus\", true);\r\n\r\n  _defineProperty(Form, \"autoFocusPreventScroll\", true);\r\n\r\n  _defineProperty(Form, \"focusDelay\", 200);\n\n  /**\r\n   * Class FormBuilder\r\n   */\r\n  let FormBuilder = /*#__PURE__*/function () {\r\n    function FormBuilder() {\r\n      _defineProperty(this, \"lists\", {});\r\n\r\n      _defineProperty(this, \"fields\", []);\r\n\r\n      _defineProperty(this, \"validateRequired\", false);\r\n\r\n      _defineProperty(this, \"multiPage\", false);\r\n\r\n      _defineProperty(this, \"submitWithFetch\", false);\r\n\r\n      _defineProperty(this, \"initSearchPanel\", false);\r\n\r\n      _defineProperty(this, \"enableOnInit\", false);\r\n    }\r\n\r\n    var _proto = FormBuilder.prototype;\r\n\r\n    // Set ID\r\n    _proto.setId = function setId(value) {\r\n      this.id = value;\r\n      return this;\r\n    } // Set page ID\r\n    ;\r\n\r\n    _proto.setPageId = function setPageId(value) {\r\n      this.pageId = value;\r\n      return this;\r\n    } // Set lists\r\n    ;\r\n\r\n    _proto.setLists = function setLists(value) {\r\n      if (value && typeof value == \"object\" && !Array.isArray(value)) this.lists = value;\r\n      return this;\r\n    } // Set lists for query builder (Dynamic Selection Lists and AutoFill not supported since there can be multiple inputs for the same field)\r\n    ;\r\n\r\n    _proto.setQueryBuilderLists = function setQueryBuilderLists(value) {\r\n      if (value && typeof value == \"object\" && !Array.isArray(value)) {\r\n        for (let [id, list] of Object.entries(value)) value[id] = { ...list,\r\n          ...{\r\n            autoFillTargetFields: [],\r\n            childFields: [],\r\n            filterFieldVars: [],\r\n            filterFields: [],\r\n            parentFields: []\r\n          }\r\n        };\r\n\r\n        this.lists = value;\r\n      }\r\n\r\n      return this;\r\n    } // Add list\r\n    ;\r\n\r\n    _proto.addList = function addList(name, value) {\r\n      this.lists[name] = value;\r\n      return this;\r\n    } // Set fields\r\n    ;\r\n\r\n    _proto.setFields = function setFields(value) {\r\n      if (Array.isArray(value)) this.fields = value;\r\n      return this;\r\n    } // Add field\r\n    ;\r\n\r\n    _proto.addField = function addField(fldvar, validators, invalid) {\r\n      if (!this.fields.find(field => field[0] == fldvar)) this.fields.push([fldvar, validators, invalid]);\r\n      return this;\r\n    } // Add fields\r\n    ;\r\n\r\n    _proto.addFields = function addFields(value) {\r\n      if (Array.isArray(value)) this.fields = [...this.fields, ...value];\r\n      return this;\r\n    } // Set validate\r\n    ;\r\n\r\n    _proto.setValidate = function setValidate(value) {\r\n      this.validate = value;\r\n      return this;\r\n    } // Set custom validate\r\n    ;\r\n\r\n    _proto.setCustomValidate = function setCustomValidate(value) {\r\n      this.customValidate = value;\r\n      return this;\r\n    } // Set validate required\r\n    ;\r\n\r\n    _proto.setValidateRequired = function setValidateRequired(value) {\r\n      this.validateRequired = value;\r\n      return this;\r\n    } // Set submit\r\n    ;\r\n\r\n    _proto.setSubmit = function setSubmit(value) {\r\n      this.submit = value;\r\n      return this;\r\n    } // Set form KeyCount name\r\n    ;\r\n\r\n    _proto.setFormKeyCountName = function setFormKeyCountName(value) {\r\n      this.formKeyCountName = value;\r\n      return this;\r\n    } // Set empty row\r\n    ;\r\n\r\n    _proto.setEmptyRow = function setEmptyRow(value) {\r\n      this.emptyRow = value;\r\n      return this;\r\n    } // Set multi page\r\n    ;\r\n\r\n    _proto.setMultiPage = function setMultiPage(value) {\r\n      this.multiPage = value;\r\n      return this;\r\n    } // Set submit with Fetch API\r\n    ;\r\n\r\n    _proto.setSubmitWithFetch = function setSubmitWithFetch(value) {\r\n      this.submitWithFetch = value;\r\n      return this;\r\n    } // Set filter list\r\n    ;\r\n\r\n    _proto.setFilterList = function setFilterList(value) {\r\n      this.filterList = value;\r\n      return this;\r\n    } // Set initSearchPanel\r\n    ;\r\n\r\n    _proto.setInitSearchPanel = function setInitSearchPanel(value) {\r\n      this.initSearchPanel = value;\r\n      return this;\r\n    } // Set enableOnInit\r\n    ;\r\n\r\n    _proto.setEnableOnInit = function setEnableOnInit(value) {\r\n      this.enableOnInit = value;\r\n      return this;\r\n    } // Build\r\n    ;\r\n\r\n    _proto.build = function build() {\r\n      let form = new ew.Form(this.id, this.pageId);\r\n      if (Array.isArray(this.fields)) form.addFields(this.fields);\r\n      if (typeof this.validate == 'function') form.validate = this.validate;\r\n      if (typeof this.customValidate == 'function') form.customValidate = this.customValidate;\r\n      if (typeof this.emptyRow == 'function') form.emptyRow = this.emptyRow;\r\n      if (typeof this.submit == 'function') form.submit = this.submit;\r\n      if (this.formKeyCountName) form.formKeyCountName = this.formKeyCountName;\r\n      if (this.multiPage) form.multiPage = new ew.MultiPage(this.id);\r\n      if (this.enableOnInit) form.enableOnInit = true;\r\n\r\n      if (this.submitWithFetch) {\r\n        form.submitWithFetch = true;\r\n        form.on(\"aftersubmit\", (e, args) => ew.refresh(args == null ? void 0 : args.result, args == null ? void 0 : args.context));\r\n      }\r\n\r\n      if (this.filterList) form.filterList = this.filterList;\r\n      if (this.lists) form.lists = this.lists;\r\n      form.validateRequired = !!this.validateRequired;\r\n      form.initSearchPanel = !!this.initSearchPanel;\r\n      form.lists = this.lists;\r\n      return form;\r\n    };\r\n\r\n    return FormBuilder;\r\n  }();\n\n  let AjaxLookup = /*#__PURE__*/function () {\r\n    /**\r\n     * Constructor\r\n     * @param {Object} settings Settings\r\n     * @param {string} settings.id - Input element ID\r\n     * @param {string|Form} settings.form - Form of the input element\r\n     * @param {Number} settings.limit - Options per page\r\n     * @param {Object} settings.data - Data submitted by Ajax\r\n     * @param {string} settings.action - Ajax action: \"autosuggest\" or \"modal\"\r\n     */\r\n    function AjaxLookup(settings) {\r\n      var _this$list$parentFiel, _this$list$parentFiel2;\r\n\r\n      _defineProperty(this, \"_isAutoSuggest\", null);\r\n\r\n      this.elementId = settings.id; // Id\r\n\r\n      this.form = settings.form; // Form\r\n\r\n      if ($__default.default.isString(this.form)) // Form is string => Form id\r\n        this.form = ew.forms.get(this.form);\r\n      this.element = this.form.getElement(this.elementId); // Actual HTML element\r\n\r\n      if (!this.element) // Element not found\r\n        return;\r\n      this.formElement = this.form.getElement(); // HTML form or DIV\r\n\r\n      this.list = this.form.getList(this.element);\r\n      let m = this.elementId.match(/^[xy](\\d*|\\$rowindex\\$)_/),\r\n          rowindex = m ? m[1] : \"\";\r\n      this.parentFields = (_this$list$parentFiel = (_this$list$parentFiel2 = this.list.parentFields) == null ? void 0 : _this$list$parentFiel2.slice() // Clone\r\n      .map(pf => pf.split(\" \").length == 1 ? pf.replace(/^x_/, \"x\" + rowindex + \"_\") : pf)) != null ? _this$list$parentFiel : []; // Parent field in the same table, add row index\r\n\r\n      this.limit = settings.limit;\r\n      this.debounce = settings.debounce;\r\n      this.data = settings.data;\r\n      this.recordCount = 0;\r\n      this.action = settings.action || \"autosuggest\";\r\n    }\r\n    /**\r\n     * Is AutoSuggest\r\n     */\r\n\r\n    var _proto = AjaxLookup.prototype;\r\n\r\n    /**\r\n     * Format display value\r\n     * @param {Array} opt Option\r\n     */\r\n    _proto.formatResult = function formatResult(opt) {\r\n      this.form.compileTemplates();\r\n      return this.list.template && !this.isAutoSuggest ? this.list.template.render(opt, ew.jsRenderHelpers) : ew.displayValue(opt, this.element) || opt[0];\r\n    }\r\n    /**\r\n     * Generate request\r\n     */\r\n    ;\r\n\r\n    _proto.generateRequest = function generateRequest() {\r\n      var _data$ajax;\r\n\r\n      var data = Object.assign({}, this.data, {\r\n        name: this.element.name,\r\n        page: this.list.page,\r\n        field: this.list.field,\r\n        language: ew.LANGUAGE_ID\r\n      }, ew.getUserParams(\"#p_\" + this.elementId, this.formElement));\r\n      (_data$ajax = data.ajax) != null ? _data$ajax : data.ajax = this.action;\r\n      if (this.parentFields.length > 0) this.parentFields.forEach((pf, i) => data[\"v\" + (i + 1)] = ew.getOptionValue(pf, this.formElement));\r\n      return data;\r\n    }\r\n    /**\r\n     * Get URL\r\n     */\r\n    ;\r\n\r\n    _proto.getUrl = function getUrl(query, start) {\r\n      let params = new URLSearchParams({\r\n        q: query || \"\",\r\n        n: this.limit,\r\n        rnd: ew.random(),\r\n        start: $__default.default.isNumber(start) ? start : -1\r\n      });\r\n      return ew.getApiUrl(ew.API_LOOKUP_ACTION, params.toString());\r\n    }\r\n    /**\r\n     * Prepare URL and data for sending request\r\n     * @param {string} query Search term\r\n     * @param {Number} start Start page\r\n     */\r\n    ;\r\n\r\n    _proto.prepare = function prepare(query, start) {\r\n      return {\r\n        url: this.getUrl(query, start),\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: this.generateRequest()\r\n      };\r\n    }\r\n    /**\r\n     * Transform options (virtual)\r\n     * @param {Object[]} data Data from server\r\n     */\r\n    ;\r\n\r\n    _proto.transform = function transform(data) {\r\n      let results = [];\r\n\r\n      if ((data == null ? void 0 : data.result) == \"OK\") {\r\n        this.recordCount = data.totalRecordCount;\r\n        results = data.records;\r\n      }\r\n\r\n      return results;\r\n    }\r\n    /**\r\n     * Convert options to Select2 data format\r\n     * @param {Object[]} options Options\r\n     * @returns {Object[]}\r\n     */\r\n    ;\r\n\r\n    _proto.toSelect2Data = function toSelect2Data(options) {\r\n      if (Array.isArray(options)) {\r\n        if (options.every(item => item.hasOwnProperty(\"gf\"))) {\r\n          // Has group by field\r\n          let groups = [...new Set(options.map(item => item.gf))];\r\n          return groups.map(group => {\r\n            return {\r\n              text: group,\r\n              children: options.filter(item => item.gf == group).map(item => {\r\n                return {\r\n                  id: item.lf,\r\n                  text: this.formatResult({\r\n                    lf: item.lf,\r\n                    df: item.df,\r\n                    df2: item.df2,\r\n                    df3: item.df3,\r\n                    df4: item.df4\r\n                  })\r\n                };\r\n              })\r\n            };\r\n          });\r\n        } else {\r\n          return options.map(item => {\r\n            return {\r\n              id: item.lf,\r\n              text: this.formatResult({\r\n                lf: item.lf,\r\n                df: item.df,\r\n                df2: item.df2,\r\n                df3: item.df3,\r\n                df4: item.df4\r\n              })\r\n            };\r\n          });\r\n        }\r\n      }\r\n\r\n      return options;\r\n    };\r\n\r\n    _createClass(AjaxLookup, [{\r\n      key: \"isAutoSuggest\",\r\n      get: function () {\r\n        var _this$_isAutoSuggest;\r\n\r\n        (_this$_isAutoSuggest = this._isAutoSuggest) != null ? _this$_isAutoSuggest : this._isAutoSuggest = ew.isAutoSuggest(this.element);\r\n        return this._isAutoSuggest;\r\n      }\r\n      /**\r\n       * Lookup options\r\n       */\r\n\r\n    }, {\r\n      key: \"options\",\r\n      get: function () {\r\n        return this.list.lookupOptions;\r\n      }\r\n    }]);\r\n\r\n    return AjaxLookup;\r\n  }();\n\n  let AutoSuggest = /*#__PURE__*/function (_AjaxLookup) {\r\n    _inheritsLoose(AutoSuggest, _AjaxLookup);\r\n\r\n    function AutoSuggest(settings) {\r\n      var _this;\r\n\r\n      _this = _AjaxLookup.call(this, settings) || this;\r\n      if (!_this.element) // Element not found\r\n        return _assertThisInitialized(_this);\r\n      _this.input = _this.form.getElement(\"sv_\" + _this.elementId); // User input\r\n\r\n      if (!_this.input || _this.elementId.includes(\"$rowindex$\")) return _assertThisInitialized(_this);\r\n\r\n      let self = _assertThisInitialized(_this),\r\n          $input = $__default.default(_this.input),\r\n          $element = $__default.default(_this.element); // Properties\r\n\r\n      _this.minWidth = settings.minWidth;\r\n      _this.maxHeight = settings.maxHeight;\r\n      _this.highlight = settings.highlight;\r\n      _this.hint = settings.hint;\r\n      _this.minLength = settings.minLength;\r\n      _this.templates = Object.assign({}, settings.templates);\r\n      _this.classNames = Object.assign({}, settings.classNames);\r\n      _this.delay = settings.delay; // For loading more results\r\n\r\n      _this.debounce = settings.debounce;\r\n      _this.display = settings.display || \"text\";\r\n      _this.forceSelection = settings.forceSelect;\r\n      _this.lineHeight = settings.lineHeight;\r\n      _this.paddingY = settings.paddingY;\r\n      _this.lookupAllDisplayFields = settings.lookupAllDisplayFields;\r\n      _this.$input = $input;\r\n      _this.$element = $element; // Save instance\r\n\r\n      $element.data(\"autosuggest\", _assertThisInitialized(_this)); // Save initial option\r\n\r\n      if ($input.val() && $element.val()) _this.element.add($element.val(), $input.val(), true); // Add events\r\n\r\n      $input.on(\"typeahead:select\", (e, d) => {\r\n        self.setValue(d[self.display]);\r\n      }).on(\"change\", () => {\r\n        let ta = $input.data(\"tt-typeahead\");\r\n\r\n        if (ta != null && ta.isOpen() && !ta.menu.empty()) {\r\n          let $item = ta.menu.getActiveSelectable();\r\n\r\n          if ($item) {\r\n            // A suggestion is highlighted\r\n            let i = $item.index(),\r\n                val = self.element.options[i].text;\r\n            $input.typeahead(\"val\", val);\r\n          }\r\n        }\r\n\r\n        self.setValue();\r\n      }).on(\"blur\", () => {\r\n        // \"change\" fires before blur\r\n        let ta = $input.data(\"tt-typeahead\");\r\n        if (ta != null && ta.isOpen()) ta.menu.close();\r\n      }).on(\"focus\", () => {\r\n        $input.attr(\"placeholder\", $input.data(\"placeholder\")).removeClass(\"is-invalid\");\r\n        $element.removeClass(\"is-invalid\");\r\n      }); // Get suggestions\r\n\r\n      let async = !_this.options.length,\r\n          loadingMore = false,\r\n          timer; // Option template (\"suggestion\" template)\r\n\r\n      let tpl = self.list.template || self.templates.suggestion;\r\n      if (tpl && $__default.default.isString(tpl)) tpl = $__default.default.templates(tpl);\r\n      if (tpl) self.templates.suggestion = tpl.render.bind(tpl);\r\n      if (async && !self.templates.footer) self.templates.footer = '<div class=\"tt-footer dropdown-item\"><div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + ew.language.phrase(\"LoadingMore\") + '</span></div></div>'; // \"footer\" template\r\n\r\n      let source = (query, syncResults, asyncResults) => {\r\n        if (async) {\r\n          if (timer) timer.cancel();\r\n          timer = $__default.default.later(_this.debounce, null, () => {\r\n            _this.recordCount = 0; // Reset\r\n\r\n            $__default.default.ajax(_this.prepare(query)).done(data => asyncResults(_this.transform(data)));\r\n          });\r\n        } else {\r\n          let records = _this.getSyncResults(query);\r\n\r\n          syncResults(_this.transform({\r\n            result: \"OK\",\r\n            totalRecordCount: records.length,\r\n            records\r\n          }));\r\n        }\r\n      }; // Create Typeahead\r\n\r\n      $__default.default(function () {\r\n        // Typeahead options and dataset\r\n        let options = {\r\n          highlight: self.highlight,\r\n          minLength: self.minLength,\r\n          hint: self.hint,\r\n          classNames: self.classNames\r\n        };\r\n        let dataset = {\r\n          name: self.form.id + \"-\" + self.elementId,\r\n          source,\r\n          async,\r\n          templates: self.templates,\r\n          display: self.display,\r\n          limit: async ? self.limit : Infinity\r\n        };\r\n        let args = [options, dataset]; // Trigger \"typeahead\" event\r\n\r\n        $element.trigger(\"typeahead\", [args]); // Create Typeahead\r\n\r\n        self.typeahead = $input.typeahead.apply($input, args).off(\"blur.tt\").data(\"tt-typeahead\");\r\n\r\n        let menu = self.typeahead.menu,\r\n            $menu = menu.$node,\r\n            $dataset = $menu.find(\".tt-dataset\"),\r\n            suggestionHeight = () => $menu.find(\".tt-suggestion\").outerHeight(false);\r\n\r\n        if (self.minWidth) $menu.css(\"min-width\", self.minWidth);\r\n        $input.on(\"typeahead:rendered\", (e, suggestions) => {\r\n          let rendered = suggestions.length,\r\n              count = self.count;\r\n\r\n          if (count >= self.limit) {\r\n            let h = suggestionHeight();\r\n            if (h) $dataset.css(\"max-height\", h * self.limit);\r\n          }\r\n\r\n          if (rendered > 0) $dataset.scrollTop(suggestionHeight() * (count - rendered)); // Scroll to the first suggestion\r\n\r\n          if (async) $menu.find(\".tt-footer\").toggle(self.recordCount > count);\r\n        });\r\n\r\n        if (async) {\r\n          let loadingMoreTimer;\r\n          $dataset.on(\"scroll\", () => {\r\n            var _loadingMoreTimer;\r\n\r\n            (_loadingMoreTimer = loadingMoreTimer) == null ? void 0 : _loadingMoreTimer.cancel();\r\n            loadingMoreTimer = $__default.default.later(self.delay, null, () => {\r\n              let $footer = $menu.find(\".tt-footer\");\r\n\r\n              if (!$footer.is(\":hidden\") && !loadingMore) {\r\n                let currentOffset = $dataset.offset().top + $dataset.outerHeight(false),\r\n                    loadingMoreOffset = $footer.offset().top + $footer.outerHeight(false);\r\n\r\n                if (currentOffset + 20 > loadingMoreOffset) {\r\n                  // $footer shows more than 20px\r\n                  loadingMore = true;\r\n                  self.getMore().always(() => loadingMore = false);\r\n                } else {\r\n                  var _loadingMoreTimer2;\r\n\r\n                  (_loadingMoreTimer2 = loadingMoreTimer) == null ? void 0 : _loadingMoreTimer2.cancel();\r\n                }\r\n              }\r\n            });\r\n          });\r\n        }\r\n      });\r\n      return _this;\r\n    } // Set the selected item to the actual field\r\n\r\n    var _proto = AutoSuggest.prototype;\r\n\r\n    _proto.setValue = function setValue(v) {\r\n      v || (v = this.$input.val());\r\n      let index = this.element.options.findIndex(option => option.text == v);\r\n\r\n      if (index < 0) {\r\n        // Not found in results\r\n        if (this.forceSelection && v) {\r\n          // Force selection and query not empty => error\r\n          this.$input.typeahead(\"val\", \"\").addClass(\"is-invalid\");\r\n          this.$element.next(\".invalid-feedback\").html(ew.language.phrase(\"ValueNotExist\"));\r\n          this.$element.addClass(\"is-invalid\").val(\"\").trigger(\"change\");\r\n          return;\r\n        }\r\n      } else {\r\n        // Found in results\r\n        this.element.options[index].selected = true;\r\n        if (!/s(ea)?rch$/.test(this.formElement.id) || this.forceSelection) // Force selection or not search form\r\n          v = this.element.options[index].value; // Replace the display value by Link Field value\r\n      }\r\n\r\n      if (v !== this.$element.attr(\"value\")) this.$element.attr(\"value\", v).trigger(\"change\"); // Set value to the actual field\r\n    } // Transform suggestion\r\n    ;\r\n\r\n    _proto.transform = function transform(data) {\r\n      let results = _AjaxLookup.prototype.transform.call(this, data).map(item => Object.assign({}, item, {\r\n        text: _AjaxLookup.prototype.formatResult.call(this, item)\r\n      }));\r\n\r\n      this.element.options = results.map(item => new ew.SelectionListOption(item.text, item.lf || item[0]));\r\n      return results;\r\n    } // Get current suggestion count\r\n    ;\r\n\r\n    // Get suggestions from lookup cache\r\n    _proto.getSyncResults = function getSyncResults(query) {\r\n      if (this.options.length) {\r\n        let results = this.options.filter(item => {\r\n          if (this.lookupAllDisplayFields) {\r\n            let v = [item.df, item.df2, item.df3, item.df4].map(df => String(df).toLowerCase()).join(\" \");\r\n            return query.toLowerCase().split(\" \").filter(q => q !== \"\").every(q => v.includes(q));\r\n          } else {\r\n            return String(item.df).toLowerCase().startsWith(query);\r\n          }\r\n        });\r\n        this.recordCount = results.length;\r\n        return results;\r\n      }\r\n\r\n      return [];\r\n    } // Get more suggestions by Ajax\r\n    ;\r\n\r\n    _proto.getMore = function getMore() {\r\n      let menu = this.typeahead.menu,\r\n          start = this.count,\r\n          settings = this.prepare(menu.query, start);\r\n      return $__default.default.ajax(settings).done(data => menu.datasets[0]._append(menu.query, this.transform(data)));\r\n    };\r\n\r\n    _createClass(AutoSuggest, [{\r\n      key: \"count\",\r\n      get: function () {\r\n        return this.typeahead.menu.$node.find(\".tt-suggestion.tt-selectable\").length || 0;\r\n      }\r\n    }]);\r\n\r\n    return AutoSuggest;\r\n  }(AjaxLookup);\n\n  /**\r\n   * Class Forms\r\n   */\r\n\r\n  let Forms = /*#__PURE__*/function () {\r\n    function Forms() {\r\n      _defineProperty(this, \"_forms\", {});\r\n    }\r\n\r\n    var _proto = Forms.prototype;\r\n\r\n    /**\r\n     * Get form by element or id\r\n     * @param {HTMLElement|string} el Element or id\r\n     */\r\n    _proto.get = function get(el) {\r\n      var _ew$getForm;\r\n\r\n      if (!el) return null;\r\n      let id = $__default.default.isString(el) ? el : (_ew$getForm = ew.getForm(el)) == null ? void 0 : _ew$getForm.id;\r\n      return this._forms[id];\r\n    }\r\n    /**\r\n     * Add form\r\n     * @param {Form} f Form\r\n     */\r\n    ;\r\n\r\n    _proto.add = function add(f) {\r\n      if (this._forms[f.id] && this._forms[f.id] !== f) delete this._forms[f.id];\r\n      this._forms[f.id] = f;\r\n    }\r\n    /**\r\n     * Get all ids\r\n     * @returns {string[]}\r\n     */\r\n    ;\r\n\r\n    _proto.ids = function ids() {\r\n      return Object.keys(this._forms);\r\n    };\r\n\r\n    return Forms;\r\n  }();\n\n  let lang = ew.language.phrase(\"select2\");\r\n  var Select2Language = {\r\n    errorLoading: function () {\r\n      return lang.errorLoading;\r\n    },\r\n    inputTooLong: function (args) {\r\n      var overChars = args.input.length - args.maximum;\r\n      return lang.inputTooLong.replace(\"%s\", overChars);\r\n    },\r\n    inputTooShort: function (args) {\r\n      var remainingChars = args.minimum - args.input.length;\r\n      return lang.inputTooShort.replace(\"%s\", remainingChars);\r\n    },\r\n    loadingMore: function () {\r\n      return '<div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + lang.loadingMore + '</span></div>';\r\n    },\r\n    maximumSelected: function (args) {\r\n      return lang.maximumSelected.replace(\"%s\", args.maximum);\r\n    },\r\n    noResults: function () {\r\n      return lang.noResults;\r\n    },\r\n    searching: function () {\r\n      return '<div class=\"spinner-border spinner-border-sm text-primary\" role=\"status\"><span class=\"visually-hidden\">' + lang.searching + '</span></div>';\r\n    },\r\n    removeAllItems: function () {\r\n      return lang.removeAllItems;\r\n    },\r\n    removeItem: function () {\r\n      return lang.removeItem;\r\n    },\r\n    search: function () {\r\n      return lang.search;\r\n    }\r\n  };\n\n  let _defined$3 = $__default.default.fn.select2.amd.require._defined,\r\n      Utils$3 = _defined$3['select2/utils'];\r\n  /**\r\n   * Select2 decorator for Results\r\n   */\r\n\r\n  let Select2ResultsDecorator = /*#__PURE__*/function () {\r\n    function Select2ResultsDecorator() {}\r\n\r\n    var _proto = Select2ResultsDecorator.prototype;\r\n\r\n    _proto.render = function render(decorated) {\r\n      var $results = $__default.default('<div class=\"select2-results__options ' + this.options.get('containerClass') + '\" role=\"listbox\"></div>'); //***\r\n\r\n      if (this.options.get('multiple')) {\r\n        $results.attr('aria-multiselectable', 'true');\r\n      }\r\n\r\n      this.$results = $results;\r\n      return $results;\r\n    };\r\n\r\n    _proto.displayMessage = function displayMessage(decorated, params) {\r\n      var escapeMarkup = this.options.get('escapeMarkup');\r\n      this.clear();\r\n      this.hideLoading();\r\n      var $message = $__default.default('<div role=\"alert\" aria-live=\"assertive\"' + ' class=\"select2-results__option\"></div>'); //***\r\n\r\n      if (params.message.includes(\"<\") && params.message.includes(\">\")) {\r\n        // HTML //***\r\n        $message.append(params.message);\r\n      } else {\r\n        var message = this.options.get('translations').get(params.message);\r\n        $message.append(escapeMarkup(message(params.args)));\r\n      }\r\n\r\n      $message[0].className += ' select2-results__message';\r\n      this.$results.append($message);\r\n    };\r\n\r\n    _proto.append = function append(decorated, data) {\r\n      this.hideLoading();\r\n\r\n      if (data.results == null || data.results.length === 0) {\r\n        if (this.$results.children().length === 0) {\r\n          if (this.$element.data(\"updating\") && data.pagination.more) {\r\n            this.trigger('results:message', {\r\n              message: '<div class=\"spinner-border spinner-border-sm text-primary ew-select-spinner\" role=\"status\"><span class=\"visually-hidden\">' + ew.language.phrase('Loading') + '</span></div> ' + ew.language.phrase('Loading')\r\n            });\r\n            this.$element.one(\"updated\", () => this.$element.select2(\"close\").select2(\"open\"));\r\n          } else {\r\n            this.trigger('results:message', {\r\n              message: 'noResults'\r\n            });\r\n          }\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      data.results = this.sort(data.results); //***\r\n\r\n      var cols = this.options.get('columns'),\r\n          len = data.results.length,\r\n          $row = this.$results.find(\".\" + this.options.get('rowClass')).last();\r\n\r\n      for (var d = 0; d < data.results.length; d++) {\r\n        var item = data.results[d];\r\n        var $option = this.option(item);\r\n\r\n        if (!$row.length || $row.children().length == cols) {\r\n          // Add new row\r\n          $row = $__default.default('<div class=\"' + this.options.get('rowClass') + '\"></div>');\r\n          this.$results.append($row);\r\n        }\r\n\r\n        $row.append($option);\r\n\r\n        if (d == len - 1) {\r\n          // Last\r\n          var cnt = cols - $row.children().length;\r\n\r\n          for (var i = 0; i < cnt; i++) $row.append('<div class=\"' + this.options.get('cellClass') + '\"></div>');\r\n        }\r\n      }\r\n    };\r\n\r\n    _proto.option = function option(decorated, data) {\r\n      // var option = document.createElement('li');\r\n      var option = document.createElement('div'); //***\r\n\r\n      option.classList.add('select2-results__option');\r\n      option.classList.add('select2-results__option--selectable');\r\n      this.options.get('cellClass').split(\" \").forEach(c => option.classList.add(c)); //***\r\n\r\n      var attrs = {\r\n        'role': 'option',\r\n        'aria-selected': 'false'\r\n      };\r\n      var matches = window.Element.prototype.matches || window.Element.prototype.msMatchesSelector || window.Element.prototype.webkitMatchesSelector;\r\n\r\n      if (data.element != null && matches.call(data.element, ':disabled') || data.element == null && data.disabled) {\r\n        attrs['aria-disabled'] = 'true';\r\n        option.classList.remove('select2-results__option--selectable');\r\n        option.classList.add('select2-results__option--disabled');\r\n      }\r\n\r\n      if (data.id == null) {\r\n        option.classList.remove('select2-results__option--selectable');\r\n      }\r\n\r\n      if (data._resultId != null) {\r\n        option.id = data._resultId;\r\n      }\r\n\r\n      if (data.title) {\r\n        option.title = data.title;\r\n      } // if (data.children) { //***\r\n      //   attrs.role = 'group';\r\n      //   attrs['aria-label'] = data.text;\r\n      //   option.classList.remove('select2-results__option--selectable');\r\n      //   option.classList.add('select2-results__option--group');\r\n      // }\r\n\r\n      for (var attr in attrs) {\r\n        var val = attrs[attr];\r\n        option.setAttribute(attr, val);\r\n      } // if (data.children) { //***\r\n      //   var $option = $(option);\r\n      //   var label = document.createElement('strong');\r\n      //   label.className = 'select2-results__group';\r\n      //   this.template(data, label);\r\n      //   var $children = [];\r\n      //   for (var c = 0; c < data.children.length; c++) {\r\n      //     var child = data.children[c];\r\n      //     var $child = this.option(child);\r\n      //     $children.push($child);\r\n      //   }\r\n      //   var $childrenContainer = $('<ul></ul>', {\r\n      //     'class': 'select2-results__options select2-results__options--nested',\r\n      //     'role': 'none'\r\n      //   });\r\n      //   $childrenContainer.append($children);\r\n      //   $option.append(label);\r\n      //   $option.append($childrenContainer);\r\n      // } else {\r\n\r\n      this.template(data, option); // }\r\n\r\n      Utils$3.StoreData(option, 'data', data);\r\n      return option;\r\n    };\r\n\r\n    return Select2ResultsDecorator;\r\n  }();\n\n  let _defined$2 = $__default.default.fn.select2.amd.require._defined,\r\n      Utils$2 = _defined$2['select2/utils'];\r\n  /**\r\n   * Results for modal lookup\r\n   */\r\n\r\n  let ModalResults = /*#__PURE__*/function () {\r\n    function ModalResults() {}\r\n\r\n    var _proto = ModalResults.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var _container$listeners$;\r\n\r\n      var self = this;\r\n      decorated.call(this, container, $container); // Remove handlers\r\n\r\n      (_container$listeners$ = container.listeners['results:select']) == null ? void 0 : _container$listeners$.pop();\r\n      this.$results.off('mouseup');\r\n      container.on('results:select', function (evt) {\r\n        var $highlighted = self.getHighlightedResults();\r\n\r\n        if ($highlighted.length === 0) {\r\n          return;\r\n        }\r\n\r\n        var data = Utils$2.GetData($highlighted[0], 'data');\r\n\r\n        if ($highlighted.hasClass('select2-results__option--selected')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        } else {\r\n          self.trigger('select', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        }\r\n      });\r\n      this.$results.on('mousedown', '.select2-results__option--selectable', function (evt) {\r\n        this._mousedown = true;\r\n      });\r\n      this.$results.on('mouseup', '.select2-results__option--selectable', function (evt) {\r\n        if (!this._mousedown) return;\r\n        var $this = $__default.default(this);\r\n        var data = Utils$2.GetData(this, 'data');\r\n\r\n        if ($this.hasClass('select2-results__option--selected')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n          return;\r\n        }\r\n\r\n        self.trigger('select', {\r\n          originalEvent: evt,\r\n          data: data\r\n        });\r\n      });\r\n    };\r\n\r\n    return ModalResults;\r\n  }();\n\n  /**\r\n   * Search box for modal lookup\r\n   */\r\n  let ModalSearch = /*#__PURE__*/function () {\r\n    function ModalSearch() {}\r\n\r\n    var _proto = ModalSearch.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var _container$listeners$;\r\n\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      (_container$listeners$ = container.listeners['close']) == null ? void 0 : _container$listeners$.pop(); // Remove handler from Search\r\n\r\n      container.on('close', function () {\r\n        self.$search.attr('tabindex', -1).removeAttr('aria-controls').removeAttr('aria-activedescendant');\r\n      });\r\n    };\r\n\r\n    return ModalSearch;\r\n  }();\n\n  /**\r\n   * Dropdown search decorator\r\n   */\r\n  let KEYS = $.fn.select2.amd.require._defined['select2/keys'];\r\n  KEYS.PRINT_SCREEN = 44;\r\n\r\n  let DropdownSearchDecorator = /*#__PURE__*/function () {\r\n    function DropdownSearchDecorator() {}\r\n\r\n    var _proto = DropdownSearchDecorator.prototype;\r\n\r\n    _proto.handleSearch = function handleSearch(decorated, evt) {\r\n      var key = evt.which; // Ignore events from modifier keys\r\n\r\n      if ([KEYS.TAB, KEYS.SHIFT, KEYS.CTRL, KEYS.ALT, KEYS.PRINT_SCREEN].includes(key)) {\r\n        return;\r\n      }\r\n\r\n      if (!this._keyUpPrevented) {\r\n        var input = this.$search.val();\r\n        this.trigger('query', {\r\n          term: input\r\n        });\r\n      }\r\n\r\n      this._keyUpPrevented = false;\r\n    };\r\n\r\n    return DropdownSearchDecorator;\r\n  }();\n\n  let AttachBody$2 = $__default.default.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n  /**\r\n   * Select2 AttachBody with popper\r\n   */\r\n\r\n  let Select2AttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(Select2AttachBody, _AttachBody);\r\n\r\n    // Constructor\r\n    function Select2AttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    } // Override _attachPositioningHandler\r\n\r\n    var _proto = Select2AttachBody.prototype;\r\n\r\n    _proto._attachPositioningHandler = function _attachPositioningHandler(decorated, container) {\r\n      var self = this;\r\n      var events = ['scroll.select2.' + container.id, 'resize.select2.' + container.id, 'orientationchange.select2.' + container.id];\r\n\r\n      var handler = () => {\r\n        self._positionDropdown();\r\n\r\n        self._resizeDropdown();\r\n      };\r\n\r\n      $__default.default(window).on(events.join(' '), handler);\r\n      container.$element.closest('.modal').on('scroll.select2.' + container.id, handler);\r\n    };\r\n\r\n    // Override _detachPositioningHandler\r\n    _proto._detachPositioningHandler = function _detachPositioningHandler(decorated, container) {\r\n      var events = ['scroll.select2.' + container.id, 'resize.select2.' + container.id, 'orientationchange.select2.' + container.id];\r\n      $__default.default(window).off(events.join(' '));\r\n      container.$element.closest('.modal').off('scroll.select2.' + container.id);\r\n    };\r\n\r\n    // Override _showDropdown\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$_popper;\r\n\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n      (_this$_popper = this._popper) != null ? _this$_popper : this._popper = Popper.createPopper(this.$container[0], this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n\r\n      this._positionDropdown();\r\n\r\n      this._resizeDropdown();\r\n    };\r\n\r\n    // Override _positionDropdown()\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper2;\r\n\r\n      (_this$_popper2 = this._popper) == null ? void 0 : _this$_popper2.update();\r\n    } // Override destroy()\r\n    ;\r\n\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n\r\n      (_this$_popper3 = this._popper) == null ? void 0 : _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n\r\n    return Select2AttachBody;\r\n  }(AttachBody$2);\n\n  /**\r\n   * Select2 AttachBody decorator for modal lookup\r\n   */\r\n\r\n  let ModalAttachBody = /*#__PURE__*/function () {\r\n    function ModalAttachBody(decorated, $element, options) {\r\n      _defineProperty(this, \"$modal\", null);\r\n\r\n      options.set('dropdownParent', $__default.default(document.body));\r\n      decorated.call(this, $element, options);\r\n    }\r\n\r\n    var _proto = ModalAttachBody.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      let self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown(); // Must bind after the results handlers to ensure correct sizing\r\n\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    };\r\n\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown.removeClass('select2');\r\n      this.$container = $container;\r\n    };\r\n\r\n    _proto.render = function render(decorated) {\r\n      let $container = $__default.default('<span></span>');\r\n      let $dropdown = decorated.call(this);\r\n      $container.append($dropdown);\r\n      this.$dropdownContainer = $container;\r\n      return $container;\r\n    };\r\n\r\n    _proto._bindContainerResultHandlers = function _bindContainerResultHandlers(decorated, container) {\r\n      // These should only be bound once\r\n      if (this._containerResultsHandlersBound) {\r\n        return;\r\n      }\r\n\r\n      let self = this;\r\n      container.$modal = this.$modal;\r\n      container.on('results:all', function () {\r\n        var _self$$search$;\r\n\r\n        self._updateDropdown();\r\n\r\n        (_self$$search$ = self.$search[0]) == null ? void 0 : _self$$search$.focus();\r\n      });\r\n      container.on('results:append', function () {\r\n        self._updateDropdown();\r\n      });\r\n      container.on('results:message', function () {\r\n        self._updateDropdown();\r\n      });\r\n      container.on('select', function (e) {\r\n        var _e$originalEvent;\r\n\r\n        let target = (_e$originalEvent = e.originalEvent) == null ? void 0 : _e$originalEvent.currentTarget;\r\n        target == null ? void 0 : target.classList.add('select2-results__option--selected');\r\n\r\n        self._updateDropdown();\r\n      });\r\n      container.on('unselect', function (e) {\r\n        var _e$originalEvent2;\r\n\r\n        let target = (_e$originalEvent2 = e.originalEvent) == null ? void 0 : _e$originalEvent2.currentTarget;\r\n        target == null ? void 0 : target.classList.remove('select2-results__option--selected');\r\n\r\n        self._updateDropdown();\r\n      });\r\n      this._containerResultsHandlersBound = true;\r\n    };\r\n\r\n    _proto._updateDropdown = function _updateDropdown() {\r\n      if (!this.$modal.find(this.$dropdownContainer)[0]) this.$modal.find('.modal-body').children().detach().end().append(this.$dropdownContainer);\r\n    };\r\n\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$$modal;\r\n\r\n      let self = this,\r\n          oldValue = this.$element.val();\r\n      this.$dropdownContainer.appendTo(this.options.get('dropdownParent'));\r\n      (_this$$modal = this.$modal) != null ? _this$$modal : this.$modal = $__default.default('#ew-modal-lookup-dialog');\r\n\r\n      this._updateDropdown();\r\n\r\n      this.$modal.find('.modal-title').empty().append(ew.language.phrase('LookupTitle').replace('%s', this.$element.data('caption')));\r\n      this.$modal.find('.modal-footer button[data-value]').off().on('click', function () {\r\n        if (!$__default.default(this).data('value')) // Cancel\r\n          self.$element.val(oldValue).trigger('change');\r\n      });\r\n      this.$modal.modal('show').on('hidden.bs.modal', function (event) {\r\n        self.$container.removeClass('select2-container--open');\r\n      }).draggable(this.options.get('draggableOptions'));\r\n    };\r\n\r\n    return ModalAttachBody;\r\n  }();\n\n  let AttachBody$1 = $__default.default.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n  /**\r\n   * Select2 AttachBody for table header filter\r\n   */\r\n\r\n  let FilterAttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(FilterAttachBody, _AttachBody);\r\n\r\n    // Constructor\r\n    function FilterAttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    } // Override bind()\r\n\r\n    var _proto = FilterAttachBody.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown(); // Must bind after the results handlers to ensure correct sizing\r\n\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      container.on('close', function () {\r\n        self._hideDropdown();\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    } // Override _positionDropdown()\r\n    ;\r\n\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper;\r\n\r\n      (_this$_popper = this._popper) == null ? void 0 : _this$_popper.update();\r\n    } // Override _resizeDropdown()\r\n    ;\r\n\r\n    _proto._resizeDropdown = function _resizeDropdown() {\r\n      var css = {\r\n        width: this.$container.outerWidth(false) + 'px'\r\n      };\r\n\r\n      if (this.options.get('dropdownAutoWidth')) {\r\n        css.minWidth = css.width;\r\n        css.position = 'relative';\r\n        css.width = 'auto';\r\n      }\r\n\r\n      this.$dropdown.css(css);\r\n    } // Override _showDropdown()\r\n    ;\r\n\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _dropdownButton$close, _this$_popper2;\r\n\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent); // Footer\r\n\r\n      let self = this,\r\n          oldValue = this.$element.val(),\r\n          $footer = $__default.default('#ew-filter-dropdown-footer').contents().clone();\r\n      $footer.find('.ew-filter-btn[data-value]').off('click.ew').on('click.ew', function (e) {\r\n        let value = $__default.default(this).data('value');\r\n\r\n        if (value) {\r\n          // OK\r\n          $__default.default(self.$element[0].form).triggerHandler('submit');\r\n        } else {\r\n          // Cancel\r\n          self.$element.val(oldValue).trigger('change');\r\n        }\r\n\r\n        self.$element.select2('close');\r\n      });\r\n      $footer.find('.ew-filter-clear').off('click.ew').on('click.ew', e => self.$element.data('select2').selection._handleClear(e));\r\n      let $filterDropdown = this.$dropdownContainer.find('.ew-filter-dropdown');\r\n      if (!$filterDropdown.find('.ew-filter-btn')[0]) $filterDropdown.append($footer); // Popper\r\n\r\n      var dropdownButton = document.querySelector('.ew-filter-dropdown-btn[data-table=' + this.$element.data('table') + '][data-field=' + this.$element.data('field') + ']'),\r\n          reference = (_dropdownButton$close = dropdownButton.closest(\".ew-table-header-cell\")) != null ? _dropdownButton$close : dropdownButton.closest(\".ew-table-header-btn\");\r\n      (_this$_popper2 = this._popper) != null ? _this$_popper2 : this._popper = Popper.createPopper(reference, this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n\r\n      this._positionDropdown();\r\n\r\n      this._resizeDropdown();\r\n    } // Override position()\r\n    ;\r\n\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown[0].classList.remove('select2');\r\n      $dropdown[0].classList.add('select2-container--open');\r\n      this.$container = $container;\r\n    };\r\n\r\n    // Override destroy()\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n\r\n      (_this$_popper3 = this._popper) == null ? void 0 : _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n\r\n    return FilterAttachBody;\r\n  }(AttachBody$1);\n\n  let AttachBody = $__default.default.fn.select2.amd.require._defined['select2/dropdown/attachBody'];\r\n  /**\r\n   * Select2 AttachBody for dropdown\r\n   */\r\n\r\n  let DropdownAttachBody = /*#__PURE__*/function (_AttachBody) {\r\n    _inheritsLoose(DropdownAttachBody, _AttachBody);\r\n\r\n    // Constructor\r\n    function DropdownAttachBody(decorated, $element, options) {\r\n      return _AttachBody.call(this, decorated, $element, options) || this;\r\n    } // Override bind()\r\n\r\n    var _proto = DropdownAttachBody.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      var self = this;\r\n      decorated.call(this, container, $container);\r\n      container.on('open', function () {\r\n        self._showDropdown(); // Must bind after the results handlers to ensure correct sizing\r\n\r\n        self._bindContainerResultHandlers(container);\r\n      });\r\n      container.on('close', function () {\r\n        self._hideDropdown();\r\n      });\r\n      this.$dropdownContainer.on('mousedown', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    } // Override _showDropdown()\r\n    ;\r\n\r\n    _proto._showDropdown = function _showDropdown(decorated) {\r\n      var _this$_popper;\r\n\r\n      this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n      (_this$_popper = this._popper) != null ? _this$_popper : this._popper = Popper.createPopper(this.$element.parent().find('.select2-container')[0], this.$dropdownContainer[0], {\r\n        placement: ew.IS_RTL ? 'bottom-end' : 'bottom-start',\r\n        modifiers: [{\r\n          name: 'flip',\r\n          enabled: true\r\n        }, {\r\n          name: 'preventOverflow',\r\n          enabled: true\r\n        }]\r\n      });\r\n\r\n      this._positionDropdown();\r\n\r\n      this._resizeDropdown();\r\n    } // Override _positionDropdown()\r\n    ;\r\n\r\n    _proto._positionDropdown = function _positionDropdown() {\r\n      var _this$_popper2;\r\n\r\n      (_this$_popper2 = this._popper) == null ? void 0 : _this$_popper2.update();\r\n    } // Override position()\r\n    ;\r\n\r\n    _proto.position = function position(decorated, $dropdown, $container) {\r\n      // Clone all of the container classes\r\n      $dropdown.attr('class', $container.attr('class'));\r\n      $dropdown[0].classList.remove('select2');\r\n      $dropdown[0].classList.add('select2-container--open');\r\n      this.$container = $container;\r\n    };\r\n\r\n    // Override destroy()\r\n    _proto.destroy = function destroy(decorated) {\r\n      var _this$_popper3;\r\n\r\n      _AttachBody.prototype.destroy.call(this, decorated);\r\n\r\n      (_this$_popper3 = this._popper) == null ? void 0 : _this$_popper3.destroy();\r\n      this._popper = null;\r\n    };\r\n\r\n    return DropdownAttachBody;\r\n  }(AttachBody);\n\n  let _defined$1 = $__default.default.fn.select2.amd.require._defined,\r\n      AllowClear$1 = _defined$1['select2/selection/allowClear'],\r\n      Utils$1 = _defined$1['select2/utils'];\r\n  /**\r\n   * Select2 AttachBody for table header filter\r\n   */\r\n\r\n  let FilterAllowClear = /*#__PURE__*/function (_AllowClear) {\r\n    _inheritsLoose(FilterAllowClear, _AllowClear);\r\n\r\n    function FilterAllowClear() {\r\n      return _AllowClear.apply(this, arguments) || this;\r\n    }\r\n\r\n    var _proto = FilterAllowClear.prototype;\r\n\r\n    // Override _handleClear\r\n    _proto._handleClear = function _handleClear(_, evt) {\r\n      // Ignore the event if it is disabled\r\n      if (this.isDisabled()) {\r\n        return;\r\n      }\r\n\r\n      var $clear = this.$selection.find('.select2-selection__clear'); // Ignore the event if nothing has been selected\r\n\r\n      if ($clear.length === 0) {\r\n        return;\r\n      }\r\n\r\n      evt.stopPropagation();\r\n      var data = Utils$1.GetData($clear[0], 'data');\r\n      var previousVal = this.$element.val();\r\n      this.$element.val(this.placeholder.id);\r\n      var unselectData = {\r\n        data: data\r\n      };\r\n      this.trigger('clear', unselectData);\r\n\r\n      if (unselectData.prevented) {\r\n        this.$element.val(previousVal);\r\n        return;\r\n      }\r\n\r\n      for (var d = 0; d < data.length; d++) {\r\n        unselectData = {\r\n          data: data[d]\r\n        }; // Trigger the `unselect` event, so people can prevent it from being\r\n        // cleared.\r\n\r\n        this.trigger('unselect', unselectData); // If the event was prevented, don't clear it out.\r\n\r\n        if (unselectData.prevented) {\r\n          this.$element.val(previousVal);\r\n          return;\r\n        }\r\n      }\r\n\r\n      this.$element.trigger('input').trigger('change');\r\n    };\r\n\r\n    return FilterAllowClear;\r\n  }(AllowClear$1);\n\n  /**\r\n   * Select2 decorator for MultipleSelection\r\n   */\r\n  let Select2MultipleSelectionDecorator = /*#__PURE__*/function () {\r\n    function Select2MultipleSelectionDecorator() {}\r\n\r\n    var _proto = Select2MultipleSelectionDecorator.prototype;\r\n\r\n    _proto.bind = function bind(decorated, container, $container) {\r\n      decorated.call(this, container, $container);\r\n      this.$selection.on('click', '.select2-selection__choice__remove', function (evt) {\r\n        evt.stopPropagation();\r\n      });\r\n    };\r\n\r\n    return Select2MultipleSelectionDecorator;\r\n  }();\n\n  /**\r\n   * Select2 decorator for SelectAdapter\r\n   */\r\n  let Select2DataAdapterDecorator = /*#__PURE__*/function () {\r\n    function Select2DataAdapterDecorator() {}\r\n\r\n    var _proto = Select2DataAdapterDecorator.prototype;\r\n\r\n    _proto.option = function option(decorated, data) {\r\n      var _data$element;\r\n\r\n      var text = data.text,\r\n          html = (_data$element = data.element) == null ? void 0 : _data$element.innerHTML,\r\n          $option = decorated.call(this, data); // Check HTML\r\n\r\n      if (text.startsWith('<') && text.endsWith('>')) $option.html(text);else if (html && html != text) $option.html(html);\r\n      return $option;\r\n    };\r\n\r\n    return Select2DataAdapterDecorator;\r\n  }();\n\n  let _defined = $.fn.select2.amd.require._defined,\r\n      ResultsList = _defined['select2/results'],\r\n      SingleSelection = _defined['select2/selection/single'],\r\n      MultipleSelection = _defined['select2/selection/multiple'],\r\n      Placeholder = _defined['select2/selection/placeholder'],\r\n      AllowClear = _defined['select2/selection/allowClear'],\r\n      SelectionSearch = _defined['select2/selection/search'],\r\n      EventRelay = _defined['select2/selection/eventRelay'],\r\n      Utils = _defined['select2/utils'],\r\n      Translation = _defined['select2/translation'],\r\n      SelectData = _defined['select2/data/select'],\r\n      ArrayData = _defined['select2/data/array'],\r\n      AjaxData = _defined['select2/data/ajax'],\r\n      Tags = _defined['select2/data/tags'],\r\n      Tokenizer = _defined['select2/data/tokenizer'],\r\n      MinimumInputLength = _defined['select2/data/minimumInputLength'],\r\n      MaximumInputLength = _defined['select2/data/maximumInputLength'],\r\n      MaximumSelectionLength = _defined['select2/data/maximumSelectionLength'],\r\n      Dropdown = _defined['select2/dropdown'],\r\n      DropdownSearch = _defined['select2/dropdown/search'],\r\n      HidePlaceholder = _defined['select2/dropdown/hidePlaceholder'],\r\n      InfiniteScroll = _defined['select2/dropdown/infiniteScroll'],\r\n      // AttachBody = _defined['select2/dropdown/attachBody'],\r\n  MinimumResultsForSearch = _defined['select2/dropdown/minimumResultsForSearch'],\r\n      SelectOnClose = _defined['select2/dropdown/selectOnClose'],\r\n      CloseOnSelect = _defined['select2/dropdown/closeOnSelect'],\r\n      DropdownCSS = _defined['select2/dropdown/dropdownCss'],\r\n      TagsSearchHighlight = _defined['select2/dropdown/tagsSearchHighlight'],\r\n      Defaults = _defined['select2/defaults']; // Override select2 Defaults\r\n\r\n  Defaults.apply = function (options) {\r\n    options = $.extend(true, {}, this.defaults, options);\r\n\r\n    if (options.dataAdapter == null) {\r\n      if (options.ajax != null) {\r\n        options.dataAdapter = AjaxData;\r\n      } else if (options.data != null) {\r\n        options.dataAdapter = ArrayData;\r\n      } else {\r\n        options.dataAdapter = SelectData;\r\n      }\r\n\r\n      options.dataAdapter = Utils.Decorate( // Override\r\n      options.dataAdapter, Select2DataAdapterDecorator);\r\n\r\n      if (options.minimumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MinimumInputLength);\r\n      }\r\n\r\n      if (options.maximumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MaximumInputLength);\r\n      }\r\n\r\n      if (options.maximumSelectionLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, MaximumSelectionLength);\r\n      }\r\n\r\n      if (options.tags) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tags);\r\n      }\r\n\r\n      if (options.tokenSeparators != null || options.tokenizer != null) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tokenizer);\r\n      }\r\n    }\r\n\r\n    if (options.resultsAdapter == null) {\r\n      options.resultsAdapter = ResultsList; // Override\r\n\r\n      if (options.columns > 0 && options.customOption) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, Select2ResultsDecorator);\r\n\r\n        if (options.iconClass && options.multiple && options.templateResult == ew.selectOptions.templateResult) {\r\n          options._templateResult = options.templateResult;\r\n\r\n          options.templateResult = result => result.loading ? result.text : '<div class=\"form-check-input ew-dropdown-check-input\"></div><label class=\"' + options.iconClass + ' ew-dropdown-check-label\">' + options._templateResult(result) + '</label>';\r\n        }\r\n      } else if (options.modal || options.filter) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, ModalResults);\r\n      }\r\n\r\n      if (options.ajax != null) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, InfiniteScroll);\r\n      }\r\n\r\n      if (options.placeholder != null) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, HidePlaceholder);\r\n      }\r\n\r\n      if (options.selectOnClose) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, SelectOnClose);\r\n      }\r\n\r\n      if (options.tags) {\r\n        options.resultsAdapter = Utils.Decorate(options.resultsAdapter, TagsSearchHighlight);\r\n      }\r\n    }\r\n\r\n    if (options.dropdownAdapter == null) {\r\n      if (options.modal || options.filter) {\r\n        options.dropdownAdapter = Utils.Decorate(Dropdown, DropdownSearch);\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearchDecorator);\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, ModalSearch);\r\n      } else {\r\n        options.dropdownAdapter = Dropdown;\r\n\r\n        if (!options.multiple) {\r\n          options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearch);\r\n          options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownSearchDecorator);\r\n        }\r\n      }\r\n\r\n      if (options.minimumResultsForSearch !== 0) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, MinimumResultsForSearch);\r\n      }\r\n\r\n      if (options.closeOnSelect) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, CloseOnSelect);\r\n      }\r\n\r\n      if (options.dropdownCssClass != null) {\r\n        options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, DropdownCSS);\r\n      }\r\n\r\n      options.dropdownAdapter = Utils.Decorate(options.dropdownAdapter, options.modal ? ModalAttachBody : options.filter ? FilterAttachBody : options.dropdown ? DropdownAttachBody : Select2AttachBody // Override\r\n      );\r\n    }\r\n\r\n    if (options.selectionAdapter == null) {\r\n      if (options.multiple) {\r\n        options.selectionAdapter = MultipleSelection;\r\n        options.selectionAdapter = Utils.Decorate( // Override\r\n        options.selectionAdapter, Select2MultipleSelectionDecorator);\r\n      } else {\r\n        options.selectionAdapter = SingleSelection;\r\n      } // Add the placeholder mixin if a placeholder was specified\r\n\r\n      if (options.placeholder != null) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, Placeholder);\r\n      }\r\n\r\n      if (options.allowClear) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, options.filter ? FilterAllowClear : AllowClear);\r\n      }\r\n\r\n      if (options.multiple) {\r\n        options.selectionAdapter = Utils.Decorate(options.selectionAdapter, SelectionSearch);\r\n      }\r\n\r\n      options.selectionAdapter = Utils.Decorate(options.selectionAdapter, EventRelay);\r\n    }\r\n\r\n    options.translations = new Translation(Select2Language);\r\n    options.dir = ew.IS_RTL ? \"rtl\" : \"ltr\";\r\n    return options;\r\n  };\n\n  let currentUrl = new URL(window.location);\r\n  let forms = new Forms();\r\n  let $document$1 = $__default.default(document),\r\n      $body = $__default.default(\"body\");\r\n  let fieldContainerSelector = \".row, [id^=el_], [class^=el_]\"; // Set focus\r\n\r\n  Pace.on(\"done\", () => {\r\n    var _forms$get;\r\n\r\n    let form = document.querySelector(\".modal.show form.ew-form\") || document.querySelector(\"form.ew-form\");\r\n    (_forms$get = forms.get(form == null ? void 0 : form.id)) == null ? void 0 : _forms$get.tryFocus();\r\n  }); // Create select2\r\n\r\n  function createSelect(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n\r\n    if ($__default.default.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.toSelect2Data(lookup.options);\r\n    }\r\n\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n          lookup = new ew.AjaxLookup({ ...options.ajax,\r\n        ...{\r\n          action: \"modal\"\r\n        }\r\n      });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length, _data$records;\r\n\r\n          let self = this;\r\n          return {\r\n            results: lookup.toSelect2Data(lookup.transform(data)),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length = (_data$records = data.records) == null ? void 0 : _data$records.length) != null ? _data$records$length : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $__default.default.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n\r\n    let args = {\r\n      name: options.name,\r\n      options\r\n    };\r\n    $document$1.trigger(\"select2\", [args]);\r\n    let $select = $__default.default(\"select[data-select2-id='\" + options.selectId + \"']\").select2(args.options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin;\r\n\r\n      (_$$data$$dropdown$fin = $__default.default(this).data(\"select2\").$dropdown.find(\".select2-search__field\")[0]) == null ? void 0 : _$$data$$dropdown$fin.focus();\r\n    });\r\n\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $__default.default(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n\r\n    if (options.minimumResultsForSearch === Infinity) {\r\n      $select.on(\"select2:opening select2:closing\", function () {\r\n        $__default.default(this).data(\"select2\").$dropdown.find(\".select2-search--dropdown\").addClass(\"select2-search--hide\");\r\n      });\r\n    }\r\n  } // Create modal lookup\r\n\r\n  function createModalLookup(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n\r\n    if ($__default.default.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.options.map(item => {\r\n        return {\r\n          id: item.lf,\r\n          text: lookup.formatResult({\r\n            lf: item.lf,\r\n            df: item.df,\r\n            df2: item.df2,\r\n            df3: item.df3,\r\n            df4: item.df4\r\n          })\r\n        };\r\n      });\r\n    }\r\n\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n          lookup = new ew.AjaxLookup({ ...options.ajax,\r\n        ...{\r\n          action: \"modal\"\r\n        }\r\n      });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length2, _data$records2;\r\n\r\n          let self = this;\r\n          return {\r\n            results: lookup.transform(data).map(item => {\r\n              return {\r\n                id: item.lf,\r\n                text: lookup.formatResult({\r\n                  lf: item.lf,\r\n                  df: item.df,\r\n                  df2: item.df2,\r\n                  df3: item.df3,\r\n                  df4: item.df4\r\n                })\r\n              };\r\n            }),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length2 = (_data$records2 = data.records) == null ? void 0 : _data$records2.length) != null ? _data$records$length2 : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $__default.default.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n\r\n    let $select = $__default.default(\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin2;\r\n\r\n      (_$$data$$dropdown$fin2 = $__default.default(this).data(\"select2\").$dropdown.find(\".select2-search__field\").addClass(\"form-control\")[0]) == null ? void 0 : _$$data$$dropdown$fin2.focus();\r\n    });\r\n\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $__default.default(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n  } // Create table header filter\r\n\r\n  function createFilter(options) {\r\n    if (options.selectId.includes(\"$rowindex$\")) return;\r\n\r\n    if ($__default.default.isObject(options.data)) {\r\n      let lookup = new ew.AjaxLookup(options.data);\r\n      options.data = lookup.options.map(item => {\r\n        return {\r\n          id: item.lf,\r\n          text: lookup.formatResult({\r\n            lf: item.lf,\r\n            df: item.df,\r\n            df2: item.df2,\r\n            df3: item.df3,\r\n            df4: item.df4\r\n          })\r\n        };\r\n      });\r\n    }\r\n\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      let limit = options.ajax.limit,\r\n          lookup = new ew.AjaxLookup({ ...options.ajax,\r\n        ...{\r\n          action: \"modal\"\r\n        }\r\n      });\r\n      options.ajax = {\r\n        url: params => {\r\n          let start = params.page ? (params.page - 1) * limit : -1;\r\n          return lookup.getUrl(params.term, start);\r\n        },\r\n        type: \"POST\",\r\n        dataType: \"json\",\r\n        data: lookup.generateRequest.bind(lookup),\r\n        delay: options.debounce,\r\n        processResults: function (data) {\r\n          var _data$records$length3, _data$records3;\r\n\r\n          let self = this;\r\n          return {\r\n            results: lookup.transform(data).map(item => {\r\n              return {\r\n                id: item.lf,\r\n                text: lookup.formatResult({\r\n                  lf: item.lf,\r\n                  df: item.df,\r\n                  df2: item.df2,\r\n                  df3: item.df3,\r\n                  df4: item.df4\r\n                })\r\n              };\r\n            }),\r\n            pagination: {\r\n              more: self.container.$results.find(\".select2-results__option:not(.select2-results__option--load-more)\").length + ((_data$records$length3 = (_data$records3 = data.records) == null ? void 0 : _data$records3.length) != null ? _data$records$length3 : 0) < lookup.recordCount\r\n            }\r\n          };\r\n        },\r\n        transport: (params, success, failure) => $__default.default.ajax(params).then(data => {\r\n          let error = getError(data);\r\n          !error || _alert(error);\r\n          success(data);\r\n        }).fail(failure)\r\n      };\r\n    }\r\n\r\n    let $select = $__default.default(\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\r\n    $select.on(\"select2:open\", function () {\r\n      var _$$data$$dropdown$fin3;\r\n\r\n      (_$$data$$dropdown$fin3 = $__default.default(this).data(\"select2\").$dropdown.find(\".select2-search__field\").addClass(\"form-control\")[0]) == null ? void 0 : _$$data$$dropdown$fin3.focus({\r\n        preventScroll: options.preventScroll\r\n      }); // Do not scroll on focus by default\r\n    });\r\n\r\n    if ($__default.default.isObject(options.ajax)) {\r\n      $select.on(\"select2:opening\", function () {\r\n        $__default.default(this).data(\"select2\").$results.find(\".select2-results__option:not(.loading-results)\").remove();\r\n      });\r\n    }\r\n  } // Init icon tooltip\r\n\r\n  function initIcons(e) {\r\n    var _e$target;\r\n\r\n    let el = (_e$target = e == null ? void 0 : e.target) != null ? _e$target : document,\r\n        tooltipOptions = { ...ew.tooltipOptions,\r\n      container: \"body\",\r\n      trigger: ew.IS_MOBILE ? \"manual\" : \"hover\"\r\n    };\r\n    $__default.default(el).find(\".ew-icon\").closest(\".btn, .ew-home, .ew-row-link:not(.dropdown-item)\").each(function () {\r\n      let $this = $__default.default(this);\r\n\r\n      if ($this.hasClass(\"dropdown-toggle\")) {\r\n        let $p = $this.closest(\".btn-group\");\r\n\r\n        if ($p.children(\".btn\").length == 1) {\r\n          $p.tooltip({ ...tooltipOptions,\r\n            title: this.dataset.title || this.title\r\n          }).on(\"mouseleave\", e => {\r\n            var _bootstrap$Tooltip$ge;\r\n\r\n            return (_bootstrap$Tooltip$ge = bootstrap.Tooltip.getInstance(e.currentTarget)) == null ? void 0 : _bootstrap$Tooltip$ge.hide();\r\n          });\r\n          $this.next(\".dropdown-menu\").on(\"mouseover\", e => e.stopPropagation());\r\n        }\r\n      } else {\r\n        $this.tooltip(tooltipOptions);\r\n      }\r\n    });\r\n  } // Init password options\r\n\r\n  function initPasswordOptions(e) {\r\n    var _e$target2;\r\n\r\n    var el = (_e$target2 = e == null ? void 0 : e.target) != null ? _e$target2 : document;\r\n\r\n    if ($__default.default.fn.pStrength && typeof ew.MIN_PASSWORD_STRENGTH != \"undefined\") {\r\n      $__default.default(el).find(\".ew-password-strength\").each(function () {\r\n        var $this = $__default.default(this);\r\n        if (!$this.data(\"pStrength\")) $this.pStrength({\r\n          \"changeBackground\": false,\r\n          \"backgrounds\": [],\r\n          \"passwordValidFrom\": ew.MIN_PASSWORD_STRENGTH,\r\n          \"onPasswordStrengthChanged\": function (strength, percentage) {\r\n            var $pst = $__default.default(\"[id='\" + this.attr(\"data-password-strength\") + \"']\"),\r\n                // Do not use #\r\n            $pb = $pst.find(\".progress-bar\");\r\n\r\n            if (this.val() && !ew.isMaskedPassword(this)) {\r\n              var pct = percentage + \"%\",\r\n                  min = ew.MIN_PASSWORD_STRENGTH,\r\n                  valid = percentage >= min;\r\n\r\n              if (percentage < min * 0.25) {\r\n                $pb.addClass(\"bg-danger\").removeClass(\"bg-warning bg-info bg-success\");\r\n              } else if (percentage < min * 0.5) {\r\n                $pb.addClass(\"bg-warning\").removeClass(\"bg-danger bg-info bg-success\");\r\n              } else if (percentage < min * 0.75) {\r\n                $pb.addClass(\"bg-primary\").removeClass(\"bg-danger bg-warning bg-success\");\r\n              } else {\r\n                $pb.addClass(\"bg-success\").removeClass(\"bg-danger bg-warning bg-info\");\r\n              }\r\n\r\n              $pb.css(\"width\", pct);\r\n              if (percentage > min * 0.5) pct = ew.language.phrase(\"PasswordStrength\").replace(\"%p\", pct);\r\n              $pb.html(pct);\r\n              $pst.removeClass(\"d-none\");\r\n              this.data(\"validated\", valid);\r\n              if (valid) setValid(this[0]);\r\n            } else {\r\n              $pst.addClass(\"d-none\");\r\n              this.data(\"validated\", null);\r\n            }\r\n\r\n            $pst.width(this.outerWidth());\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    if ($__default.default.fn.pGenerator) {\r\n      $__default.default(el).find(\".ew-password-generator\").each(function () {\r\n        var $this = $__default.default(this);\r\n        if (!$this.data(\"pGenerator\")) $this.pGenerator({\r\n          \"passwordLength\": ew.GENERATE_PASSWORD_LENGTH,\r\n          \"uppercase\": ew.GENERATE_PASSWORD_UPPERCASE,\r\n          \"lowercase\": ew.GENERATE_PASSWORD_LOWERCASE,\r\n          \"numbers\": ew.GENERATE_PASSWORD_NUMBER,\r\n          \"specialChars\": ew.GENERATE_PASSWORD_SPECIALCHARS,\r\n          \"onPasswordGenerated\": function (pwd) {\r\n            $__default.default(\"#\" + this.attr(\"data-password-confirm\")).val(pwd);\r\n            $__default.default(\"#\" + this.attr(\"data-password-field\")).val(pwd).trigger(\"change\").trigger(\"focus\").triggerHandler(\"click\"); // Trigger click to remove \"is-invalid\" class (Do not use $this.data)\r\n          }\r\n        });\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Get API action URL\r\n   * @param {string|string[]} action - Route as string or array, e.g. \"foo\", [\"foo\", \"1\"]\r\n   * @param {string|string[]|Object|URLSearchParams|FormData} query - Search params, e.g. \"foo=1&bar=2\", [[\"foo\", \"1\"], [\"bar\", \"2\"]], {\"foo\": \"1\", \"bar\": \"2\"}\r\n   */\r\n\r\n  function getApiUrl(action, query) {\r\n    var url = ew.PATH_BASE + ew.API_URL,\r\n        params = query instanceof URLSearchParams ? query : new URLSearchParams(query),\r\n        qs = params.toString();\r\n\r\n    if ($__default.default.isString(action)) {\r\n      // Route as string\r\n      url += action ? action : \"\";\r\n    } else if (Array.isArray(action)) {\r\n      // Route as array\r\n      var route = action.map(function (v) {\r\n        return encodeURIComponent(v);\r\n      }).join(\"/\");\r\n      url += route ? route : \"\";\r\n    }\r\n\r\n    return url + (qs ? \"?\" + qs : \"\");\r\n  }\r\n  /**\r\n   * Parse URL\r\n   * Note: .search is read only, always use .searchParams to change parameters\r\n   * @param {string} url - URL\r\n   * @returns {Object}\r\n   */\r\n\r\n  function parseUrl(url) {\r\n    var _pathname, _hash;\r\n\r\n    let pathname, search, hash;\r\n    [pathname, hash] = url.split(\"#\");\r\n    [pathname, search] = pathname.split(\"?\");\r\n    if (!search && pathname.includes(\"=\")) [pathname, search] = [\"\", pathname];\r\n    let obj = {\r\n      url: url,\r\n      pathname: (_pathname = pathname) != null ? _pathname : \"\",\r\n      hash: (_hash = hash) != null ? _hash : \"\",\r\n      searchParams: new URLSearchParams(search)\r\n    };\r\n    Object.defineProperty(obj, \"search\", {\r\n      // Read only\r\n      value: search,\r\n      writable: false,\r\n      enumerable: true\r\n    });\r\n    return obj;\r\n  }\r\n  /**\r\n   * Create URLSearchParams\r\n   * @param {*} params - search parameters\r\n   * @returns {URLSearchParams}\r\n   */\r\n\r\n  function createSearchParams(params) {\r\n    try {\r\n      return new URLSearchParams(params);\r\n    } catch (e) {\r\n      console.log(e);\r\n      return new URLSearchParams();\r\n    }\r\n  }\r\n  /**\r\n   * Get URL search parameters\r\n   * @param {string} url - URL\r\n   * @returns {URLSearchParams}\r\n   */\r\n\r\n  function getSearchParams(url) {\r\n    return parseUrl(url).searchParams;\r\n  }\r\n  /**\r\n   * Get a search parameter from URL\r\n   * @param {string} url - URL\r\n   * @param {string} name - Name\r\n   * @returns {string} Value\r\n   */\r\n\r\n  function getSearchParam(url, name) {\r\n    return getSearchParams(url).get(name);\r\n  }\r\n  /**\r\n   * Set URL search parameters\r\n   * @param {string} url - URL\r\n   * @param {*} args - search parameters to be merged\r\n   * @returns {string} URL\r\n   */\r\n\r\n  function setSearchParams(url) {\r\n    let obj = parseUrl(url);\r\n\r\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n      args[_key - 1] = arguments[_key];\r\n    }\r\n\r\n    obj.searchParams = mergeSearchParams(obj.searchParams, ...args);\r\n    return buildUrl(obj);\r\n  }\r\n  /**\r\n   * Merge URL search parameters\r\n   * @param {*} args - search parameters to be merged\r\n   * @returns {URLSearchParams}\r\n   */\r\n\r\n  function mergeSearchParams() {\r\n    let searchParams = new URLSearchParams();\r\n\r\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\r\n      args[_key2] = arguments[_key2];\r\n    }\r\n\r\n    for (const params of args) {\r\n      if ($__default.default.isObject(params) || $__default.default.isString(params) && params) {\r\n        // Note: Array is also object\r\n        let newParams = params instanceof URLSearchParams ? params : createSearchParams(params);\r\n        newParams.forEach((value, key) => searchParams.has(key) ? key.endsWith(\"[]\") ? searchParams.append(key, value) : searchParams.set(key, value) : searchParams.set(key, value));\r\n      }\r\n    }\r\n\r\n    return searchParams;\r\n  }\r\n  /**\r\n   * Set URL search parameter\r\n   * @param {string} url - URL\r\n   * @param {string} name - Name\r\n   * @param {string} value - Value\r\n   * @returns {string} URL\r\n   */\r\n\r\n  function setSearchParam(url, name, value) {\r\n    return setSearchParams(url, {\r\n      [name]: value\r\n    });\r\n  }\r\n  /**\r\n   * Delete search parameters from URL\r\n   * @param {string} url - URL\r\n   * @param {string[]} names - Names\r\n   * @returns {string} URL\r\n   */\r\n\r\n  function deleteSearchParam(url) {\r\n    let obj = parseUrl(url);\r\n\r\n    for (var _len3 = arguments.length, names = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\r\n      names[_key3 - 1] = arguments[_key3];\r\n    }\r\n\r\n    names.forEach(name => obj.searchParams.delete(name));\r\n    return buildUrl(obj);\r\n  }\r\n  /**\r\n   * Build URL\r\n   * @param {Object} obj Object { pathname, searchParams, hash }\r\n   * @returns {string} URL\r\n   */\r\n\r\n  function buildUrl(obj) {\r\n    let search = obj.searchParams.toString();\r\n    return obj.pathname + (obj.pathname && search ? \"?\" : \"\") + search + (obj.hash ? \"#\" + obj.hash : \"\");\r\n  }\r\n  /**\r\n   * Set layout parameter to URL\r\n   * Disable layout by adding \"layout=false\"\r\n   * @param {string} url - URL\r\n   * @param {string} value - Layout\r\n   * @returns {string} URL\r\n   */\r\n\r\n  function setLayout(url, value) {\r\n    return url && url != \"#\" ? setSearchParams(url, {\r\n      [ew.PAGE_LAYOUT]: String(value)\r\n    }) : url;\r\n  } // Sanitize URL\r\n\r\n  function sanitizeUrl(url) {\r\n    let obj = parseUrl(url),\r\n        searchParams = obj.searchParams;\r\n    searchParams.forEach((value, key) => {\r\n      value = decodeURIComponent(value);\r\n      if ([\"<>\", \"<=\", \">=\", \">\", \"<\"].includes(value)) searchParams.set(key, value);else searchParams.set(key, ew.sanitize(value));\r\n    });\r\n    return buildUrl(obj);\r\n  } // Set session timer\r\n\r\n  function setSessionTimer() {\r\n    var timeoutTime,\r\n        timer,\r\n        keepAliveTimer,\r\n        counter,\r\n        useKeepAlive = ew.SESSION_KEEP_ALIVE_INTERVAL > 0 || ew.IS_LOGGEDIN && ew.IS_AUTOLOGIN; // Keep alive\r\n\r\n    var keepAlive = () => {\r\n      $__default.default.get(getApiUrl(ew.API_SESSION_ACTION), {\r\n        \"rnd\": random()\r\n      }, token => {\r\n        if (token && $__default.default.isObject(token)) {\r\n          // PHP\r\n          ew.TOKEN_NAME = token[ew.TOKEN_NAME_KEY];\r\n          ew.ANTIFORGERY_TOKEN = token[ew.ANTIFORGERY_TOKEN_KEY];\r\n          if (token[\"JWT\"]) ew.API_JWT_TOKEN = token[\"JWT\"];\r\n        }\r\n      });\r\n    }; // Reset timer\r\n\r\n    var resetTimer = () => {\r\n      counter = ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      timeoutTime = ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n\r\n      if (timeoutTime < 0) {\r\n        // Timeout now\r\n        timeoutTime = 0;\r\n        counter = ew.SESSION_TIMEOUT;\r\n      }\r\n\r\n      if (timer) timer.cancel(); // Clear timer\r\n    }; // Timeout\r\n\r\n    var timeout = () => {\r\n      if (keepAliveTimer) keepAliveTimer.cancel(); // Stop keep alive\r\n\r\n      if (counter > 0) {\r\n        let timerInterval;\r\n        let message = '<p class=\"text-danger\">' + ew.language.phrase(\"SessionWillExpire\") + '</p>';\r\n\r\n        if (message.includes(\"%m\") && message.includes(\"%s\")) {\r\n          message = message.replace(\"%m\", '<span class=\"ew-session-counter-minute\">' + Math.floor(counter / 60) + '</span>');\r\n          message = message.replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter % 60 + '</span>');\r\n        } else if (message.includes(\"%s\")) {\r\n          message = message.replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter + '</span>');\r\n        }\r\n\r\n        Swal.fire({ ...ew.sweetAlertSettings,\r\n          html: message,\r\n          showConfirmButton: true,\r\n          confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n          timer: counter * 1000,\r\n          timerProgressBar: true,\r\n          allowOutsideClick: false,\r\n          allowEscapeKey: false,\r\n          willOpen: () => {\r\n            timerInterval = setInterval(() => {\r\n              let content = Swal.getHtmlContainer(),\r\n                  min = content.querySelector(\".ew-session-counter-minute\"),\r\n                  sec = content.querySelector(\".ew-session-counter-second\"),\r\n                  timeleft = Math.round(Swal.getTimerLeft() / 1000);\r\n\r\n              if (min && sec) {\r\n                min.textContent = Math.floor(timeleft / 60);\r\n                sec.textContent = timeleft % 60;\r\n              } else if (sec) {\r\n                sec.textContent = timeleft;\r\n              }\r\n            }, 1000);\r\n          },\r\n          willClose: () => {\r\n            clearInterval(timerInterval);\r\n          }\r\n        }).then(result => {\r\n          if (result.value) {\r\n            // OK button pressed\r\n            keepAlive();\r\n            if (!useKeepAlive && ew.SESSION_TIMEOUT > 0) setTimer();\r\n          } else if (result.dismiss === Swal.DismissReason.timer) {\r\n            // Timeout\r\n            resetTimer();\r\n            window.location = sanitizeUrl(ew.TIMEOUT_URL + \"?expired=1\");\r\n          }\r\n        });\r\n      }\r\n    }; // Set timer\r\n\r\n    var setTimer = () => {\r\n      resetTimer(); // Reset timer first\r\n\r\n      timer = $__default.default.later(timeoutTime * 1000, null, timeout);\r\n    };\r\n\r\n    if (useKeepAlive) {\r\n      // Keep alive\r\n      var keepAliveInterval = ew.SESSION_KEEP_ALIVE_INTERVAL > 0 ? ew.SESSION_KEEP_ALIVE_INTERVAL : ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\r\n      if (keepAliveInterval <= 0) keepAliveInterval = 60;\r\n      keepAliveTimer = $__default.default.later(keepAliveInterval * 1000, null, keepAlive, null, true); // Periodic\r\n    } else {\r\n      if (ew.SESSION_TIMEOUT > 0) // Set session timeout\r\n        setTimer();\r\n    }\r\n  } // Init export links\r\n\r\n  function initExportLinks(e) {\r\n    var _e$target3;\r\n\r\n    let $el = $__default.default((_e$target3 = e == null ? void 0 : e.target) != null ? _e$target3 : document);\r\n    $el.find(\"a.ew-export-link[href]:not(.ew-email):not(.ew-print):not(.ew-xml)\").on(\"click\", function (e) {\r\n      let href = this.href;\r\n      if (href && href != \"#\") fileDownload(href, getchartParams());\r\n      e.preventDefault();\r\n    });\r\n    $el.find(\"a.ew-export-link[href].ew-print, a.ew-export-link[href].ew-xml\").each(function () {\r\n      let url = new URL(this.href);\r\n      url.searchParams.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n      url.searchParams.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n      this.href = url.pathname + url.search; // Add token name and antiforgery token // PHP\r\n    });\r\n  } // Init multi-select checkboxes\r\n\r\n  function initMultiSelectCheckboxes(e) {\r\n    var _e$target4;\r\n\r\n    var el = (_e$target4 = e == null ? void 0 : e.target) != null ? _e$target4 : document,\r\n        $el = $__default.default(el),\r\n        $cbs = $el.find(\"input[type=checkbox].ew-multi-select\");\r\n\r\n    var _update = function (id) {\r\n      var $els = $cbs.filter(\"[name^='\" + id + \"_']\"),\r\n          cnt = $els.length,\r\n          len = $els.filter(\":checked\").length;\r\n      $__default.default(\"input[type=checkbox]#\" + id).prop(\"checked\", len == cnt).prop(\"indeterminate\", len != cnt && len != 0);\r\n    };\r\n\r\n    $cbs.on(\"click\", e => _update(e.target.name.split(\"_\")[0]));\r\n    $el.find(\"input[type=checkbox].ew-priv:not(.ew-multi-select)\").each((i, el) => _update(el.id)); // Init\r\n  } // Get error from response\r\n\r\n  function getError(result) {\r\n    var _result$error, _result$error2;\r\n\r\n    return result && (((_result$error = result.error) == null ? void 0 : _result$error.description) || ((_result$error2 = result.error) == null ? void 0 : _result$error2.message) || $__default.default.isString(result.error) && result.error || result.failureMessage || // Check this first\r\n    result.success === false && result.message || null);\r\n  } // Download file\r\n\r\n  function fileDownload(href, data) {\r\n    let isHtml = href.includes(\"export=html\") || href.includes(getApiUrl([ew.API_EXPORT_ACTION, \"html\"])),\r\n        swal = window.parent.Swal; // Use window.parent.Swal in case in iframe\r\n\r\n    data = mergeSearchParams(data, [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]]);\r\n    return swal.fire({ ...ew.sweetAlertSettings,\r\n      showConfirmButton: false,\r\n      html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\r\n      allowOutsideClick: false,\r\n      allowEscapeKey: false,\r\n      willOpen: () => {\r\n        swal.showLoading();\r\n\r\n        _fetch(href, {\r\n          method: data ? \"POST\" : \"GET\",\r\n          body: data || null\r\n        }).then(async response => {\r\n          let ct = response.headers.get(\"Content-Type\");\r\n\r\n          if (ct != null && ct.includes(\"json\")) {\r\n            var _getError;\r\n\r\n            let result = await response.json(),\r\n                error = (_getError = getError(result)) != null ? _getError : ew.language.phrase(\"FailedToExport\");\r\n\r\n            if (error) {\r\n              swal.hideLoading();\r\n              swal.update({\r\n                html: \"<div class='text-danger'>\" + error + \"</div>\",\r\n                showConfirmButton: true\r\n              });\r\n              $document$1.trigger(\"export\", [{\r\n                type: \"fail\",\r\n                url: href\r\n              }]);\r\n            }\r\n          } else {\r\n            let data = isHtml ? await response.text() : await response.blob(),\r\n                url = URL.createObjectURL(isHtml ? new Blob([data], {\r\n              type: \"text/html\"\r\n            }) : data),\r\n                a = document.createElement(\"a\"),\r\n                cd = response.headers.get(\"Content-Disposition\"),\r\n                m = cd == null ? void 0 : cd.match(/\\bfilename=((['\"])(.+)\\2|([^;]+))/i);\r\n            a.style.display = \"none\";\r\n            a.href = url;\r\n            if (m) a.download = m[3] || m[4];\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"done\",\r\n              url: href,\r\n              objectUrl: url\r\n            }]);\r\n            URL.revokeObjectURL(url);\r\n            swal.close();\r\n          }\r\n        }).catch(error => {\r\n          swal.hideLoading();\r\n          swal.update({\r\n            html: \"<div class='text-danger'>\" + error + \"</div>\",\r\n            showConfirmButton: true\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"fail\",\r\n            url: href\r\n          }]);\r\n        }).finally(() => {\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"always\",\r\n            url: href\r\n          }]);\r\n        });\r\n      }\r\n    });\r\n  } // Lazy load images\r\n\r\n  function lazyLoad(e) {\r\n    var _e$target5;\r\n\r\n    if (!ew.LAZY_LOAD) return;\r\n    var el = (_e$target5 = e == null ? void 0 : e.target) != null ? _e$target5 : document;\r\n    el.querySelectorAll(\"img.ew-lazy\").forEach((img, i) => {\r\n      if (ew.LAZY_LOAD_DELAY > 0) setTimeout(() => img.src = img.dataset.src, i * ew.LAZY_LOAD_DELAY);else img.src = img.dataset.src;\r\n    });\r\n    $document$1.trigger(\"lazyload\"); // All images loaded\r\n  } // Update select2 dropdown position\r\n\r\n  function updateDropdownPosition() {\r\n    var select = $__default.default(\".select2-container--open\").prev(\".ew-select\").data(\"select2\");\r\n\r\n    if (select) {\r\n      select.dropdown._positionDropdown();\r\n\r\n      select.dropdown._resizeDropdown();\r\n    }\r\n  } // Colorboxes\r\n\r\n  function initLightboxes(e) {\r\n    var _e$target6;\r\n\r\n    if (!ew.USE_COLORBOX) return;\r\n    var el = (_e$target6 = e == null ? void 0 : e.target) != null ? _e$target6 : document;\r\n    var settings = Object.assign({}, ew.lightboxSettings, {\r\n      title: ew.language.phrase(\"LightboxTitle\"),\r\n      current: ew.language.phrase(\"LightboxCurrent\"),\r\n      previous: ew.language.phrase(\"LightboxPrevious\"),\r\n      next: ew.language.phrase(\"LightboxNext\"),\r\n      close: ew.language.phrase(\"LightboxClose\"),\r\n      xhrError: ew.language.phrase(\"LightboxXhrError\"),\r\n      imgError: ew.language.phrase(\"LightboxImgError\")\r\n    });\r\n    $__default.default(el).find(\".ew-lightbox\").each(function () {\r\n      var $this = $__default.default(this);\r\n      $this.colorbox(Object.assign({\r\n        rel: $this.data(\"rel\")\r\n      }, settings));\r\n    });\r\n  } // PDFObjects\r\n\r\n  function initPdfObjects(e) {\r\n    var _e$target7;\r\n\r\n    if (!ew.EMBED_PDF) return;\r\n    let el = (_e$target7 = e == null ? void 0 : e.target) != null ? _e$target7 : document,\r\n        options = Object.assign({}, ew.PDFObjectOptions);\r\n    $__default.default(el).find(\".ew-pdfobject\").not(\":has(.pdfobject)\").each(function () {\r\n      // Not already embedded\r\n      let $this = $__default.default(this),\r\n          url = $this.data(\"url\"),\r\n          html = $this.html();\r\n      if (url) PDFObject.embed(url, this, Object.assign(options, {\r\n        fallbackLink: html\r\n      }));\r\n    });\r\n  } // Tooltips and popovers\r\n\r\n  function initTooltips(e) {\r\n    var _e$target8;\r\n\r\n    let el = (_e$target8 = e == null ? void 0 : e.target) != null ? _e$target8 : document,\r\n        $el = $__default.default(el);\r\n    $el.find(\"input[data-bs-toggle=tooltip], textarea[data-bs-toggle=tooltip], select[data-bs-toggle=tooltip]\").each(function () {\r\n      let $this = $__default.default(this);\r\n      $this.tooltip({ ...ew.tooltipOptions,\r\n        html: true,\r\n        ...$this.data()\r\n      });\r\n    });\r\n    $el.find(\"a.ew-tooltip-link\").each(tooltip); // Set up tooltip links as popovers\r\n\r\n    $el.find(\".ew-tooltip\").tooltip(ew.tooltipOptions);\r\n    $el.find(\".ew-popover\").popover(ew.popoverOptions);\r\n  } // Parse JSON\r\n\r\n  function parseJson(data) {\r\n    if ($__default.default.isString(data)) {\r\n      try {\r\n        return JSON.parse(data);\r\n      } catch (e) {\r\n        return undefined;\r\n      }\r\n    }\r\n\r\n    return data;\r\n  } // Change search operator\r\n\r\n  function searchOperatorChange(el) {\r\n    let $el = $__default.default(el),\r\n        $p = $el.closest(\"[id^=r_], [id^=xs_]\"),\r\n        parm = el.id.substring(2),\r\n        $fld = $p.find(\".ew-search-field\"),\r\n        $fld2 = $p.find(\".ew-search-field2\"),\r\n        $y = $fld2.find(\"[name='y_\" + parm + \"'], [name='y_\" + parm + \"[]']\"),\r\n        hasY = $y.length,\r\n        $cond = $p.find(\".ew-search-cond\"),\r\n        hasCond = $cond.length,\r\n        // Has condition and operator 2\r\n    $and = $p.find(\".ew-search-and\"),\r\n        $opr = $p.find(\".ew-search-operator\"),\r\n        opr = $opr.find(\"[name='z_\" + parm + \"']\").val(),\r\n        $opr2 = $p.find(\".ew-search-operator2\"),\r\n        opr2 = $opr2.find(\"[name='w_\" + parm + \"']\").val(),\r\n        isBetween = opr.includes(\"BETWEEN\"),\r\n        // Can only be operator 1\r\n    isEmptyOpr = [\"IS NULL\", \"IS NOT NULL\", \"IS EMPTY\", \"IS NOT EMPTY\"].includes(opr),\r\n        isEmptyOpr2 = [\"IS NULL\", \"IS NOT NULL\", \"IS EMPTY\", \"IS NOT EMPTY\"].includes(opr2),\r\n        hideOpr2 = !hasY || isBetween,\r\n        hideX = isEmptyOpr,\r\n        hideY = !isBetween && (!hasCond || isEmptyOpr2);\r\n    $cond.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $and.toggleClass(\"d-none\", !isBetween);\r\n    $opr2.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\r\n    $fld.toggleClass(\"d-none\", hideX).find(\":input\").prop(\"disabled\", hideX);\r\n    $fld2.toggleClass(\"d-none\", hideY).find(\":input\").prop(\"disabled\", hideY);\r\n  } // Init forms\r\n\r\n  function initForms(e) {\r\n    var _e$target9;\r\n\r\n    let el = (_e$target9 = e == null ? void 0 : e.target) != null ? _e$target9 : document,\r\n        ids = ew.forms.ids();\r\n\r\n    for (let id of ids) {\r\n      if (el.matches != null && el.matches(\"#\" + id) || el.querySelector(\"#\" + id)) forms.get(id).init();\r\n    }\r\n  } // Is function\r\n\r\n  function isFunction$1(x) {\r\n    return typeof x === \"function\";\r\n  }\r\n  /**\r\n   * Alert (OK button only)\r\n   *\r\n   * @param {string|Object} msg - Message or config\r\n   * @param {callback} [cb] - Callback function\r\n   * @param {string} [type] - CSS class (see https://getbootstrap.com/docs/5.2/utilities/colors/)\r\n   * @returns {Promise}\r\n   */\r\n\r\n  function _alert(msg, cb, type) {\r\n    let config = $__default.default.isObject(msg) ? msg : {};\r\n    msg = $__default.default.isString(msg) ? msg : \"\";\r\n    type = $__default.default.isString(cb) ? cb : type;\r\n    config = $__default.default.extend(true, {}, ew.sweetAlertSettings, {\r\n      html: msg,\r\n      confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n      customClass: {\r\n        htmlContainer: \"ew-swal2-html-container text-\" + (type || \"danger\")\r\n      }\r\n    }, config);\r\n    let args = {\r\n      config,\r\n      type,\r\n      show: true\r\n    };\r\n    $document$1.trigger(\"alert\", [args]);\r\n    if (args.show) return Swal.fire(args.config).then(result => isFunction$1(cb) ? cb(result.isConfirmed) : result);\r\n  }\r\n  /**\r\n   * Prompt/Confirm/Alert\r\n   *\r\n   * @param {string|Object} cfg - Message or config object\r\n   * @param {callback} [cb] - Callback function\r\n   * @returns {Promise}\r\n   */\r\n\r\n  function _prompt(cfg, cb) {\r\n    var _config, _config$inputValidato;\r\n\r\n    let config = $__default.default.isObject(cfg) ? cfg : {};\r\n    config = $__default.default.extend(true, {}, ew.sweetAlertSettings, {\r\n      html: $__default.default.isString(cfg) ? cfg : \"\",\r\n      showCancelButton: true,\r\n      confirmButtonText: ew.language.phrase(\"OKBtn\"),\r\n      cancelButtonText: ew.language.phrase(\"CancelBtn\")\r\n    }, config); // Confirm/Alert\r\n\r\n    if (config.input) // Prompt\r\n      (_config$inputValidato = (_config = config).inputValidator) != null ? _config$inputValidato : _config.inputValidator = value => {\r\n        if (!value) return ew.language.phrase(\"EnterValue\");\r\n      };\r\n    return Swal.fire(config).then(result => isFunction$1(cb) ? cb(result.value) : result);\r\n  }\r\n\r\n  function toast(options) {\r\n    options = Object.assign({}, ew.toastOptions, options);\r\n    $document$1.Toasts(\"create\", options);\r\n    var position = options.position,\r\n        $container = $__default.default(\"#toastsContainer\" + position[0].toUpperCase() + position.substring(1));\r\n    return $container.children().first();\r\n  }\r\n  /**\r\n   * Show toast\r\n   *\r\n   * @param {string} message - Message\r\n   * @param {string} type - CSS class: \"primary|secondary|success|info|warning|danger|light|dark\"\r\n   * @param {string} title - Title\r\n   */\r\n\r\n  function showToast(message, type, title) {\r\n    if (!message) return;\r\n    type || (type = \"danger\");\r\n    title || (title = ew.language.phrase(type));\r\n    let args = {\r\n      message,\r\n      type,\r\n      title,\r\n      show: true\r\n    };\r\n    $document$1.trigger(\"toast\", [args]);\r\n    if (!args.show) return;\r\n    ({\r\n      message,\r\n      type,\r\n      title\r\n    } = args);\r\n    return toast({\r\n      class: \"ew-toast bg-\" + type,\r\n      title,\r\n      body: message,\r\n      autohide: type == \"success\" ? ew.autoHideSuccessMessage : false,\r\n      // Autohide for success message\r\n      delay: type == \"success\" ? ew.autoHideSuccessMessageDelay : 500\r\n    });\r\n  } // Get form.ew-form or div.ew-form HTML element\r\n\r\n  function getForm(el) {\r\n    if (el instanceof Form) return el.$element[0];\r\n    var $el = $__default.default(el),\r\n        $f = $el.closest(\".ew-form\");\r\n    if (!$f[0]) // Element not inside form\r\n      $f = $el.closest(\".ew-grid, .ew-multi-column-grid\").find(\".ew-form\");\r\n    return $f[0];\r\n  } // Check form data\r\n\r\n  function hasFormData(form) {\r\n    var selector = \"[name^=x_],[name^=y_],[name^=z_],[name^=w_],[name=\" + ew.TABLE_BASIC_SEARCH + \"]\",\r\n        els = $__default.default(form).find(selector).filter(\":enabled\").get();\r\n\r\n    for (var i = 0, len = els.length; i < len; i++) {\r\n      var el = els[i];\r\n\r\n      if (/^(z|w)_/.test(el.name)) {\r\n        if (/^IS/.test($__default.default(el).val())) return true;\r\n      } else if (el.type == \"checkbox\" || el.type == \"radio\") {\r\n        if (el.checked) return true;\r\n      } else if (el.type == \"select-one\" || el.type == \"select-multiple\") {\r\n        if (!!$__default.default(el).val()) return true;\r\n      } else if ([\"text\", \"textarea\", \"password\", \"search\", \"color\", \"date\", \"datetime-local\", \"datetime\", \"email\", \"hidden\", \"month\", \"number\", \"range\", \"tel\", \"time\", \"url\", \"week\"].includes(el.type)) {\r\n        if (el.value) return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Set search type\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns false\r\n   */\r\n\r\n  function setSearchType(el) {\r\n    var val = el.dataset.searchType,\r\n        phraseId = \"Auto\";\r\n    if (val == \"=\") phraseId = \"Exact\";else if (val == \"AND\") phraseId = \"All\";else if (val == \"OR\") phraseId = \"Any\";\r\n    el.closest(\".ew-basic-search\").querySelector(\"input.ew-basic-search-type\").value = val || \"\";\r\n    el.closest(\".dropdown-menu\").querySelectorAll(\".dropdown-item\").forEach(item => item.classList.remove(\"active\"));\r\n    el.closest(\".dropdown-item\").classList.add(\"active\");\r\n    var searchType = el.closest(\".input-group\").querySelector(\"#searchtype\"),\r\n        text = ew.language.phrase(\"QuickSearch\" + phraseId + \"Short\");\r\n    searchType.innerHTML = text;\r\n    searchType.classList.toggle(\"me-2\", !!text);\r\n    return false;\r\n  }\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @this {Form|HTMLElement} Form or parent element\r\n   * @param {(HTMLElement|HTMLElement[]|string|string[])} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns {Promise}\r\n   */\r\n\r\n  function updateOptions(obj, parentId, async, change) {\r\n    var _obj, _batch$send;\r\n\r\n    var f = this.$element ? this.$element[0] : this.form || ((_obj = obj) == null ? void 0 : _obj.form); // Get form/div element from this/obj\r\n\r\n    if (!f) return;\r\n    var frm = this.htmlForm ? this : forms.get(f.id); // Get Form object\r\n\r\n    if (!frm) return;\r\n    if (this.form && $__default.default.isUndefined(obj)) // Target unspecified => update child fields\r\n      obj = forms.get(this).getList(this).childFields.slice(); // Clone\r\n    else if ($__default.default.isString(obj)) obj = getElements(obj, f);\r\n    if (!obj || Array.isArray(obj) && obj.length == 0) return;\r\n    var self = this,\r\n        batch = new Batch();\r\n\r\n    if (Array.isArray(obj) && $__default.default.isString(obj[0])) {\r\n      // Array of id\r\n      var els = [];\r\n\r\n      for (var i = 0, len = obj.length; i < len; i++) {\r\n        var ar = obj[i].split(\" \");\r\n\r\n        if (ar.length == 1 && self.form) {\r\n          // Parent/Child fields in the same table\r\n          var m = getId(self, false).match(/^([xy]\\d*_)/);\r\n          if (m) obj[i] = obj[i].replace(/^([xy]\\d*_)/, m[1]);\r\n        }\r\n\r\n        var el = getElements(obj[i], f),\r\n            names = [];\r\n        if (isTextbox(el) || isFilter(el)) // Search text box or filter\r\n          continue;\r\n        els.push(el);\r\n\r\n        if (ar.length == 2 && Array.isArray(el)) {\r\n          // Check if id is \"tblVar fldVar\" and multiple inputs\r\n          var $el = $__default.default(el);\r\n          $el.each(function () {\r\n            if (!names.includes(this.name)) {\r\n              names.push(this.name);\r\n              var $elf = $el.filter(\"[name='\" + this.name + \"']\"),\r\n                  typ = $elf.attr(\"type\"),\r\n                  elf = [\"radio\", \"checkbox\"].includes(typ) ? $elf.get() : $elf[0];\r\n              batch.add(_updateOptions.bind(self, elf, parentId, async, change));\r\n            }\r\n          });\r\n        } else {\r\n          batch.add(_updateOptions.bind(self, el, parentId, async, change));\r\n        }\r\n      }\r\n\r\n      obj = els;\r\n      var list = forms.get(self).getList(self);\r\n      if (Array.isArray(list == null ? void 0 : list.autoFillTargetFields) && list.autoFillTargetFields[0]) // AutoFill\r\n        batch.add(autoFill.bind(null, self));\r\n    } else {\r\n      if (isTextbox(obj) || isFilter(obj)) // Search text box or filter\r\n        return;\r\n      batch.add(_updateOptions.bind(self, obj, parentId, async, change));\r\n    }\r\n\r\n    return (_batch$send = batch.send({\r\n      url: ew.getApiUrl(ew.API_LOOKUP_ACTION)\r\n    })) == null ? void 0 : _batch$send.then(function () {\r\n      $document$1.trigger(\"updatedone\", [{\r\n        source: self,\r\n        target: obj\r\n      }]); // Document \"updatedone\" event fired after all the target elements are updated\r\n    });\r\n  }\r\n  /**\r\n   * Update a dynamic selection list\r\n   *\r\n   * @param {(HTMLElement|HTMLElement[]} obj - Target HTML element(s) or the ID of the element(s)\r\n   * @param {(string[]|array[])} parentId - Parent field element names or data\r\n   * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\r\n   * @param {boolean} change - Trigger onchange event\r\n   * @returns {Promise}\r\n   */\r\n\r\n  function _updateOptions(obj, parentId, async, change) {\r\n    if (change === void 0) {\r\n      change = true;\r\n    }\r\n\r\n    var id = getId(obj, false);\r\n    if (!id) return;\r\n    var fo = getForm(obj); // Get form/div element from obj\r\n\r\n    if (!fo || !fo.id) return;\r\n    var frmo = forms.get(fo.id);\r\n    if (!frmo) return;\r\n    var self = this,\r\n        args = Array.from(arguments),\r\n        ar = getOptionValues(obj),\r\n        m = id.match(/^([xy])(\\d*)_/),\r\n        prefix = m ? m[1] : \"\",\r\n        rowindex = m ? m[2] : \"\",\r\n        arp = [],\r\n        list = frmo.getList(obj),\r\n        $obj = $__default.default(obj).data(\"updating\", true);\r\n    if ($obj.data(\"hidden\")) // Skip data-hidden field, e.g. detail key\r\n      return;\r\n\r\n    if ($__default.default.isUndefined(parentId)) {\r\n      // Parent IDs not specified, use default\r\n      parentId = list.parentFields.slice(); // Clone\r\n\r\n      if (rowindex != \"\") {\r\n        for (var i = 0, len = parentId.length; i < len; i++) {\r\n          var arr = parentId[i].split(\" \");\r\n          if (arr.length == 1) // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n    }\r\n\r\n    if (Array.isArray(parentId) && parentId.length > 0) {\r\n      if (Array.isArray(parentId[0])) {\r\n        // Array of array => data\r\n        arp = parentId;\r\n      } else if ($__default.default.isString(parentId[0])) {\r\n        // Array of string => Parent IDs\r\n        for (var i = 0, len = parentId.length; i < len; i++) arp.push(getOptionValues(parentId[i], fo));\r\n      }\r\n    }\r\n\r\n    if (!isAutoSuggest(obj)) // Do not clear Auto-Suggest\r\n      clearOptions(obj);\r\n\r\n    var addOpt = function (results) {\r\n      var name = getId(obj);\r\n      results.forEach(function (result) {\r\n        let args = {\r\n          \"data\": result,\r\n          \"parents\": arp,\r\n          \"valid\": true,\r\n          \"name\": name,\r\n          \"form\": fo\r\n        };\r\n        $document$1.trigger(\"addoption\", [args]);\r\n        if (args.valid) newOption(obj, result, fo);\r\n      });\r\n      obj.render == null ? void 0 : obj.render(); // Selection list\r\n\r\n      selectOption(obj, ar, change);\r\n\r\n      if (change) {\r\n        if (!obj.options && obj.length) $obj.first().triggerHandler(\"click\"); // else\r\n        //     $obj.first().trigger(\"change\");\r\n      }\r\n    };\r\n\r\n    if ($__default.default.isUndefined(async)) // Async not specified, use default\r\n      async = list.ajax;\r\n\r\n    var _updateSibling = function () {\r\n      // Update the y_* element\r\n      if (/(srch|search|summary|crosstab)$/.test(fo.id) && prefix == \"x\" && !rowindex) {\r\n        // Search form\r\n        args[0] = id.replace(/^x_/, \"y_\");\r\n        updateOptions.apply(self, args); // args[0] is string, use updateOptions()\r\n      }\r\n    };\r\n\r\n    if (!$__default.default.isBoolean(async) || Array.isArray(list.lookupOptions) && list.lookupOptions.length > 0) {\r\n      // Non-Ajax or Options loaded\r\n      var ds = list.lookupOptions;\r\n      addOpt(ds);\r\n\r\n      _updateSibling();\r\n\r\n      $obj.first().trigger(\"updated\", [{\r\n        target: obj\r\n      }]); // Object \"updated\" event fired after the object is updated\r\n\r\n      return ds;\r\n    } else {\r\n      // Ajax\r\n      var name = getId(obj),\r\n          data = Object.assign({\r\n        page: list.page,\r\n        field: list.field,\r\n        ajax: \"updateoption\",\r\n        language: ew.LANGUAGE_ID,\r\n        name: name // Name of the target element\r\n\r\n      }, getUserParams(\"#p_\" + id, fo)); // Add user parameters\r\n\r\n      if (isAutoSuggest(obj) && self.htmlForm) // Auto-Suggest (init form or auto-fill)\r\n        data[\"v0\"] = ar[0] || random(); // Filter by the current value\r\n      else if (obj.options && !obj.list && !isNativeSelectOne(obj) || // Not <selection-list> or native <select>\r\n      isModalLookup(obj)) // Lookup\r\n        data[\"v0\"] = ar[0] ? obj.multiple ? ar.join(ew.MULTIPLE_OPTION_SEPARATOR) : ar[0] : random(); // Filter by the current value\r\n\r\n      for (var i = 0, cnt = arp.length; i < cnt; i++) // Filter by parent fields\r\n      data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n\r\n      obj.showLoading == null ? void 0 : obj.showLoading(); // selection-list\r\n\r\n      return $__default.default.ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\r\n        method: \"POST\",\r\n        dataType: \"json\",\r\n        data: data,\r\n        async: async,\r\n        processData: false,\r\n        success: result => {\r\n          let error = getError(result);\r\n\r\n          if (error) {\r\n            _alert(error);\r\n\r\n            return;\r\n          }\r\n\r\n          let ds = result.records || [];\r\n          addOpt(ds);\r\n\r\n          _updateSibling();\r\n\r\n          $obj.first().trigger(\"updated\", [Object.assign({}, result, {\r\n            target: obj\r\n          })]); // Object \"updated\" event fired after the object is updated\r\n\r\n          return ds;\r\n        },\r\n        error: (jqXHR, textStatus, errorThrown) => _alert(errorThrown),\r\n        complete: () => $obj.data(\"updating\", false)\r\n      });\r\n    }\r\n  } // Get user parameters from id\r\n\r\n  function getUserParams(id, root) {\r\n    var id = id.replace(/\\[\\]$/, \"\"),\r\n        o = {};\r\n    var root = !$__default.default.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    var $els = root ? $__default.default(root).find(id) : $__default.default(id);\r\n    var val = $els.val();\r\n\r\n    if (val) {\r\n      var params = new URLSearchParams(val);\r\n      params.forEach(function (value, key) {\r\n        o[key] = value;\r\n      });\r\n    }\r\n\r\n    return o;\r\n  } // Get query builder filter input HTML\r\n\r\n  function getQueryBuilderFilterInput() {\r\n    return function (rule, name) {\r\n      var _document$getElementB, _document$getElementB2, _span$innerHTML$repla;\r\n\r\n      let tblVar = this.status.id.replace(/_query_builder$/, \"\"),\r\n          // \"this\" is QueryBuilder\r\n      fldVar = rule.filter.id,\r\n          tmplId = \"tpx_\" + tblVar + \"_\" + fldVar,\r\n          span = (_document$getElementB = document.getElementById(tmplId)) == null ? void 0 : (_document$getElementB2 = _document$getElementB.content) == null ? void 0 : _document$getElementB2.cloneNode(true).querySelector(\".ew-search-field\"),\r\n          html = (_span$innerHTML$repla = span == null ? void 0 : span.innerHTML.replace(/\\binvalid-feedback\\b/, ew.queryBuilderErrorClass).replace(new RegExp('(data-field=\")?(\\\\b|_)x_' + fldVar + '\\\\b', \"g\"), ($0, $1, $2) => $1 ? $0 : $2 + name)) != null ? _span$innerHTML$repla : \"\"; // Keep \"data-field\" attribute\r\n\r\n      return \"<div class=\\\"d-inline-flex position-relative\\\">\" + html + \"</div>\";\r\n    };\r\n  } // Get query builder value setter\r\n\r\n  function getQueryBuilderValueSetter() {\r\n    return function (rule, value) {\r\n      let input = rule.$el.find(\".rule-value-container\").find(\"select, selection-list, input[name^=sv_], input[data-field]\")[0],\r\n          values = Array.isArray(value) ? value : $__default.default.isValue(value) ? [value] : [];\r\n\r\n      if (input != null && input.matches(\"select, selection-list\")) {\r\n        // Selection list\r\n        let form = forms.get(input);\r\n        values.forEach(val => newOption(input, {\r\n          lf: val\r\n        }, form, true));\r\n        form.updateList(input, undefined, undefined, true); // Update immediately\r\n      } else {\r\n        ew.selectOption(input, values);\r\n      }\r\n\r\n      return null;\r\n    };\r\n  } // Get query builder filter validation object\r\n\r\n  function getQueryBuilderFilterValidation(validators) {\r\n    return {\r\n      callback: function (value, rule) {\r\n        // value not used\r\n        let $value = rule.$el.find(\".rule-value-container\"),\r\n            errors = 0;\r\n\r\n        for (let i = 0; i < rule.operator.nb_inputs; i++) {\r\n          $value.find(\"[name='\" + rule.id + '_value_' + i + \"']\").each(function () {\r\n            let $this = $__default.default(this),\r\n                $invalid = $this.next(\".\" + ew.queryBuilderErrorClass).empty();\r\n            validators == null ? void 0 : validators.forEach == null ? void 0 : validators.forEach(validator => {\r\n              let err = validator(this);\r\n\r\n              if ($__default.default.isObject(err)) {\r\n                errors++;\r\n                $invalid.append(\"<span>\" + Object.values(err)[0] + \"</span>\");\r\n              }\r\n            });\r\n            if ($invalid.html()) $this.addClass(\"is-invalid\").one(\"click\", () => $this.removeClass(\"is-invalid\"));\r\n          });\r\n        }\r\n\r\n        return errors ? \"\" : true; // Return error as empty string (errors already set in $invalid)\r\n      }\r\n    };\r\n  } // Apply client side template to a DIV\r\n\r\n  function applyTemplate(divId, tmplId, classId, exportType, tblVar, data, isModal) {\r\n    let args = {\r\n      data: data || {},\r\n      id: divId,\r\n      template: tmplId,\r\n      class: classId,\r\n      export: exportType,\r\n      enabled: true\r\n    };\r\n    $document$1.trigger(\"rendertemplate\", [args]);\r\n\r\n    if (args.enabled) {\r\n      var _parent$querySelector;\r\n\r\n      let parent = isModal ? document.querySelector(\"#ew-modal-dialog.show\") : document.body,\r\n          // Parent (Modal dialog or document)\r\n      template = parent == null ? void 0 : (_parent$querySelector = parent.querySelector(\"#\" + tmplId)) == null ? void 0 : _parent$querySelector.content;\r\n      if (!template) return;\r\n      template.querySelectorAll(\".ew-slot\").forEach(el => {\r\n        let id = el.name || el.id,\r\n            subtmpl = parent.querySelector(\"#\" + id); // Find in parent in case Custom Template in modal dialog\r\n\r\n        if (subtmpl != null && subtmpl.content) {\r\n          if (el.dataset.rowspan > 1) Array.prototype.slice.call(subtmpl.content.childNodes).forEach(node => node.rowSpan = el.dataset.rowspan);\r\n          el.replaceWith(subtmpl.content.cloneNode(true));\r\n        } else {\r\n          el.remove();\r\n        }\r\n      });\r\n\r\n      if ($__default.default.views) {\r\n        let textContent = template.textContent,\r\n            hasTag = textContent.includes(\"{{\") && textContent.includes(\"}}\");\r\n\r\n        if (!hasTag) {\r\n          let selector = ew.jsRenderAttributes.map(attr => \"[\" + attr + \"*='{{'][\" + attr + \"*='}}']\").join(\",\");\r\n          hasTag = template.querySelector(selector);\r\n        }\r\n\r\n        if (hasTag) {\r\n          // Includes JsRender template\r\n          let scripts = Array.prototype.slice.call(template.querySelectorAll(\"script\")); // Extract scripts\r\n\r\n          scripts.forEach(item => item.remove());\r\n          let div = document.createElement(\"div\");\r\n          div.appendChild(template);\r\n          let html = div.innerHTML.replace(/{{([^}]+)}}/g, m => htmlDecode(m)),\r\n              // HTML-decode comparison operators\r\n          tmpl = $__default.default.templates(html);\r\n          parent.querySelector(\"#\" + divId).innerHTML = tmpl.render(args.data, ew.jsRenderHelpers);\r\n          scripts.forEach(item => document.body.appendChild(item)); // Add scripts\r\n        } else {\r\n          parent.querySelector(\"#\" + divId).appendChild(template);\r\n        }\r\n      } else {\r\n        parent.querySelector(\"#\" + divId).appendChild(template);\r\n      }\r\n    }\r\n\r\n    if (exportType && exportType != \"print\") // Export custom template with charts\r\n      exportCustom(divId, exportType, tblVar); // Note: Use classId as fileName\r\n  } // Export custom\r\n\r\n  function exportCustom(divId, exportType, tblVar) {\r\n    var _div$children$;\r\n\r\n    let div = document.getElementById(divId);\r\n    if ((_div$children$ = div.children[0]) != null && _div$children$.matches(\"div[id^=ct_]\")) // Custom template, remove first div tag\r\n      div = div.children[0];\r\n    let data = {\r\n      customexport: exportType,\r\n      data: div.innerHTML,\r\n      [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n      [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN,\r\n      ...getchartParams()\r\n    };\r\n    if (exportType == \"email\") exportEmail(tblVar, mergeSearchParams(currentUrl.searchParams, data)); // Merge data with email form data in current URL parameters\r\n    else fileDownload(getApiUrl([ew.API_EXPORT_ACTION, exportType, tblVar]), data);\r\n  } // Toggle group\r\n\r\n  function toggleGroup(el) {\r\n    var $el = $__default.default(el),\r\n        $tr = $el.closest(\"tr\"),\r\n        selector = \"tr\",\r\n        level;\r\n\r\n    for (var i = 1; i <= 6; i++) {\r\n      var idx = i == 1 ? \"\" : \"-\" + i;\r\n      var data = $tr.data(\"group\" + idx);\r\n\r\n      if ($__default.default.isValue(data)) {\r\n        level = i;\r\n        if (data != \"\") selector += \"[data-group\" + idx + \"='\" + String(data).replace(/'/g, \"\\\\'\") + \"']\";\r\n      }\r\n    }\r\n\r\n    if ($el.hasClass(\"ew-rpt-grp-hide\")) {\r\n      // Show\r\n      $__default.default(selector).slice(1).removeClass(\"ew-rpt-grp-hide-\" + level);\r\n      $el.removeClass(\"ew-rpt-grp-hide\");\r\n    } else {\r\n      // Hide\r\n      $__default.default(selector).slice(1).addClass(\"ew-rpt-grp-hide-\" + level);\r\n      $el.addClass(\"ew-rpt-grp-hide\");\r\n    }\r\n  } // Check if boolean value is true\r\n\r\n  function convertToBool(value) {\r\n    return value && [\"1\", \"y\", \"t\", \"true\"].includes(String(value).toLowerCase());\r\n  } // Check if element value changed\r\n\r\n  function valueChanged(fobj, infix, fld, bool) {\r\n    let el = getElement(\"x\" + infix + \"_\" + fld, fobj),\r\n        oldEl = getElement(\"o\" + infix + \"_\" + fld, fobj),\r\n        // Hidden element\r\n    fnEl = getElement(\"fn_x\" + infix + \"_\" + fld, fobj); // Hidden element\r\n\r\n    if ((el == null ? void 0 : el.type) == \"hidden\" && !oldEl) // For example, detail key\r\n      return false;\r\n    if (!oldEl && (!el || Array.isArray(el) && el.length == 0)) return false;\r\n\r\n    if (oldEl && el) {\r\n      if (bool) {\r\n        if (convertToBool(getOptionValue(oldEl)) === convertToBool(getOptionValue(el))) return false;\r\n      } else {\r\n        let oldValue = getOptionValue(oldEl),\r\n            newValue = fnEl ? getOptionValue(fnEl) : getOptionValue(el);\r\n        if (oldValue == newValue) return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  } // Set language\r\n\r\n  function setLanguage(el) {\r\n    let val = el.value || el.dataset.language;\r\n    if (!val) return false;\r\n    let currentUrl = new URL(window.location);\r\n    currentUrl.searchParams.set(\"language\", val);\r\n    window.location = sanitizeUrl(currentUrl.toString());\r\n    return false;\r\n  }\r\n  /**\r\n   * Submit action\r\n   *\r\n   * @param {MouseEvent} e - Mouse event\r\n   * @param {Object} args - Arguments\r\n   * @param {HTMLElement} args.f - HTML form (default is the form of the source element) (for backward compatibility only)\r\n   * @param {string} args.url - URL to which the request is sent (default is current page) (for backward compatibility only)\r\n   * @param {Object} args.key - Key as object (for single record only)\r\n   * @param {string|Object} args.msg - Message or Swal config\r\n   * @param {string} args.action - Custom action name\r\n   * @param {string} args.select - \"single\"|\"s\" (single record) or \"multiple\"|\"m\" (multiple records, default)\r\n   * @param {string} args.method - \"ajax\"|\"a\" (Ajax by HTTP POST) or \"post\"|\"p\" (HTTP POST by HTML form, default)\r\n   * @param {Object} args.data - Object of user data that is sent to the server\r\n   * @param {string|callback|Object} success - Function to be called if the request succeeds, or settings for jQuery.ajax() (for Ajax only)\r\n   * @returns\r\n   */\r\n\r\n  function submitAction(e, args) {\r\n    var _window$msg;\r\n\r\n    let el = e.currentTarget,\r\n        f = args.f || el.form || el.closest(\"form\"),\r\n        $f = $__default.default(f),\r\n        key = args.key,\r\n        action = args.action,\r\n        url = args.url || currentPage(),\r\n        msg = args.msg,\r\n        data = args.data,\r\n        success = args.success,\r\n        isPostBack = !args.method || sameText(args.method[0], \"p\"),\r\n        isMultiple = !args.select && !args.key || args.select && sameText(args.select[0], \"m\");\r\n\r\n    if ((isMultiple || isPostBack) && !f) {\r\n      _alert(ew.language.phrase(\"NoHtmlForm\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    if (isMultiple && !keySelected(f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    let _success = function (result) {\r\n      showMessage(result);\r\n    };\r\n\r\n    let _append = function (name, value) {\r\n      let $input = $f.find(\"input[type=hidden][name='\" + name + \"']\");\r\n      if ($input[0]) // Hidden tag exists\r\n        $input.val(value); // Set value\r\n      else // Hidden tag does not exist, add one\r\n        $__default.default(\"<input>\").attr({\r\n          type: \"hidden\",\r\n          name,\r\n          value\r\n        }).appendTo($f);\r\n    };\r\n\r\n    let _submit = function (value) {\r\n      if (isPostBack && f) {\r\n        // Post back by form\r\n        if (action) {\r\n          // Action\r\n          _append(\"action\", action); // Set action\r\n\r\n        }\r\n\r\n        if (!$__default.default.isUndefined(value)) _append(\"actionvalue\", value); // Set action value\r\n\r\n        if ($__default.default.isObject(data)) {\r\n          // User data\r\n          for (const [name, value] of Object.entries(data)) _append(name, value);\r\n        }\r\n\r\n        if (!isMultiple && $__default.default.isObject(key)) {\r\n          // Key\r\n          for (const [name, value] of Object.entries(key)) _append(name, value);\r\n        }\r\n\r\n        if (parseUrl(url).pathname != currentUrl.pathname) // Do not use refresh if post to another page\r\n          $f.off(\"submit.ew\");\r\n        $f.prop({\r\n          action: url,\r\n          method: \"post\"\r\n        }).trigger(\"submit\");\r\n      } else {\r\n        // Ajax\r\n        data = new URLSearchParams(data); // User data\r\n\r\n        if (action) {\r\n          // Action\r\n          data.set(\"action\", action);\r\n          data.set(\"ajax\", action);\r\n          $f.find(\"#action\").remove(); // Remove action in form\r\n        }\r\n\r\n        if (!$__default.default.isUndefined(value)) data.set(\"actionvalue\", value); // User input value\r\n\r\n        data = mergeSearchParams(data, $f.serialize()); // Form data including key_m[]\r\n\r\n        if (!isMultiple && $__default.default.isObject(key)) // Key\r\n          data = mergeSearchParams(data, key);\r\n        if (success && $__default.default.isString(success)) success = window[success];\r\n        let settings = $__default.default.isObject(success) ? success : {};\r\n        settings.data = data.toString();\r\n        settings.method || (settings.method = \"POST\");\r\n        settings.success || (settings.success = isFunction$1(success) ? success : _success);\r\n        $__default.default.ajax(url, settings);\r\n      }\r\n    };\r\n\r\n    msg = $__default.default.isString(msg) ? (_window$msg = window[msg]) != null ? _window$msg : msg : msg; // Get config object if available\r\n\r\n    msg ? _prompt(msg).then(result => result.isDismissed || _submit(result.value)) : _submit();\r\n    return false;\r\n  }\r\n  /**\r\n   * Get charts parameters as object\r\n   *\r\n   * @returns string\r\n   */\r\n\r\n  function getchartParams() {\r\n    let charts = Array.from(Object.entries(window.exportCharts)).map(_ref => {\r\n      let [id, chart] = _ref;\r\n      return {\r\n        chartEngine: \"Chart.js\",\r\n        streamType: \"base64\",\r\n        stream: chart.toBase64Image(),\r\n        fileName: id + \".png\"\r\n      };\r\n    });\r\n    return charts.length ? {\r\n      charts: JSON.stringify(charts)\r\n    } : null;\r\n  }\r\n  /**\r\n   * Export with charts, selected records and/or Custom Template (non-API)\r\n   *\r\n   * @param {MouseEvent|HTMLFormElement} args.evt - Event or HTML form\r\n   * @param {string} args.url - Form action\r\n   * @param {string} args.export - Export type\r\n   * @param {boolean} args.custom - Use Custom Template\r\n   * @param {boolean} args.exportSelected - Selected records only\r\n   * @param {HTMLFormElement} args.emailForm - email form object\r\n   * @returns false\r\n   */\r\n\r\n  async function _export(args) {\r\n    let {\r\n      evt,\r\n      url,\r\n      export: type,\r\n      custom,\r\n      exportSelected,\r\n      emailForm\r\n    } = args,\r\n        f = evt.currentTarget.form;\r\n    exportSelected && (exportSelected = f && !!f.querySelector(\"input[type=checkbox][name='key_m[]']\"));\r\n\r\n    if (exportSelected && !keySelected(f)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    let $f = f ? $__default.default(f) : $__default.default('<form class=\"ew-export-form\" method=\"post\"></form>').appendTo($body),\r\n        target = $f.attr(\"target\"),\r\n        action = $f.attr(\"action\"),\r\n        postParams = [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]]; // Export data\r\n\r\n    try {\r\n      if (custom) {\r\n        var _document$querySelect;\r\n\r\n        // Use Custom Template (chart data to be retrieved later in iframe)\r\n        document.body.style.cursor = \"wait\";\r\n        let name = \"ew-export-frame\";\r\n        url = setSearchParams(url, {\r\n          export: type,\r\n          custom: 1\r\n        }, $__default.default(emailForm).serialize()); // Make sure parameters include \"export=type&custom=1\"\r\n\r\n        (_document$querySelect = document.querySelector(\"iframe[name='\" + name + \"']\")) == null ? void 0 : _document$querySelect.remove();\r\n        let $iframe = $__default.default(\"<iframe>\").attr(\"name\", name).addClass(\"d-none\").appendTo($body);\r\n        $f.attr({\r\n          action: url,\r\n          target: name\r\n        }); // Pass all data including email form data from URL to the iframe by URL parameters\r\n\r\n        postParams.forEach(_ref2 => {\r\n          let [name, value] = _ref2;\r\n          return $f.find(\"input[name=\\\"\" + name + \"\\\"]\").val(value)[0] || $__default.default(\"<input>\").attr({\r\n            type: \"hidden\",\r\n            name,\r\n            value\r\n          }).appendTo($f);\r\n        });\r\n        $iframe.one(\"load\", () => document.body.style.cursor = \"default\").one(\"load\", () => $f.attr({\r\n          action,\r\n          target\r\n        })); // Reset\r\n\r\n        $f.trigger(\"submit\");\r\n      } else {\r\n        // No Custom Template\r\n        url = setSearchParam(url, \"export\", type); // Make sure URL parameters include \"export=type\"\r\n\r\n        if (type == \"print\") $f.attr(\"action\", url).trigger(\"submit\"); // Submit the form directly\r\n        else fileDownload(url, mergeSearchParams($f.serialize(), getchartParams()));\r\n      }\r\n    } finally {\r\n      f || $f.remove();\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Remove spaces\r\n   * @param {string} value - Value\r\n   * @returns {string}\r\n   */\r\n\r\n  function removeSpaces(value) {\r\n    return /^(<(p|br)\\/?>(&nbsp;)?(<\\/p>)?)?$/i.test(value.replace(/\\s/g, \"\")) ? \"\" : value;\r\n  }\r\n  /**\r\n   * Check if hidden text area (HTML editor)\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isHiddenTextArea(el) {\r\n    var $el = $__default.default(el);\r\n    return $el.is(\":hidden\") && $el.data(\"editor\");\r\n  }\r\n  /**\r\n   * Check if modal lookup\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isModalLookup(el) {\r\n    var _el$dataset;\r\n\r\n    return el == null ? void 0 : (_el$dataset = el.dataset) == null ? void 0 : _el$dataset.modalLookup;\r\n  }\r\n  /**\r\n   * Check if filter\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isFilter(el) {\r\n    var _el$dataset2;\r\n\r\n    return el == null ? void 0 : (_el$dataset2 = el.dataset) == null ? void 0 : _el$dataset2.filter;\r\n  }\r\n  /**\r\n   * Check if hidden textbox (Auto-Suggest)\r\n   * @param {HTMLElement|jQuery} el - HTML element or jQuery object\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isAutoSuggest(el) {\r\n    var $el = $__default.default(el);\r\n    return $el.is(\":hidden\") && $el.data(\"autosuggest\");\r\n  }\r\n  /**\r\n   * Check if Select2\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isSelect2(el) {\r\n    return el == null ? void 0 : el.matches == null ? void 0 : el.matches(\"select.select2-hidden-accessible\");\r\n  }\r\n  /**\r\n   * Check if native selection list (select-one)\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isNativeSelectOne(el) {\r\n    return (el == null ? void 0 : el.matches == null ? void 0 : el.matches(\"select:not(.select2-hidden-accessible)\")) && el.type == \"select-one\";\r\n  }\r\n  /**\r\n   * Check if textbox\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isTextbox(el) {\r\n    return (el == null ? void 0 : el.matches == null ? void 0 : el.matches(\"input:not([type=checkbox]):not([type=radio])\")) && !isAutoSuggest(el);\r\n  }\r\n  /**\r\n   * Check if boolean checkbox\r\n   * @param {HTMLElement} el - HTML element\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function isBooleanCheckbox(el) {\r\n    return el == null ? void 0 : el.matches == null ? void 0 : el.matches(\"input[type=checkbox][data-boolean]\");\r\n  }\r\n  /**\r\n   * Clear error message\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el - HTML element(s) or jQuery\r\n   */\r\n\r\n  function clearError(el) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      let typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    }\r\n\r\n    $__default.default(el).closest(fieldContainerSelector).find(\".invalid-feedback\").html(\"\");\r\n  }\r\n  /**\r\n   * Show error message\r\n   * @param {Form} frm Form object\r\n   * @param {HTMLElement|HTMLElement[]|jQuery} el - HTML element(s) or jQuery\r\n   * @param {string} msg - Error message\r\n   * @param {boolean} focus - Set focus\r\n   */\r\n\r\n  function onError(frm, el, msg, focus) {\r\n    if (el.jquery) {\r\n      // el is jQuery object\r\n      let typ = el.attr(\"type\");\r\n      el = typ == \"checkbox\" || typ == \"radio\" ? el.get() : el[0];\r\n    } else if (el instanceof Field) {\r\n      // el is Field object\r\n      el = el.element;\r\n    }\r\n\r\n    $__default.default(el).closest(fieldContainerSelector).find(\".invalid-feedback\").append(\"<p>\" + msg + \"</p>\");\r\n    if (focus) setFocus(el);\r\n    frm == null ? void 0 : frm.makeVisible(el);\r\n    return false;\r\n  }\r\n  /**\r\n   * Set focus\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   * @param {Object} options - Focus options\r\n   */\r\n\r\n  function setFocus(obj, options) {\r\n    if (!obj) return;\r\n    var $obj = $__default.default(obj);\r\n    if (isHidden($obj)) return;\r\n\r\n    if (isHiddenTextArea(obj)) {\r\n      // HTML editor\r\n      return $obj.data(\"editor\").focus();\r\n    } else if (!obj.options && obj.length) {\r\n      // Radio/Checkbox list\r\n      obj = $obj[0];\r\n    } else if (isAutoSuggest(obj)) {\r\n      // Auto-Suggest\r\n      obj = obj.input;\r\n    }\r\n\r\n    obj.focus(options);\r\n  }\r\n  /**\r\n   * Set invalid\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   */\r\n\r\n  function setInvalid(obj) {\r\n    if (!obj) return;\r\n    let $obj = $__default.default(obj);\r\n    if (isHidden($obj)) return;\r\n    if (!obj.options && obj.length) // Radio/Checkbox list\r\n      obj = $obj[0];\r\n\r\n    let $p = $obj.closest(fieldContainerSelector),\r\n        reset = () => $p.find(\".is-invalid\").removeClass(\"is-invalid\");\r\n\r\n    if (isAutoSuggest(obj)) {\r\n      $p.find(\".ew-auto-suggest\").removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"click keydown paste\", reset);\r\n    } else if (isHiddenTextArea(obj)) {\r\n      $obj.removeClass(\"is-valid\").addClass(\"is-invalid\");\r\n      $obj.data(\"editor\").instance.once(\"change\", reset);\r\n    } else if (isModalLookup(obj)) {\r\n      $obj.removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"select2:open\", reset);\r\n    } else {\r\n      if ([\"checkbox\", \"radio\"].includes(obj.type)) {\r\n        $obj.removeClass(\"is-valid\").addClass(\"is-invalid\").one(\"click keydown\", reset);\r\n      } else {\r\n        let events = ew.MOBILE_DETECT.version(\"Safari\") && !ew.MOBILE_DETECT.version(\"Chrome\") ? \"change keydown paste\" : \"click keydown paste\"; // Use \"change\" event for Safari\r\n\r\n        $obj.parent().one(events, reset);\r\n        $obj.add($obj.closest(\".input-group\")).removeClass(\"is-valid\").addClass(\"is-invalid\");\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Set valid\r\n   * @param {HTMLElement|HTMLElement[]} obj - HTML element(s)\r\n   */\r\n\r\n  function setValid(obj) {\r\n    if (!obj) return;\r\n    let $obj = $__default.default(obj);\r\n    if (isHidden($obj)) return;\r\n    if (!obj.options && obj.length) // Radio/Checkbox list\r\n      obj = $obj[0];\r\n\r\n    let $p = $obj.closest(fieldContainerSelector),\r\n        reset = () => $p.find(\".is-valid\").removeClass(\"is-valid\");\r\n\r\n    if (isAutoSuggest(obj)) {\r\n      $p.find(\".ew-auto-suggest\").removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"click keydown paste\", reset);\r\n    } else if (isHiddenTextArea(obj)) {\r\n      $obj.removeClass(\"is-invalid\").addClass(\"is-valid\");\r\n      $obj.data(\"editor\").instance.once(\"change\", reset);\r\n    } else if (isModalLookup(obj)) {\r\n      $obj.removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"select2:open\", reset);\r\n    } else {\r\n      if ([\"checkbox\", \"radio\"].includes(obj.type)) {\r\n        $obj.removeClass(\"is-invalid\").addClass(\"is-valid\").one(\"click keydown\", reset);\r\n      } else {\r\n        let events = ew.MOBILE_DETECT.version(\"Safari\") && !ew.MOBILE_DETECT.version(\"Chrome\") ? \"change keydown paste\" : \"click keydown paste\"; // Use \"change\" event for Safari\r\n\r\n        $obj.parent().one(events, reset);\r\n        $obj.add($obj.closest(\".input-group\")).removeClass(\"is-invalid\").addClass(\"is-valid\");\r\n      }\r\n    }\r\n  } // Check if object has value\r\n\r\n  function hasValue(obj) {\r\n    return getOptionValue(obj) != \"\";\r\n  } // Check if object value is a masked password\r\n\r\n  function isMaskedPassword(obj) {\r\n    var val = $__default.default(obj).val();\r\n    return val == null ? void 0 : val.match(/^\\*+$/);\r\n  } // Sort by field\r\n\r\n  function sort(e, dataset) {\r\n    let {\r\n      sortUrl: url,\r\n      sortType: type,\r\n      context,\r\n      ajax\r\n    } = dataset;\r\n    if (e.shiftKey && !e.ctrlKey) url = setSearchParams(url, {\r\n      cmd: \"resetsort\"\r\n    });else if (type == 2 && e.ctrlKey) url = setSearchParams(url, {\r\n      ctrl: \"1\"\r\n    });\r\n    if (convertToBool(ajax)) refresh(fetch(setLayout(url, false)), context);else window.location = sanitizeUrl(url);\r\n    return false;\r\n  } // Open table header filter by field\r\n\r\n  function filter(e) {\r\n    let data = e.currentTarget.dataset;\r\n    $__default.default(\"select[data-select2-id='f\" + data.table + \"srch_\" + data.field + \"']\").select2(\"open\");\r\n  }\r\n  /**\r\n   * Scroll an element into view\r\n   */\r\n\r\n  function scrollIntoView(el) {\r\n    var _OverlayScrollbars;\r\n\r\n    let container = el == null ? void 0 : el.closest(\".os-host\"); // Check OverlayScrollbars\r\n\r\n    container ? (_OverlayScrollbars = OverlayScrollbars(container)) == null ? void 0 : _OverlayScrollbars.scroll(el) : el == null ? void 0 : el.scrollIntoView();\r\n  }\r\n  /**\r\n   * Inline actions\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLFormElement} args.f - Form of List page\r\n   * @param {string} args.url - URL\r\n   * @param {string} args.ewAction - Inline/Grid action (inline/grid)\r\n   * @param {string} args.action - Inline/Grid action type (insert/cancel/update/add/edit/copy/delete)\r\n   * @returns false\r\n   */\r\n\r\n  async function inlineAction(args) {\r\n    var _args$evt;\r\n\r\n    let $el = $__default.default((_args$evt = args.evt) == null ? void 0 : _args$evt.currentTarget),\r\n        $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\");\r\n    $el.tooltip(\"hide\");\r\n\r\n    if (!$grid[0] && $el.is(\".dropdown-item\")) {\r\n      let $btn = $__default.default(\"#\" + $el.closest(\".dropdown-menu\").attr(\"aria-labelledby\"));\r\n\r\n      if ($btn[0]) {\r\n        $el = $btn;\r\n        $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\");\r\n      }\r\n    }\r\n\r\n    if (!$el[0]) return;\r\n    let {\r\n      url,\r\n      ewAction,\r\n      action\r\n    } = args,\r\n        $f = $grid.find(\"form\"),\r\n        f = $f[0],\r\n        $record = $el.closest(\"tr[data-rowindex], div[data-rowindex]\"),\r\n        key = $record.data(\"key\"),\r\n        curindex = $record.data(\"rowindex\"),\r\n        $detached;\r\n    if (action != \"add\" && (!$grid[0] || !f)) // Allow add with no records => no grid\r\n      return; // Fail\r\n\r\n    let _fail = function (o) {\r\n      !o.status || showToast(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    }; // Always\r\n\r\n    let _always = function () {\r\n      document.body.style.cursor = \"default\";\r\n    }; // Success handler for delete\r\n\r\n    let _deleted = async function (response) {\r\n      if (!(response instanceof Response)) // Inline actions only\r\n        return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json();\r\n\r\n        if (result != null && result.success) {\r\n          $record.remove();\r\n          showToast(ew.language.phrase(\"DeleteSuccess\"), \"success\");\r\n        } else {\r\n          showToast(getError(result) || ew.language.phrase(\"DeleteFailed\"));\r\n        }\r\n      } else {\r\n        _alert(await response.text());\r\n      }\r\n    }; // Disable inline buttons\r\n\r\n    let _disableInlineButtons = () => $__default.default(\".ew-list-options, .ew-list-option-body\").find(\"[data-ew-action='inline'][data-action='add'],[data-ew-action='inline'][data-action='copy'],[data-ew-action='inline'][data-action='edit']\").addClass(\"disabled\"); // Enable inline buttons\r\n\r\n    let _enableInlineButtons = () => $__default.default(\".ew-list-options, .ew-list-option-body\").find(\"[data-ew-action='inline'][data-action='add'],[data-ew-action='inline'][data-action='copy'],[data-ew-action='inline'][data-action='edit']\").removeClass(\"disabled\"); // Get table\r\n\r\n    let _getTable = () => $grid.find(\".ew-grid-middle-panel .ew-table\")[0]; // Update row index\r\n\r\n    let _updateRowIndexes = tbl => {\r\n      let j = 0;\r\n      Array.from(tbl.rows).forEach(row => row.dataset.rowindex = row.dataset.rowindex === \"0\" ? \"0\" : String(j++)); // Update row index if not Inline-Add/Copy row\r\n    }; // Success handler for inline actions\r\n\r\n    let _success = async function (response) {\r\n      if (!(response instanceof Response)) // Inline actions only\r\n        return;\r\n      let text = await response.clone().text(),\r\n          $data = $__default.default(\"<div>\" + text + \"</div>\"),\r\n          $row = $data.find(\"tr[data-rowindex=0], div[data-rowindex=0]\" + (key ? \", tr[data-key='\" + key + \"'], div[data-key='\" + key + \"']\" : \"\")).filter(\"[data-rowtype=2], [data-rowtype=3]\"),\r\n          // Find Inline-Add first\r\n      inline = $row.data(\"inline\"),\r\n          rowtype = $row.data(\"rowtype\"),\r\n          rowindex = inline && rowtype == 2\r\n      /* Inline-Add */\r\n      ? 0 : inline && rowtype == 3\r\n      /* Inline-Edit */\r\n      ? 1 : $row.data(\"rowindex\"),\r\n          $els = $row.add($data.find(\"script[data-rowindex=\" + rowindex + \"]\")); // Add script for the row\r\n\r\n      if ([\"add\", \"copy\", \"edit\"].includes(action) && !$els[0]) // Edit row not found => Error\r\n        return showToast(text);\r\n\r\n      if ([\"add\", \"copy\"].includes(action)) {\r\n        // Inline-Add/Copy\r\n        if (document.querySelector(\"main.ew-no-record\") && $data.find(\"main:not(.ew-no-record)\")[0]) {\r\n          // No existing record, new Inline-Add/Copy row found\r\n          await refresh(Promise.resolve(response));\r\n        } else {\r\n          if ($row.is(\"TR\")) {\r\n            // Table\r\n            let tbl = _getTable();\r\n\r\n            if (tbl.matches(\".ew-infinite-scroll-table\")) $__default.default(tbl.tBodies).last().append($els);else $__default.default(tbl.tBodies).last().prepend($els);\r\n\r\n            _updateRowIndexes(tbl); // Update row index\r\n\r\n            setupTable(tbl, true);\r\n          } else {\r\n            $grid.find(\".ew-multi-column-row\").append($els);\r\n          }\r\n\r\n          _disableInlineButtons();\r\n        }\r\n\r\n        ew.initPage($__default.default.Event({\r\n          type: \"load.ew\",\r\n          target: $grid[0]\r\n        }));\r\n        forms.get(f.id).tryFocus();\r\n        scrollIntoView($grid.find(\"[data-rowtype=2]\")[0]);\r\n      } else if (action == \"edit\") {\r\n        // Inline-Edit\r\n        $detached = $record.replaceWith($els); // Replace current row\r\n\r\n        $grid.data(\"detached\", $detached); // Save the detached row\r\n\r\n        if ($row.is(\"TR\")) // Table\r\n          setupTable(_getTable(), true);\r\n\r\n        _disableInlineButtons();\r\n\r\n        ew.initPage($__default.default.Event({\r\n          type: \"load.ew\",\r\n          target: $grid[0]\r\n        }));\r\n        forms.get(f.id).tryFocus();\r\n        scrollIntoView($grid.find(\"[data-rowtype=3]\")[0]);\r\n      }\r\n    }; // Submit success handler for inline actions\r\n\r\n    let _submitSuccess = async function (response) {\r\n      if (!(response instanceof Response)) return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json(),\r\n            error = getError(result);\r\n\r\n        if (error) {\r\n          showToast(error);\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (response.headers.get(\"Infinite-Scroll\")) {\r\n        // Infinite scroll\r\n        let text = await response.text(),\r\n            $data = $__default.default(\"<div>\" + text + \"</div>\"),\r\n            $main = $data.find(\".main\"),\r\n            $row;\r\n\r\n        if ([\"insert\", \"update\"].includes(action)) {\r\n          $row = $data.find(\"tr[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"], div[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"]\"); // Row(s) with ROWTYPE_VIEW\r\n\r\n          if (!$row[0]) return; // Affected row(s) not found\r\n\r\n          if (action == \"insert\") // Inline-Add/Copy\r\n            $grid.find(\"tr[data-rowtype=\" + ew.ROWTYPE_ADD + \"], div[data-rowtype=\" + ew.ROWTYPE_ADD + \"]\").replaceWith($row[0]); // Replace add row\r\n          else if (action == \"update\") // Inline-Edit/Update\r\n            $row.get().forEach(row => $grid.find(\"tr[data-key='\" + row.dataset.key + \"'], div[data-key='\" + row.dataset.key + \"']\").replaceWith(row)); // Replace row(s) edited/updated\r\n        } else if ([\"add\", \"edit\", \"multiedit\"].includes(action)) {\r\n          // Grid-Add/Grid-Edit/Multi-Edit\r\n          $row = $data.find(\"tr[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"], div[data-rowindex][data-rowtype=\" + ew.ROWTYPE_VIEW + \"]\"); // Row(s) with ROWTYPE_VIEW\r\n\r\n          if ([\"edit\", \"multiedit\"].includes(action)) // Grid-Edit/Multi-Edit\r\n            $row.get().forEach(row => $grid.find(\"tr[data-key='\" + row.dataset.key + \"'], div[data-rowtype='\" + row.dataset.key + \"']\").replaceWith(row));else if (action == \"add\") // Grid-Add\r\n            $grid.find(\".ew-grid-middle-panel .ew-table > tbody:last\").append($row); // Append to bottom\r\n        }\r\n\r\n        let tbl = _getTable();\r\n\r\n        _updateRowIndexes(tbl); // Update row index\r\n\r\n        setupTable(tbl, true);\r\n        showMessage({\r\n          target: $data\r\n        }); // Show message, if any\r\n\r\n        ew.initPage($__default.default.Event({\r\n          type: \"load.ew\",\r\n          target: $main[0]\r\n        }));\r\n      } else {\r\n        // Use Ajax actions\r\n        await refresh(Promise.resolve(response));\r\n      }\r\n\r\n      let returnUrl = response.headers.get(\"Return-Url\"); // Check if return URL exists\r\n\r\n      if (returnUrl && [\"inline\", \"modal\"].includes(args.ewAction) && !samePath(parseUrl(returnUrl).pathname, currentUrl.pathname)) $grid.find(\"[data-ew-action=modal][data-url='\" + returnUrl + \"'], [data-ew-action=inline][data-url='\" + returnUrl + \"']\").trigger(\"click\");\r\n    };\r\n\r\n    if (ewAction == \"inline\") {\r\n      if (action == \"cancel\") {\r\n        if (curindex == \"0\") {\r\n          // Cancel Inline-Add/Copy\r\n          $record.remove();\r\n        } else {\r\n          var _$grid$data;\r\n\r\n          // Cancel Inline-Edit\r\n          (_$grid$data = $grid.data(\"detached\")) == null ? void 0 : _$grid$data.replaceAll($record);\r\n        }\r\n\r\n        _enableInlineButtons();\r\n      } else if (f && [\"insert\", \"update\"].includes(action)) {\r\n        // Post form\r\n        let frm = forms.get(f.id);\r\n\r\n        if (await frm.canSubmit(args.evt)) {\r\n          // Validate\r\n          document.body.style.cursor = \"wait\";\r\n\r\n          let body = setSearchParams($f.serialize(), {\r\n            action\r\n          }),\r\n              // Set up action\r\n          p = _fetch(setSearchParams(url, {\r\n            rnd: random()\r\n          }), {\r\n            method: \"POST\",\r\n            body\r\n          }).catch(_fail).finally(() => {\r\n            frm.enableForm();\r\n\r\n            _always();\r\n          });\r\n\r\n          if (frm.submitWithFetch) {\r\n            let args = {\r\n              form: f,\r\n              result: p\r\n            },\r\n                evt = $__default.default.Event(\"aftersubmit\", {\r\n              originalEvent: args.evt\r\n            });\r\n            frm.trigger(evt, [args]);\r\n          } else {\r\n            p.then(_submitSuccess).finally(_enableInlineButtons);\r\n          }\r\n        }\r\n      } else if (action == \"delete\") {\r\n        // Inline-Delete\r\n        if (!key) {\r\n          // No key from the clicked row => Multi-Delete\r\n          $record = $grid.find(\"input[type=checkbox][name='key_m[]']:checked\").closest(\"tr[data-rowindex], div[data-rowindex]\"); // Update $record\r\n\r\n          if (!$record[0]) {\r\n            _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n            return false;\r\n          }\r\n        }\r\n\r\n        _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n          if (result) {\r\n            document.body.style.cursor = \"wait\";\r\n\r\n            let method = key ? \"GET\" : \"POST\",\r\n                body = deleteSearchParam($f.serialize(), \"action\"),\r\n                frm = forms.get(f.id),\r\n                p = _fetch(setSearchParams(url, {\r\n              action: \"delete\",\r\n              rnd: random()\r\n            }), {\r\n              method,\r\n              body\r\n            }).catch(_fail).finally(() => {\r\n              frm.enableForm();\r\n\r\n              _always();\r\n            });\r\n\r\n            if (frm.submitWithFetch) {\r\n              let args = {\r\n                form: f,\r\n                result: p\r\n              },\r\n                  evt = $__default.default.Event(\"aftersubmit\", {\r\n                originalEvent: args.evt\r\n              });\r\n              frm.trigger(evt, [args]);\r\n            } else {\r\n              p.then(_deleted);\r\n            }\r\n          }\r\n        });\r\n      } else {\r\n        document.body.style.cursor = \"wait\";\r\n\r\n        _fetch(setSearchParams(url, {\r\n          rnd: random()\r\n        })).then(_success).catch(_fail).finally(_always);\r\n      }\r\n    } else if (ewAction == \"grid\" || ewAction == \"modal\") {\r\n      // Grid-Add/Edit, Modal-Add/Copy/Edit/Update\r\n      if ((ewAction == \"grid\" && action == \"edit\" || ewAction == \"modal\" && [\"multiedit\", \"update\"].includes(action)) && !keySelected(f)) {\r\n        // Grid-Edit and Multi-Edit/Update\r\n        _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n        return false;\r\n      }\r\n\r\n      ew.modalDialogShow({ ...args,\r\n        callback: _submitSuccess\r\n      });\r\n    }\r\n\r\n    return false;\r\n  } // Confirm inline-delete\r\n\r\n  function confirmDelete(el) {\r\n    clickDelete(el);\r\n\r\n    _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n      if (result) {\r\n        if (el.dataset.json && el.href) // Handle JSON response\r\n          ew.modalDialogShow({\r\n            url: setSearchParams(el.href, {\r\n              action: \"delete\"\r\n            }),\r\n            json: true,\r\n            callback: true\r\n          });else if (el.href) window.location = sanitizeUrl(setSearchParams(el.href, {\r\n          action: \"delete\"\r\n        }));else clearDelete(el);\r\n      }\r\n    });\r\n\r\n    return false;\r\n  } // Check if any key selected // PHP\r\n\r\n  function keySelected(f) {\r\n    return !!(f != null && f.querySelector(\"input[type=checkbox][name='key_m[]']:checked\"));\r\n  } // Select all keys\r\n\r\n  function selectAllKeys(cb) {\r\n    selectAll(cb);\r\n    let tbl = cb == null ? void 0 : cb.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    $__default.default(tbl.tBodies).each(function () {\r\n      $__default.default(this.rows).each(function () {\r\n        let $r = $__default.default(this);\r\n        if ($r.is(\":not(.ew-template):not(.ew-table-preview-row)\")) $r.toggleClass(\"table-active ew-table-selected-row\", cb.checked).triggerHandler(\"change\");\r\n      });\r\n    });\r\n  } // Select all related checkboxes in the form\r\n\r\n  function selectAll(cb) {\r\n    if (!(cb != null && cb.form)) return;\r\n    $__default.default(cb.form.elements).filter(\"input[type=checkbox][name^=\" + cb.name + \"_], [type=checkbox][name=\" + cb.name + \"]\").not(cb).not(\":disabled\").prop(\"checked\", cb.checked);\r\n  } // Update selected checkbox\r\n\r\n  function updateSelected(f) {\r\n    return !!(f != null && f.querySelector(\"input[type=checkbox][name^=u_]:checked,input[type=hidden][name^=u_][value='1']\"));\r\n  } // Clear selected rows color\r\n\r\n  function clearSelected(tbl) {\r\n    let rowIndexes = $__default.default(tbl).find(\"input[type=checkbox][name='key_m[]']:checked\").closest(\"[data-rowindex]\").map((i, r) => r.dataset.rowindex).get();\r\n    $__default.default(tbl == null ? void 0 : tbl.rows).filter((i, r) => r.classList.contains(\"table-active\") && !rowIndexes.includes(r.dataset.rowindex)).removeClass(\"table-active ew-table-selected-row\").triggerHandler(\"change\");\r\n  } // Clear all row delete status\r\n\r\n  function clearDelete(el) {\r\n    let tbl = el == null ? void 0 : el.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    let $tr = $__default.default(el).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().removeClass(\"table-active\").triggerHandler(\"change\");\r\n  } // Click single delete link\r\n\r\n  function clickDelete(el) {\r\n    let tbl = el == null ? void 0 : el.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    let $tr = $__default.default(el).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().addClass(\"table-active\").triggerHandler(\"change\");\r\n  } // Select a row\r\n\r\n  function selectKey(e) {\r\n    let chk = e.target,\r\n        tbl = chk == null ? void 0 : chk.closest(\".ew-table\");\r\n    if (!tbl) return;\r\n    clearSelected(tbl);\r\n    let $tr = $__default.default(chk).closest(\".ew-table > tbody > tr\");\r\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function () {\r\n      $__default.default(this).toggleClass(\"table-active ew-table-selected-row\", chk.checked).triggerHandler(\"change\");\r\n    });\r\n    e.stopPropagation();\r\n  }\r\n  /**\r\n   * Setup table\r\n   *\r\n   * @param {number} [index=undefined] Index\r\n   * @param {HTMLTableElement} tbl HTML table element\r\n   * @param {boolean} [force=undefined] Force setup\r\n   * @returns\r\n   */\r\n\r\n  function setupTable() {\r\n    let tbl, force;\r\n\r\n    if ($__default.default.isNumber(arguments[0])) {\r\n      tbl = arguments[1];\r\n    } else if (arguments[0] instanceof HTMLTableElement) {\r\n      tbl = arguments[0];\r\n      force = arguments[1];\r\n    }\r\n\r\n    let $tbl = $__default.default(tbl),\r\n        $rows = $__default.default(tbl.rows);\r\n    if (!tbl || !tbl.rows || !force && tbl.dataset.isset || tbl.tBodies.length == 0) return; // Set selected row color\r\n\r\n    let click = function (e) {\r\n      let $this = $__default.default(this),\r\n          tbl = this.closest(\".ew-table\"),\r\n          $target = $__default.default(e.target);\r\n      if (!tbl || $target.hasClass(\"btn\") || $target.hasClass(\"ew-preview-btn\") || $target.is(\":input\")) return;\r\n      clearSelected(tbl); // Clear all other selected rows\r\n\r\n      $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().toggleClass(\"table-active\").triggerHandler(\"change\");\r\n    };\r\n\r\n    let n = $rows.filter(\"[data-rowindex=1]\").length || $rows.filter(\"[data-rowindex=0]\").length || 1,\r\n        // Alternate color every n rows\r\n    rows = $rows.filter(\":not(.ew-template)\").each(function () {\r\n      $__default.default(this.cells).removeClass(\"ew-table-last-row\").last().addClass(\"ew-table-last-col\"); // Cell of last column\r\n    }).get();\r\n\r\n    if (rows.length >= n) {\r\n      let div = $tbl.parentsUntil(\".ew-grid\", \".\" + ew.RESPONSIVE_TABLE_CLASS)[0];\r\n      rows[rows.length - 1].classList.add(\"border-bottom-0\"); // Last row\r\n\r\n      rows.splice(n * -1).forEach((row, i) => Array.from(row.cells).filter(cell => cell.rowSpan == i + 1) // Cell of last row\r\n      .forEach(cell => {\r\n        cell.classList.add(\"ew-table-last-row\");\r\n        cell.classList.toggle(\"ew-table-border-bottom\", (div == null ? void 0 : div.clientHeight) > tbl.offsetHeight);\r\n      }));\r\n    }\r\n\r\n    let form = tbl.closest(\"form\"),\r\n        attach = form && $__default.default(form.elements).filter(\"input#action:not([value^=grid])\").length > 0;\r\n    $__default.default(tbl.tBodies[tbl.tBodies.length - 1].rows) // Use last TBODY (avoid Opera bug)\r\n    .filter(\":not(.ew-template):not(.ew-table-preview-row)\").each(function () {\r\n      let $r = $__default.default(this);\r\n      if (attach && !$r.data(\"isset\")) $r.on(\"click\", click).data(\"isset\", true);\r\n    });\r\n    setupGrid(tbl.closest(\".ew-grid\"), force);\r\n    tbl.dataset.isset = \"true\";\r\n  } // Setup grid\r\n\r\n  function setupGrid(grid, force) {\r\n    let $grid = $__default.default(grid);\r\n    if (!grid || !force && grid.dataset.isset) return;\r\n    let rowcnt = $grid.find(\"table.ew-table > tbody\").first().children(\"tr:not(.ew-table-preview-row, .ew-template)\").length;\r\n    if (rowcnt == 0 && !grid.querySelector(\".ew-grid-upper-panel, .ew-grid-lower-panel\")) $grid.hide();\r\n\r\n    if ($grid.find(\".ew-grid-middle-panel:visible\").hasClass(ew.RESPONSIVE_TABLE_CLASS) && $grid.width() > $__default.default(\".content\").width()) {\r\n      $grid.addClass(\"d-flex\");\r\n      $grid.closest(\".ew-detail-pages\").addClass(\"d-block\");\r\n      $grid.closest(\".ew-form\").addClass(\"w-100\");\r\n    }\r\n\r\n    grid.dataset.isset = \"true\";\r\n  } // Add a row to grid\r\n\r\n  function addGridRow(el) {\r\n    var _bootstrap$Tooltip$ge2;\r\n\r\n    let grid = el == null ? void 0 : el.closest(\".ew-grid\"),\r\n        $grid = $__default.default(grid),\r\n        $tbl = $grid.find(\"table.ew-table\").last(),\r\n        $p = $tbl.parent(\"div\"),\r\n        $tpl = $tbl.find(\"tr.ew-template\");\r\n    if (!el || !grid || !$tbl[0] || !$tpl[0]) return false;\r\n    let $lastrow = $__default.default($tbl[0].rows).last();\r\n    $tbl.find(\"td.ew-table-last-row\").removeClass(\"ew-table-last-row\");\r\n    let $row = $tpl.clone(true, true).removeClass(\"ew-template\"),\r\n        form = grid.querySelector(\"div.ew-form[id^=f][id$=grid]\") || grid.querySelector(\"form.ew-form[id^=f][id$=list]\") || grid.querySelector(\"form.ew-form[id^=f][id$=grid]\"),\r\n        $form = $__default.default(form),\r\n        suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n        $keycnt = $form.find(\"#\" + ew.FORM_KEY_COUNT_NAME + suffix),\r\n        keycnt = parseInt($keycnt.val(), 10) + 1,\r\n        name = ew.FORM_ROW_ACTION_NAME.replace(/^k_/, \"k\" + keycnt + \"_\") + suffix,\r\n        // name=\"k<n>_action\"\r\n    $els = $tpl.find(\"script:contains('$rowindex$')\").add(\"tr.ew-template + script[data-rowindex='$rowindex$']\"); // Get scripts with rowindex\r\n\r\n    $row.attr({\r\n      \"id\": \"r\" + keycnt + $row.attr(\"id\").substring(2),\r\n      \"data-rowindex\": keycnt\r\n    });\r\n    $row.children(\"td\").each(function () {\r\n      $__default.default(this).find(\"*\").each(function () {\r\n        $__default.default.each(this.attributes, function (i, attr) {\r\n          attr.value = attr.value.replace(/\\$rowindex\\$/g, keycnt); // Replace row index\r\n        });\r\n      });\r\n    });\r\n    let $btn = $row.find(\".ew-icon\").closest(\"a, button\");\r\n    (_bootstrap$Tooltip$ge2 = bootstrap.Tooltip.getInstance($btn[0])) == null ? void 0 : _bootstrap$Tooltip$ge2.dispose();\r\n    $btn.tooltip({ ...ew.tooltipOptions,\r\n      container: \"body\",\r\n      trigger: \"hover\"\r\n    });\r\n    $keycnt.val(keycnt).after($__default.default(\"<input>\").attr({\r\n      type: \"hidden\",\r\n      id: name,\r\n      name: name,\r\n      value: \"insert\"\r\n    }));\r\n    $lastrow.after($row);\r\n    $els.get().forEach(el => addScript(el.text.replace(/\\$rowindex\\$/g, keycnt)));\r\n    let frm = $form.data(\"form\");\r\n    frm == null ? void 0 : frm.initEditors();\r\n    frm == null ? void 0 : frm.initUpload();\r\n    setupTable($tbl[0], true);\r\n    $p.scrollTop($p[0].scrollHeight);\r\n    $tbl.trigger(\"rowadded\", [keycnt]);\r\n    return false;\r\n  } // Delete a row from grid\r\n\r\n  function deleteGridRow(el, infix) {\r\n    var _bootstrap$Tooltip$ge3;\r\n\r\n    (_bootstrap$Tooltip$ge3 = bootstrap.Tooltip.getInstance(el)) == null ? void 0 : _bootstrap$Tooltip$ge3.dispose();\r\n    let grid = el.closest(\".ew-grid, .ew-multi-column-grid\"),\r\n        row = el.closest(\"tr, div[data-rowindex]\"),\r\n        tbl = row == null ? void 0 : row.closest(\".ew-table\"),\r\n        rowidx = parseInt(row == null ? void 0 : row.dataset.rowindex, 10),\r\n        form = (grid == null ? void 0 : grid.querySelector(\"div.ew-form[id^=f][id$=grid]\")) || (grid == null ? void 0 : grid.querySelector(\"form.ew-form[id^=f][id$=list], form.ew-form[id^=f][id$=grid]\")),\r\n        $form = $__default.default(form),\r\n        frm = $form.data(\"form\");\r\n    if (!el || !grid || !row || !tbl || !form || !frm) return false;\r\n    let suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n        keycnt = \"#\" + ew.FORM_KEY_COUNT_NAME + suffix;\r\n\r\n    let _delete = function () {\r\n      row.remove();\r\n      if (grid.classList.contains(\".ew-grid\")) setupTable(tbl, true);\r\n\r\n      if (rowidx > 0) {\r\n        let $keyact = $form.find(\"#k\" + rowidx + \"_action\" + suffix);\r\n\r\n        if ($keyact[0]) {\r\n          $keyact.val($keyact.val() == \"insert\" ? \"insertdelete\" : \"delete\");\r\n        } else {\r\n          $form.find(keycnt).after($__default.default(\"<input>\").attr({\r\n            type: \"hidden\",\r\n            id: \"k\" + rowidx + \"_action\" + suffix,\r\n            name: \"k\" + rowidx + \"_action\" + suffix,\r\n            value: \"delete\"\r\n          }));\r\n        }\r\n      }\r\n\r\n      $__default.default(tbl).trigger(\"rowdeleted\", [rowidx]);\r\n    };\r\n\r\n    if (isFunction$1(frm.emptyRow) && frm.emptyRow(infix)) {\r\n      // Empty row\r\n      _delete();\r\n    } else {\r\n      // Confirm\r\n      _prompt(ew.language.phrase(\"DeleteConfirm\"), result => {\r\n        if (result) _delete();\r\n      });\r\n    }\r\n\r\n    return false;\r\n  } // HTML encode text\r\n\r\n  function htmlEncode(text) {\r\n    return String(text).replace(/&/g, '&amp;').replace(/\\\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n  } // HTML decode text\r\n\r\n  function htmlDecode(text) {\r\n    return String(text).replace(/&amp;/g, '&').replace(/&quot;/g, '\"').replace(/&lt;/g, '<').replace(/&gt;/g, '>');\r\n  } // Get form element(s) as single element or array of radio/checkbox\r\n\r\n  function getElements(el, root) {\r\n    root = !$__default.default.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n\r\n    let $root = root ? $__default.default(root) : $document$1,\r\n        selectors = [],\r\n        getFieldSelector = field => \"[data-field='\" + field + \"']:not(.ew-custom-option):not([name^=y_]):not([data-old])\";\r\n\r\n    if (el instanceof HTMLElement && el.dataset.table && el.dataset.field) {\r\n      // HTML element (e.g. radio/checkbox)\r\n      if (isBooleanCheckbox(el)) return el;\r\n      selectors = [\"[data-table='\" + el.dataset.table + \"']\" + getFieldSelector(el.dataset.field)];\r\n    } else if ($__default.default.isString(el)) {\r\n      let [s1, s2] = el.split(\" \"); // Check if \"<table> <name>\"\r\n\r\n      selectors = s2 ? [\"[data-table='\" + s1 + \"']\" + getFieldSelector(getId(s2))] // \"<table> <name>\", remove []\r\n      : [\"[name='\" + el + \"']:not(.ew-custom-option):not([data-old])\", getFieldSelector(getId(el))]; // \"<name>\" only\r\n    }\r\n\r\n    let selector = [\"input\", \"select\", \"textarea\", \"button\", \"selection-list\"].flatMap(tag => selectors.map(sel => tag + sel)).join(),\r\n        $els = $root.find(selector);\r\n    if ($root.is(\"form.ew-form\") && $root.find(\"div.ew-form\")[0]) // Master/Detail form\r\n      $els = $els.not(\"div.ew-form *\"); // Remove elements of detail tables\r\n\r\n    if ($els.length == 1 && ($els.is(\":not([type=checkbox]):not([type=radio])\") || isBooleanCheckbox($els[0])) || $els.length == 2 && $els.eq(0).is(\"selection-list\") && $els.eq(1).is(\"input[type=hidden]\")) // Polyfill for the ElementInternals\r\n      return $els[0];\r\n    return $els[0] ? $els.get() : null;\r\n  } // Get first element by id/name (not necessarily form element)\r\n\r\n  function getElement(name, root) {\r\n    root = !$__default.default.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\r\n    let selector = \"#\" + name.replace(/([\\$\\[\\]])/g, \"\\\\$1\") + \",[name='\" + name + \"']\";\r\n    return root ? $__default.default(root).find(selector)[0] : $__default.default(selector).first()[0];\r\n  } // Get ancestor by function\r\n\r\n  function getAncestorBy(node, fn) {\r\n    while (node = node.parentNode) {\r\n      var _node;\r\n\r\n      if (((_node = node) == null ? void 0 : _node.nodeType) == 1 && (!fn || fn(node))) return node;\r\n    }\r\n\r\n    return null;\r\n  } // Check if an element is hidden\r\n\r\n  function isHidden(el) {\r\n    var $el = $__default.default(el);\r\n    return $el.css(\"display\") == \"none\" && !$el.is(\"selection-list\") && !$el.closest(\".dropdown-menu\")[0] && !isModalLookup(el) && !isAutoSuggest(el) && !isHiddenTextArea(el) || getAncestorBy(el, node => node.style.display == \"none\" && !node.classList.contains(\"tab-pane\") && !node.classList.contains(\"collapse\")) != null;\r\n  } // Check if same text\r\n\r\n  function sameText(o1, o2) {\r\n    return String(o1).toLowerCase() == String(o2).toLowerCase();\r\n  } // Check if same string\r\n\r\n  function sameString(o1, o2) {\r\n    return String(o1) == String(o2);\r\n  } // Convert to header case\r\n\r\n  function headerCase(str) {\r\n    return !str ? \"\" : String(str).replace(/^[^A-Za-z0-9]*|[^A-Za-z0-9]*$/g, \"\").replace(/([a-z])([A-Z])/g, (m, a, b) => a + \"_\" + b.toLowerCase()).replace(/[^A-Za-z0-9]+|_+/g, \"-\").toLowerCase().replace(/(-?)(\\w+)(-?)/g, (m, a, b, c) => a + b.charAt(0).toUpperCase() + b.slice(1) + c);\r\n  } // Check if same path\r\n\r\n  function samePath(p1, p2) {\r\n    p1 = p1 instanceof URL ? p1.pathname : parseUrl(p1).pathname;\r\n    p2 = p2 instanceof URL ? p2.pathname : parseUrl(p2).pathname;\r\n\r\n    if (p1 != p2 && p1.startsWith(ew.PATH_BASE) && p2.startsWith(ew.PATH_BASE)) {\r\n      p1 = p1.substring(ew.PATH_BASE.length);\r\n      p2 = p2.substring(ew.PATH_BASE.length);\r\n      let ar1 = p1.split(\"/\"),\r\n          ar2 = p2.split(\"/\");\r\n      if (ar1[0] == ar2[0] && ar1[0].match(/(list|view|edit)$/i) || // *list == *list\r\n      ar1[0] == ar2[0] && ar1[1] == ar2[1] && [ew.LIST_ACTION, ew.VIEW_ACTION, ew.EDIT_ACTION].includes(ar1[1])) // xxx/list == xxx/list\r\n        return true;\r\n    }\r\n\r\n    return p1 == p2;\r\n  } // Get element value as array for select-multiple field or else as string\r\n\r\n  function getValue(el, form) {\r\n    let obj = el;\r\n    if ($__default.default.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type)) // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n\r\n    if (!obj) return undefined;\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      return obj.list ? obj.type == \"select-multiple\" ? obj.values : obj.value : $__default.default(obj).val();\r\n    } else if (Array.isArray(obj)) {\r\n      // Radio/Checkbox list or element not found\r\n      return obj.length ? $__default.default(obj).filter(\":checked\").map((i, el) => el.value).get() : undefined;\r\n    } else if (isBooleanCheckbox(obj)) {\r\n      // Single checkbox\r\n      return obj.checked ? obj.value : undefined;\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default.default(obj).data(\"editor\").save();\r\n      return obj.value;\r\n    } else {\r\n      // text/hidden\r\n      return obj.value;\r\n    }\r\n  } // Get existing selected values as an array\r\n\r\n  function getOptionValues(el, form) {\r\n    let obj = el;\r\n    if ($__default.default.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type)) // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n\r\n    if (!obj) return [];\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) {\r\n        return obj.values;\r\n      } else if (isSelect2(obj)) {\r\n        let val = $__default.default(obj).val();\r\n        return Array.isArray(val) ? val : $__default.default.isValue(val) ? [val] : [];\r\n      } else {\r\n        return Array.from(obj.options).filter(option => option.selected && option.value !== \"\").map(option => option.value);\r\n      }\r\n    } else if (Array.isArray(obj) || isBooleanCheckbox(obj)) {\r\n      // Radio/Checkbox list, or single checkbox, or element not found ([])\r\n      return $__default.default(obj).filter(\":checked\").map(function () {\r\n        return this.value;\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default.default(obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      // text/hidden\r\n      return [obj.value];\r\n    }\r\n  } // Get existing selected values as string\r\n\r\n  function getOptionValue(el, form) {\r\n    return getOptionValues(el, form).join(ew.MULTIPLE_OPTION_SEPARATOR);\r\n  } // Get existing text of selected values as an array\r\n\r\n  function getOptionTexts(el, form) {\r\n    let obj = el;\r\n    if ($__default.default.isString(el)) obj = el.split(\" \").length == 2 // Parent field in master table\r\n    ? getElements(el) : getElements(el, form);else if ([\"checkbox\", \"radio\"].includes(el.type)) // Single radio/checkbox\r\n      obj = getElements(el); // Find radio buttons and checkboxes with the same name\r\n\r\n    if (!obj) return [];\r\n\r\n    if (isAutoSuggest(obj)) {\r\n      // AutoSuggest (before obj.options)\r\n      return [obj.input.value];\r\n    } else if (obj.options) {\r\n      // Selection list\r\n      return isSelect2(obj) ? $__default.default(obj).find(\":selected\").map((i, el) => el.innerHTML).get() : Array.from(obj.options).filter(option => option.selected && option.value !== \"\").map(option => option.text);\r\n    } else if (Array.isArray(obj) || isBooleanCheckbox(obj)) {\r\n      // Radio/Checkbox list, or single checkbox, or element not found ([])\r\n      return $__default.default(obj).filter(\":checked\").map(function () {\r\n        return $__default.default(this).parent().text();\r\n      }).get();\r\n    } else if (ew.isHiddenTextArea(obj)) {\r\n      $__default.default(obj).data(\"editor\").save();\r\n      return [obj.value];\r\n    } else {\r\n      return [obj.value];\r\n    }\r\n  } // Clear existing options\r\n\r\n  function clearOptions(obj) {\r\n    if (obj.options) {\r\n      // Selection list\r\n      var lo = obj.type == \"select-multiple\" || // multiple\r\n      obj.hasAttribute(\"data-dropdown\") || // dropdown\r\n      obj.length > 0 && obj.options[0].value != \"\" // non-empty first element\r\n      ? 0 : 1;\r\n\r\n      if (obj.list) {\r\n        obj.removeAll();\r\n        obj.render();\r\n      } else {\r\n        for (var i = obj.length - 1; i >= lo; i--) obj.remove(i);\r\n      }\r\n\r\n      if (isAutoSuggest(obj)) {\r\n        obj.input.value = \"\";\r\n        obj.value = \"\";\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * Get the name or id of an element\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @param {boolean} [remove=true] - Remove square brackets\r\n   * @returns\r\n   */\r\n\r\n  function getId(el, remove) {\r\n    var id = $__default.default.isString(el) ? el : $__default.default(el).attr(\"name\") || $__default.default(el).attr(\"id\"); // Use name first (id may have suffix)\r\n\r\n    return remove !== false ? id.replace(/\\[\\]$/, \"\") : id;\r\n  } // Get display value separator\r\n\r\n  function valueSeparator(index, obj) {\r\n    var sep = $__default.default(obj).data(\"value-separator\");\r\n    return Array.isArray(sep) ? sep[index - 1] : sep || \", \";\r\n  }\r\n  /**\r\n   * Get display value\r\n   *\r\n   * @param {Object} opt - Option being displayed\r\n   * @param {HTMLElment} obj - HTML element\r\n   * @returns {string} Display value\r\n   */\r\n\r\n  function displayValue(opt, obj) {\r\n    return [opt.df, opt.df2, opt.df3, opt.df4].reduce((text, value, i) => {\r\n      let sep = i > 0 ? valueSeparator(i - 1, obj) : \"\";\r\n      return !$__default.default.isUndefined(sep) && $__default.default.isValue(value) && value != \"\" ? text + sep + value : text;\r\n    }, \"\");\r\n  }\r\n  /**\r\n   * Get HTML for a single option\r\n   *\r\n   * @param {*} val - Value of the option\r\n   * @returns {string} HTML\r\n   */\r\n\r\n  function optionHtml(val) {\r\n    return ew.OPTION_HTML_TEMPLATE.replace(/\\{value\\}/g, val);\r\n  }\r\n  /**\r\n   * Get HTML for diplaying all options\r\n   *\r\n   * @param {string[]} options - Array of all options (HTML)\r\n   * @param {number} max - Maximum number of options to show\r\n   * @returns {string} HTML\r\n   */\r\n\r\n  function optionsHtml(options, max) {\r\n    if (options.length > (max || ew.MAX_OPTION_COUNT)) // More than max option count\r\n      return ew.language.phrase(\"CountSelected\").replace(\"%s\", options.length);else if (options.length) // Some options\r\n      return options.reduce((previous, current) => previous + optionHtml(current), \"\");\r\n    return ew.language.phrase(\"PleaseSelect\"); // No options\r\n  }\r\n  /**\r\n   * Create new option\r\n   *\r\n   * @param {(HTMLElement|array)} obj - Selection list\r\n   * @param {Object} data - Object for the new option\r\n   * @param {form} f - form object of obj\r\n   * @param {bool} selected - New option is selected\r\n   * @returns\r\n   */\r\n\r\n  function newOption(obj, data, f, selected) {\r\n    let frm = forms.get(f.id),\r\n        id = getId(obj),\r\n        list = frm.getList(obj),\r\n        group = data.gf,\r\n        value = data.lf,\r\n        template = frm.getOptionTemplate(list),\r\n        text = template != null && template.render && !isAutoSuggest(obj) ? template.render(data, ew.jsRenderHelpers) : displayValue(data, obj) || value;\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      let option;\r\n\r\n      if (obj.list) {\r\n        option = new ew.SelectionListOption(text, value, !!selected);\r\n      } else {\r\n        option = document.createElement(\"option\");\r\n        option.value = value;\r\n        option.innerHTML = text;\r\n        option.selected = !!selected;\r\n      }\r\n\r\n      let args = {\r\n        \"name\": id,\r\n        \"form\": f.$element,\r\n        data,\r\n        group,\r\n        option\r\n      };\r\n      $document$1.trigger(\"newoption\", [args]); // Fire \"newoption\" event for selection list\r\n\r\n      if (obj.list) {\r\n        obj.addOption(args.option);\r\n      } else {\r\n        if (args.group && !isSelect2(obj)) {\r\n          var _obj$querySelector;\r\n\r\n          let optGroup = Array.from((_obj$querySelector = obj.querySelector(\":scope > optgroup\")) != null ? _obj$querySelector : []).find(g => g.label == args.group);\r\n\r\n          if (!optGroup) {\r\n            optGroup = document.createElement(\"optgroup\");\r\n            optGroup.label = args.group;\r\n            obj.add(optGroup);\r\n          }\r\n\r\n          optGroup.appendChild(args.option);\r\n        } else {\r\n          obj.add(args.option);\r\n        }\r\n      }\r\n\r\n      return args.option.text;\r\n    }\r\n\r\n    return text;\r\n  } // Select combobox option\r\n\r\n  function selectOption(obj, values, change) {\r\n    var _obj$dataset, _forms$get$getList, _forms$get$getList$pa;\r\n\r\n    if (change === void 0) {\r\n      change = true;\r\n    }\r\n\r\n    if (!obj || !values) return;\r\n    let $obj = $__default.default(obj);\r\n    values = Array.isArray(values) ? values : [values];\r\n\r\n    if (obj.options) {\r\n      // Selection list\r\n      if (obj.list) {\r\n        obj.value = values;\r\n      } else {\r\n        var _obj$options$;\r\n\r\n        $obj.val(values);\r\n        if (change && isSelect2(obj)) $obj.triggerHandler(\"change\");\r\n        if (obj.type == \"select-one\" && obj.selectedIndex == -1 && !((_obj$options$ = obj.options[0]) != null && _obj$options$.value)) obj.selectedIndex = 0; // Make sure an option is selected\r\n      }\r\n\r\n      if (isAutoSuggest(obj) && values.length == 1) {\r\n        let opts = obj.options || [];\r\n\r\n        for (let opt of opts) {\r\n          if (opt.value == values[0]) {\r\n            obj.value = opt.value;\r\n            obj.input.value = opt.text;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    } else if (isBooleanCheckbox(obj)) {\r\n      obj.checked = convertToBool(values.join(ew.MULTIPLE_OPTION_SEPARATOR));\r\n    } else if (obj.type && obj.type != \"file\") {\r\n      $obj.val(values.join(ew.MULTIPLE_OPTION_SEPARATOR));\r\n      if (isHiddenTextArea($obj)) $obj.data(\"editor\").set();\r\n    } // Auto-select if only one option\r\n\r\n    if (((_obj$dataset = obj.dataset) == null ? void 0 : _obj$dataset.autoselect) === \"false\") // data-autoselect=\"false\"\r\n      return;\r\n    let form = getForm(obj),\r\n        autoSelect = form && !(form.id.endsWith(\"search\") || form.id.endsWith(\"srch\") || ((_forms$get$getList = forms.get(form.id).getList(obj)) == null ? void 0 : (_forms$get$getList$pa = _forms$get$getList.parentFields) == null ? void 0 : _forms$get$getList$pa.length) === 0); // Not search forms and has parent fields\r\n\r\n    if (autoSelect && obj.options) {\r\n      // Selection List\r\n      if (!obj.list && obj.type == \"select-one\" && obj.options.length == 2 && !obj.options[1].selected) {\r\n        obj.options[1].selected = true;\r\n        !change || $obj.trigger(\"change\");\r\n      } else if (obj.options.length == 1 && !obj.options[0].selected) {\r\n        obj.options[0].selected = true;\r\n        !change || $obj.trigger(\"change\");\r\n      }\r\n\r\n      if (isAutoSuggest(obj)) {\r\n        let opts = obj.options || [];\r\n\r\n        if (opts.length == 1) {\r\n          obj.value = opts[0].value;\r\n          obj.input.value = opts[0].text;\r\n        }\r\n      }\r\n    }\r\n  } // Fetch API\r\n\r\n  function _fetch(url, init) {\r\n    var _init, _init$headers, _init$headers$get;\r\n\r\n    (_init = init) != null ? _init : init = {};\r\n    init.headers = new Headers(init.headers || {});\r\n    let isApi = url.startsWith(getApiUrl()); // Is API request\r\n\r\n    if (isApi && ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION) // Do NOT set JWT authorization header if Windows Authentication\r\n      init.headers.set(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n\r\n    if (isApi || (_init$headers = init.headers) != null && (_init$headers$get = _init$headers.get(\"Content-Type\")) != null && _init$headers$get.includes(\"application/json\")) {\r\n      // Add token in headers if sending to API or posting JSON data // PHP\r\n      init.headers.set(headerCase(ew.TOKEN_NAME_KEY), ew.TOKEN_NAME); // Send token name in header // PHP\r\n\r\n      init.headers.set(headerCase(ew.ANTIFORGERY_TOKEN_KEY), ew.ANTIFORGERY_TOKEN); // Send antiforgery token in header // PHP\r\n    }\r\n\r\n    if (!init.method || sameText(init.method, \"GET\")) {\r\n      // GET\r\n      url = setSearchParams(url, init.body);\r\n      delete init.body;\r\n    } else {\r\n      // POST\r\n      init.body = mergeSearchParams(init.body, {\r\n        [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n        [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN\r\n      }); // Add token name and antiforgery token // PHP\r\n    }\r\n\r\n    let args = {\r\n      url,\r\n      init\r\n    };\r\n    $document$1.trigger(\"fetch\", [args]);\r\n    return fetch(args.url, args.init);\r\n  }\r\n\r\n  $document$1.ajaxSend(function (event, jqxhr, settings) {\r\n    let url = settings.url,\r\n        isApi = url.startsWith(getApiUrl()),\r\n        // Is API request\r\n    allowed = isApi || url.startsWith(ew.PATH_BASE) || url.startsWith(currentPage());\r\n\r\n    if (!allowed && url.match(/^http/i)) {\r\n      let objUrl = new URL(url);\r\n      allowed = objUrl.hostname == currentUrl.hostname; // Same host name\r\n    }\r\n\r\n    if (allowed) {\r\n      if (isApi && ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION) // Do NOT set JWT authorization header if Windows Authentication\r\n        jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN); // Note: settings.headers won't work\r\n\r\n      if (isApi || $__default.default.isString(settings.contentType) && settings.contentType.includes(\"application/json\")) {\r\n        // Add token and antiforgery token in headers if sending to API or posting JSON data // PHP\r\n        jqxhr.setRequestHeader(headerCase(ew.TOKEN_NAME_KEY), ew.TOKEN_NAME);\r\n        jqxhr.setRequestHeader(headerCase(ew.ANTIFORGERY_TOKEN_KEY), ew.ANTIFORGERY_TOKEN);\r\n      } else if (sameText(settings.type, \"POST\")) {\r\n        // POST\r\n        let params = mergeSearchParams(new URLSearchParams(settings.data), {\r\n          [ew.TOKEN_NAME_KEY]: ew.TOKEN_NAME,\r\n          [ew.ANTIFORGERY_TOKEN_KEY]: ew.ANTIFORGERY_TOKEN\r\n        }); // Add token name and antiforgery token // PHP\r\n\r\n        settings.data = params.toString();\r\n      }\r\n    }\r\n  }); // Ajax start\r\n\r\n  $document$1.ajaxStart(function () {\r\n    $document$1.data(\"_ajax\", true);\r\n    $__default.default(\"form.ew-form\").addClass(\"ew-wait\").each(function () {\r\n      var frm = forms.get(this.id);\r\n\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) frm.disableForm();\r\n      }\r\n    });\r\n  }); // Ajax stop (internal)\r\n\r\n  function _ajaxStop() {\r\n    $__default.default(\"form.ew-form.ew-wait\").removeClass(\"ew-wait\").each(function () {\r\n      var frm = forms.get(this.id);\r\n\r\n      if (frm) {\r\n        if (!frm.multiPage || !frm.multiPage.lastPageSubmit) {\r\n          frm.enableForm();\r\n        }\r\n      }\r\n    });\r\n    $document$1.data(\"_ajax\", false);\r\n  } // Ajax stop/error\r\n\r\n  $document$1.ajaxStop(_ajaxStop).ajaxError(_ajaxStop); // Execute JavaScript in HTML loaded by Ajax\r\n\r\n  function executeScript(html, id, modal) {\r\n    let pattern = modal ? /<(head)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig : /<(head|template)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig,\r\n        // If modal, scripts in template tags not executed by browser, execute manually\r\n    matches = html.replaceAll(pattern, \"\").matchAll(/<script[^>]*>[\\s\\S]*?<\\/script\\s*>/ig); // Do not execute scripts in template tags, use non-greedy [\\s\\S]*?\r\n\r\n    Array.from(document.createRange().createContextualFragment(Array.from(matches).map(m => m[0]).filter(s => !s.includes(\"$rowindex$\")).join(\"\")).querySelectorAll(\"script:not([type]), script[type='text/javascript']\")).sort((s1, s2) => s2.classList.contains(\"ew-apply-template\") ? 1 : s1.classList.contains(\"ew-apply-template\") ? -1 : 0) // Execute custom template first\r\n    .forEach((s, i) => addScript(s, \"scr_\" + id + \"_\" + i));\r\n  } // Strip JavaScript in HTML loaded by Ajax\r\n\r\n  function stripScript(html) {\r\n    let matches = html.replaceAll(/<(head|template)[^>]*>[\\s\\S]*?<\\/\\1\\s*>/ig, \"\").matchAll(/<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig); // Do not strip scripts in template tags, use non-greedy [\\s\\S]*?\r\n\r\n    return Array.from(matches).filter(m => document.createRange().createContextualFragment(m[0]).querySelector(\"script:not([type]), script[type='text/javascript']\")).reduce((html, m) => html.replace(m[0], \"\"), html);\r\n  } // Add SCRIPT tag\r\n\r\n  function addScript(text, id) {\r\n    let scr = text instanceof HTMLScriptElement ? text : document.createElement(\"SCRIPT\");\r\n    if ($__default.default.isString(text)) scr.text = text;\r\n    if (id) scr.id = id;\r\n    return document.body.appendChild(scr); // Do not use jQuery so it can be removed\r\n  } // Remove JavaScript added by Ajax\r\n\r\n  function removeScript(id) {\r\n    if (id) $__default.default(\"script[id^='scr_\" + id + \"_']\").remove();\r\n  }\r\n  /**\r\n   * Clean HTML loaded by Ajax for modal dialog\r\n   *\r\n   * @param {string} html - HTML string\r\n   * @param {bool} keepScripts - Keep script tags or not\r\n   * @returns HTML string\r\n   */\r\n\r\n  function getContent(html, keepScripts) {\r\n    var _m$;\r\n\r\n    html = html.trim().replace(/<head>[\\s\\S]*<\\/head>/, \"\");\r\n    let body = keepScripts ? html : stripScript(html),\r\n        m = body.match(/<body[\\s\\S]*>[\\s\\S]*<\\/body>/i);\r\n    body = (_m$ = m == null ? void 0 : m[0]) != null ? _m$ : body;\r\n    let $content = $__default.default(body).find(\"section.content\");\r\n    return $content[0] ? $content.html() : body;\r\n  } // Get all options of Selection list or Radio/Checkbox list as array\r\n\r\n  function getOptions(obj) {\r\n    return obj != null && obj.options ? Array.prototype.map.call(obj.options, opt => [opt.value, opt.text]) : [];\r\n  }\r\n  /**\r\n   * Show dialog for enabling two factor authentication\r\n   */\r\n\r\n  function enable2FA() {\r\n    document.body.style.cursor = \"wait\";\r\n\r\n    if (sameText(ew.TWO_FACTOR_AUTHENTICATION_TYPE, \"google\")) {\r\n      // Show QR Code and Verify\r\n      let url = getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SHOW]);\r\n      $__default.default.get(url, result => {\r\n        var _result$error4;\r\n\r\n        if (result != null && result.url) {\r\n          _prompt({\r\n            imageUrl: result.url,\r\n            html: ew.language.phrase(\"Scan2FAQrCode\"),\r\n            input: \"text\",\r\n            confirmButtonText: ew.language.phrase(\"Verify\"),\r\n            showLoaderOnConfirm: true,\r\n            allowEscapeKey: false,\r\n            allowOutsideClick: () => !Swal.isLoading(),\r\n            willOpen: () => {\r\n              Swal.showLoading(Swal.getConfirmButton());\r\n              Swal.disableInput();\r\n\r\n              Swal.getImage().onload = () => {\r\n                Swal.enableInput();\r\n                Swal.hideLoading();\r\n                Swal.getInput().focus();\r\n              };\r\n            },\r\n            preConfirm: value => {\r\n              return $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_VERIFY, value])).then(result => {\r\n                if ((result == null ? void 0 : result.success) !== true) Swal.showValidationMessage(ew.language.phrase(\"2FAVerificationFailed\"));\r\n                return result;\r\n              }).catch(error => Swal.showValidationMessage(error));\r\n            }\r\n          }, result => {\r\n            var _result$error3;\r\n\r\n            if (result != null && (_result$error3 = result.error) != null && _result$error3.description) {\r\n              showToast(result.error.description);\r\n            } else if (result != null && result.success) {\r\n              showToast(ew.language.phrase(\"2FAEnabled\"), \"success\");\r\n              $__default.default(\"#enable-2fa\").addClass(\"d-none\");\r\n              $__default.default(\"#disable-2fa, #backup-codes\").removeClass(\"d-none\");\r\n            }\r\n          }).catch(err => showToast(err == null ? void 0 : err.message));\r\n        } else if (result != null && (_result$error4 = result.error) != null && _result$error4.description) {\r\n          _alert(result.error.description);\r\n        }\r\n      }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => document.body.style.cursor = \"default\");\r\n    } else {\r\n      // Send OTP and Verify\r\n      let url = getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SHOW]);\r\n      let html = sameText(ew.TWO_FACTOR_AUTHENTICATION_TYPE, \"email\") ? ew.language.phrase(\"EnterOTPEmailAddress\") : ew.language.phrase(\"EnterOTPMobileNumber\");\r\n      $__default.default.get(url, result => {\r\n        var _result$error7;\r\n\r\n        if (result.success) {\r\n          _prompt({\r\n            html: html,\r\n            input: \"text\",\r\n            inputValue: result.account,\r\n            confirmButtonText: ew.language.phrase(\"SendOTP\"),\r\n            showLoaderOnConfirm: true,\r\n            allowEscapeKey: false,\r\n            allowOutsideClick: () => !Swal.isLoading(),\r\n            preConfirm: value => {\r\n              return $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP, value])).then(result => {\r\n                if ((result == null ? void 0 : result.success) !== true) Swal.showValidationMessage(ew.language.phrase(\"SendOTPFailed\"));\r\n                return result;\r\n              }).catch(error => Swal.showValidationMessage(error));\r\n            }\r\n          }, result => {\r\n            var _result$error5;\r\n\r\n            if (result != null && (_result$error5 = result.error) != null && _result$error5.description) {\r\n              showToast(result.error.description);\r\n            } else if (result != null && result.success) {\r\n              // Verify OTP\r\n              _prompt({\r\n                html: ew.language.phrase(\"EnterSecurityCode\"),\r\n                input: \"text\",\r\n                confirmButtonText: ew.language.phrase(\"Verify\"),\r\n                showLoaderOnConfirm: true,\r\n                allowEscapeKey: false,\r\n                allowOutsideClick: () => !Swal.isLoading(),\r\n                preConfirm: value => {\r\n                  return $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_VERIFY, value])).then(result => {\r\n                    if ((result == null ? void 0 : result.success) !== true) Swal.showValidationMessage(ew.language.phrase(\"2FAVerificationFailed\"));\r\n                    return result;\r\n                  }).catch(error => Swal.showValidationMessage(error));\r\n                }\r\n              }, result => {\r\n                var _result$error6;\r\n\r\n                if (result != null && (_result$error6 = result.error) != null && _result$error6.description) {\r\n                  showToast(result.error.description);\r\n                } else if (result != null && result.success) {\r\n                  showToast(ew.language.phrase(\"2FAEnabled\"), \"success\");\r\n                  $__default.default(\"#enable-2fa\").addClass(\"d-none\");\r\n                  $__default.default(\"#disable-2fa, #backup-codes\").removeClass(\"d-none\");\r\n                }\r\n              }).catch(err => showToast(err == null ? void 0 : err.message));\r\n            }\r\n          }).catch(err => showToast(err == null ? void 0 : err.message));\r\n        } else if (result != null && (_result$error7 = result.error) != null && _result$error7.description) {\r\n          _alert(result.error.description);\r\n        }\r\n      }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => document.body.style.cursor = \"default\");\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Show dialog for disabling two factor authentication\r\n   */\r\n\r\n  function disable2FA() {\r\n    _prompt({\r\n      html: ew.language.phrase(\"Disable2FAConfirm\"),\r\n      preConfirm: value => {\r\n        if (value) return $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_RESET])).then(result => {\r\n          var _result$error8;\r\n\r\n          if (result != null && (_result$error8 = result.error) != null && _result$error8.description) showToast(result.error.description);else if ((result == null ? void 0 : result.success) !== true) showToast(ew.language.phrase(\"2FAResetFailed\"));\r\n          return result;\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown));\r\n      }\r\n    }, result => {\r\n      var _result$error9;\r\n\r\n      if (result != null && (_result$error9 = result.error) != null && _result$error9.description) {\r\n        showToast(result.error.description);\r\n      } else if (result != null && result.success) {\r\n        showToast(ew.language.phrase(\"2FADisabled\"), \"success\");\r\n        $__default.default(\"#enable-2fa\").removeClass(\"d-none\");\r\n        $__default.default(\"#disable-2fa, #backup-codes\").addClass(\"d-none\");\r\n      }\r\n    }).catch(err => showToast(err == null ? void 0 : err.message));\r\n  }\r\n  /**\r\n   * Show dialog for sending one time password\r\n   */\r\n\r\n  function sendOTP(account) {\r\n    _prompt({\r\n      html: ew.language.phrase(\"SendOTPConfirm\"),\r\n      preConfirm: value => {\r\n        let url = account ? getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP, account]) : getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_SEND_OTP]);\r\n        if (value) return $__default.default.get(url).then(result => {\r\n          var _result$error10;\r\n\r\n          if (result != null && (_result$error10 = result.error) != null && _result$error10.description) showToast(result.error.description);else if ((result == null ? void 0 : result.success) !== true) showToast(ew.language.phrase(\"SendOTPFailed\"));\r\n          return result;\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown));\r\n      }\r\n    }, result => {\r\n      var _result$error11;\r\n\r\n      if (result != null && (_result$error11 = result.error) != null && _result$error11.description) {\r\n        showToast(result.error.description);\r\n      } else if (result != null && result.success) {\r\n        showToast(ew.language.phrase(\"SendOTPSuccess\"), \"success\");\r\n      }\r\n    }).catch(err => showToast(err == null ? void 0 : err.message));\r\n  }\r\n  /**\r\n   * Show backup codes for two factor authentication\r\n   */\r\n\r\n  function showBackupCodes() {\r\n    let html = \"<p>\" + ew.language.phrase(\"BackupCodesMsg\") + \"</p>\";\r\n    return _alert({\r\n      title: ew.language.phrase(\"BackupCodes\"),\r\n      html: html,\r\n      showDenyButton: true,\r\n      showLoaderOnDeny: true,\r\n      showCancelButton: true,\r\n      confirmButtonText: ew.language.phrase(\"CopyToClipboard\"),\r\n      denyButtonText: ew.language.phrase(\"GetNewCodes\"),\r\n      customClass: {\r\n        denyButton: \"btn btn-primary ew-swal2-deny-button\"\r\n      },\r\n      willOpen: () => {\r\n        Swal.showLoading();\r\n        Swal.disableButtons();\r\n        $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_BACKUP_CODES])).then(result => {\r\n          if (result.success && Array.isArray(result.codes)) {\r\n            Swal.update({\r\n              html: html + \"<textarea class=\\\"form-control ew-backup-codes\\\" readonly>\" + result.codes.join(\"\\n\") + \"</textarea>\"\r\n            });\r\n            Swal.enableButtons();\r\n            Swal.getConfirmButton().focus();\r\n          }\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => Swal.hideLoading());\r\n      },\r\n      preConfirm: () => {\r\n        let codes = copyToClipboard(Swal.getHtmlContainer().querySelector(\"textarea\"));\r\n        if (codes) showToast(ew.language.phrase(\"CopiedToClipboard\"), \"success\");\r\n        return false; // Keep the alert open\r\n      },\r\n      preDeny: async () => {\r\n        Swal.showLoading(Swal.getDenyButton());\r\n        await $__default.default.get(getApiUrl([ew.API_2FA_ACTION, ew.API_2FA_NEW_BACKUP_CODES])).then(result => {\r\n          if (result.success && Array.isArray(result.codes)) {\r\n            Swal.update({\r\n              html: html + \"<textarea class=\\\"form-control ew-backup-codes\\\" readonly>\" + result.codes.join(\"\\n\") + \"</textarea>\"\r\n            });\r\n            Swal.getConfirmButton().focus();\r\n          }\r\n        }).fail((jqXHR, textStatus, errorThrown) => showToast(errorThrown)).always(() => Swal.hideLoading());\r\n        return false; // Keep the alert open\r\n      }\r\n    });\r\n  }\r\n  /**\r\n   * Show Add Option dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLElement} args.lnk - Add option anchor element\r\n   * @param {string} args.el - Form element name\r\n   * @param {string} args.url - URL of the Add form\r\n   * @returns\r\n   */\r\n\r\n  function addOptionDialogShow(args) {\r\n    var _args$evt2;\r\n\r\n    args.lnk = args.lnk || ((_args$evt2 = args.evt) == null ? void 0 : _args$evt2.currentTarget); // Hide dialog\r\n\r\n    var _hide = function () {\r\n      removeScript($dlg.data(\"args\").el);\r\n      var frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n      if (frm) frm.destroyEditor();\r\n      $dlg.find(\".modal-body\").html(\"\");\r\n      $dlg.find(\".modal-footer .btn-primary\").off();\r\n      $dlg.data(\"showing\", false);\r\n    };\r\n\r\n    var $dlg = ew.addOptionDialog || $__default.default(\"#ew-add-opt-dialog\").on(\"hidden.bs.modal\", _hide);\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-add-opt-dialog not found.\");\r\n\r\n      return;\r\n    }\r\n\r\n    if ($dlg.data(\"showing\")) return;\r\n    $dlg.data(\"showing\", true); // Submission success\r\n\r\n    var _submitSuccess = function (data) {\r\n      var _results;\r\n\r\n      var results = data,\r\n          args = $dlg.data(\"args\"),\r\n          frm = forms.get(args.lnk),\r\n          // form object\r\n      objName = $dlg.find(\".modal-body form input[name='\" + ew.API_OBJECT_NAME + \"']\").val(),\r\n          // Get object name from form\r\n      el = args.el,\r\n          // HTML element name\r\n      re = /^x(\\d+)_/,\r\n          m = el.match(re),\r\n          // Check row index\r\n      prefix = m ? m[0] : \"x_\",\r\n          index = m ? m[1] : -1,\r\n          name = el.replace(re, \"x_\"),\r\n          list = frm.getList(el);\r\n      if ($__default.default.isString(data)) results = parseJson(data);\r\n\r\n      if ((_results = results) != null && _results.success && results[objName]) {\r\n        // Success\r\n        $dlg.modal(\"hide\");\r\n        var result = results[objName],\r\n            form = frm.$element[0],\r\n            // HTML form or DIV\r\n        obj = getElements(el, form);\r\n\r\n        if (obj) {\r\n          var lf = list.linkField,\r\n              dfs = list.displayFields.slice(),\r\n              // Clone\r\n          ffs = list.filterFields.slice(),\r\n              // Clone\r\n          pfs = list.parentFields.slice(); // Clone\r\n\r\n          pfs.forEach((pf, i) => {\r\n            if (pf.split(\" \").length == 1) // Parent field in the same table, add row index\r\n              pfs[i] = pfs[i].replace(/^x_/, prefix);\r\n          });\r\n          var lfv = lf != \"\" ? result[lf] : \"\",\r\n              row = {\r\n            lf: lfv\r\n          };\r\n          dfs.forEach((df, i) => {\r\n            if (df in result) row[\"df\" + (i > 0 ? i + 1 : \"\")] = result[df];\r\n          });\r\n          ffs.forEach((ff, i) => {\r\n            if (ff in result) row[\"ff\" + (i > 0 ? i + 1 : \"\")] = result[ff];\r\n          });\r\n\r\n          if (lfv && dfs.length > 0 && row[\"df\"]) {\r\n            if (list.ajax === null) // Non-Ajax\r\n              list.lookupOptions.push(row);\r\n            var arp = pfs.map(pf => getOptionValues(pf, form)),\r\n                // Get the parent field values\r\n            args = {\r\n              \"data\": row,\r\n              \"parents\": arp,\r\n              \"valid\": true,\r\n              \"name\": getId(obj),\r\n              \"form\": form\r\n            };\r\n            $document$1.trigger(\"addoption\", [args]);\r\n\r\n            if (args.valid) {\r\n              // Add the new option\r\n              var ar = getOptions(obj),\r\n                  txt = newOption(obj, row, form);\r\n\r\n              if (obj.options) {\r\n                obj.options[obj.options.length - 1].selected = true;\r\n\r\n                if (obj.list) {\r\n                  // Radio/Checkbox list\r\n                  $__default.default(obj.target).find(\"input\").last().trigger(\"focus\");\r\n                }\r\n\r\n                if (isAutoSuggest(obj)) {\r\n                  $__default.default(obj).val(lfv).trigger(\"change\");\r\n                  $__default.default(obj.input).val(txt).trigger(\"focus\");\r\n                } else {\r\n                  $__default.default(obj).trigger(\"change\").trigger(\"focus\");\r\n                }\r\n              }\r\n\r\n              var $form = $__default.default(form),\r\n                  suffix = $form.is(\"div\") ? \"_\" + form.id : \"\",\r\n                  cnt = $form.find(\"#\" + ew.FORM_KEY_COUNT_NAME + suffix).val();\r\n\r\n              if (cnt > 0) {\r\n                // Grid-Add/Edit, update other rows\r\n                for (var i = 1; i <= cnt; i++) {\r\n                  if (i == index) continue;\r\n                  var obj2 = getElements(name.replace(/^x/, \"x\" + i), form),\r\n                      ar2 = getOptions(obj2);\r\n                  if (JSON.stringify(ar) != JSON.stringify(ar2)) // Not same options\r\n                    continue;\r\n                  newOption(obj2, row, form);\r\n                  obj2.render == null ? void 0 : obj2.render(); // Selection list\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        var _results2;\r\n\r\n        // Failure\r\n        if ((_results2 = results) != null && _results2.error) {\r\n          let error = getError(results);\r\n          if (error) _alert(error);\r\n        } else {\r\n          var msg,\r\n              $div = $__default.default(\"<div></div>\").html(data).find(\"div.ew-message-dialog\");\r\n\r\n          if ($div[0]) {\r\n            msg = $div.html();\r\n          } else {\r\n            var _results3;\r\n\r\n            msg = ((_results3 = results) == null ? void 0 : _results3.failureMessage) || data;\r\n            if (!msg || String(msg).trim() == \"\") msg = ew.language.phrase(\"InsertFailed\");\r\n          }\r\n\r\n          _alert(msg);\r\n        }\r\n      }\r\n    }; // Fail\r\n\r\n    var _fail = function (o) {\r\n      $dlg.modal(\"hide\");\r\n\r\n      _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    }; // Submit\r\n\r\n    var _submit = async function (e) {\r\n      let $dlg = ew.addOptionDialog,\r\n          form = $dlg.find(\".modal-body form\")[0],\r\n          frm = forms.get(form.id),\r\n          btn = e == null ? void 0 : e.target,\r\n          $btn = $__default.default(btn);\r\n\r\n      if (await frm.canSubmit(e)) {\r\n        $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n        document.body.style.cursor = \"wait\";\r\n        $__default.default.post(getApiUrl([ew.API_ADD_ACTION, form.elements[ew.API_OBJECT_NAME].value]), $__default.default(form).serialize(), _submitSuccess).fail(_fail).always(function () {\r\n          frm.enableForm();\r\n          $btn.prop(\"disabled\", false).removeClass(\"disabled\");\r\n          document.body.style.cursor = \"default\";\r\n        });\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args); // Get form HTML\r\n\r\n    var success = function (data) {\r\n      var frm = forms.get(args.lnk),\r\n          prefix = \"x_\",\r\n          m = args.el.match(/^(x\\d+_)/);\r\n      if (m) // Contains row index\r\n        prefix = m[1];\r\n      var list = frm.getList(args.el),\r\n          pfs = list.parentFields.slice() // Clone\r\n      .map(pf => pf.split(\" \").length == 1 ? pf.replace(/^x_/, prefix) : pf),\r\n          // Parent field in the same table, add row index\r\n      form = frm.htmlForm,\r\n          ar = pfs.map(pf => getOptionValues(pf, form)),\r\n          ar2 = pfs.map(pf => getOptionTexts(pf, form)),\r\n          ffs = list.filterFieldVars.slice(); // Clone\r\n\r\n      $dlg.find(\".modal-title\").html($__default.default(args.lnk).closest(\".ew-add-opt-btn\").data(\"title\"));\r\n      $dlg.find(\".modal-body\").html(stripScript(data));\r\n      var form = $dlg.find(\".modal-body form\")[0];\r\n\r\n      if (form) {\r\n        // Set the filter field value\r\n        $__default.default(form).on(\"keydown\", function (e) {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") return _submit();\r\n        }); // $document.one(\"updatedone\", () => {\r\n        //     ar.forEach((v, i) => {\r\n        //         let obj = getElements(ffs[i], form);\r\n        //         if (obj) {\r\n        //             if (obj.options || obj.length) { // Selection list\r\n        //                 $(obj).first().one(\"updated\", () => selectOption(obj, v));\r\n        //             } else {\r\n        //                 selectOption(obj, v);\r\n        //             }\r\n        //         }\r\n        //     });\r\n        // });\r\n      }\r\n\r\n      ew.addOptionDialog = $dlg.modal(\"show\");\r\n      $dlg.find(\".modal-footer .btn-primary\").click(_submit).focus();\r\n\r\n      if (form) {\r\n        // Set the filter field value\r\n        ar.forEach((v, i) => {\r\n          var obj = getElements(ffs[i], form);\r\n\r\n          if (obj && v[0]) {\r\n            if (isAutoSuggest(obj)) {\r\n              // AutoSuggest\r\n              obj.value = v[0];\r\n              obj.input.value = ar2[i][0];\r\n              obj.add(v[0], ar2[i][0], true);\r\n            } else if (obj.options || obj.length) {\r\n              // Selection list\r\n              newOption(obj, {\r\n                lf: v[0]\r\n              }, frm, true); // $(obj).first().one(\"updated\", () => selectOption(obj, v));\r\n            } else {\r\n              // Text\r\n              obj.value = v[0];\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n      executeScript(data, args.el, true);\r\n      $dlg.trigger(\"load.ew\"); // Trigger load event\r\n    };\r\n\r\n    $__default.default.get(args.url, success).fail(_fail);\r\n    return false;\r\n  } // Hide Modal dialog\r\n\r\n  function modalDialogHide() {\r\n    let $dlg = $__default.default(this),\r\n        args = $dlg.data(\"args\"),\r\n        frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\r\n    removeScript(\"modal_dialog\");\r\n    frm == null ? void 0 : frm.destroyEditor();\r\n    $dlg.find(\".modal-footer .btn-primary\").off();\r\n    $dlg.find(\".modal-dialog\").removeClass((i, className) => {\r\n      let m = className.match(/table\\-\\w+/);\r\n      return m ? m[0] : \"\";\r\n    });\r\n    $dlg.data({\r\n      showing: false,\r\n      url: null\r\n    });\r\n    if (args != null && args.reload) window.location.reload();\r\n  }\r\n  /**\r\n   * Show modal dialog\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {HTMLFormElement} args.f - Form of List page\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @param {string} args.url - URL of content\r\n   * @param {string} args.html - HTML content\r\n   * @param {string|null} args.btn - Button phrase ID\r\n   * @param {boolean} args.footer - Show footer (default true)\r\n   * @param {string} args.caption - Caption in dialog header\r\n   * @param {boolean} args.reload - Reload page after hiding dialog or not\r\n   * @param {string} args.size - Class name of modal dialog 'modal-sm'|'modal-md'|modal-lg'|'modal-xl' (default)\r\n   * @param {Function} args.callback - Callback function (success function after submitting the form)\r\n   * @returns false\r\n   */\r\n\r\n  function modalDialogShow(args) {\r\n    var _args$evt3, _bootstrap$Tooltip$ge4, _args$evt4, _args$evt4$currentTar, _args$evt5, _args$evt5$currentTar, _$dlg$data, _$dlg$data2;\r\n\r\n    args.lnk || (args.lnk = (_args$evt3 = args.evt) == null ? void 0 : _args$evt3.currentTarget);\r\n    (_bootstrap$Tooltip$ge4 = bootstrap.Tooltip.getInstance(args.lnk)) == null ? void 0 : _bootstrap$Tooltip$ge4.hide();\r\n    let {\r\n      ewAction,\r\n      action\r\n    } = args,\r\n        f = args.f || ((_args$evt4 = args.evt) == null ? void 0 : (_args$evt4$currentTar = _args$evt4.currentTarget) == null ? void 0 : _args$evt4$currentTar.form);\r\n\r\n    if ((ewAction == \"grid\" && action == \"edit\" || ewAction == \"modal\" && [\"multiedit\", \"update\"].includes(action)) && !keySelected(f)) {\r\n      // Grid-Edit and Multi-Edit/Update\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    let url = args.url || ((_args$evt5 = args.evt) == null ? void 0 : (_args$evt5$currentTar = _args$evt5.currentTarget) == null ? void 0 : _args$evt5$currentTar.dataset.url),\r\n        $dlg = ew.modalDialog || $__default.default(\"#ew-modal-dialog\").on(\"hidden.bs.modal\", modalDialogHide); // div#ew-modal-dialog always exists\r\n\r\n    if ($dlg.data(\"showing\") && url && $dlg.data(\"url\") == url) return false;\r\n    $dlg.data({\r\n      showing: true,\r\n      url: url\r\n    });\r\n    args.reload = false; // Size\r\n\r\n    $dlg.find(\".modal-dialog\").removeClass(\"modal-sm modal-md modal-lg modal-xl\").addClass(args.size || \"modal-xl\"); // Caption\r\n\r\n    let _caption = function () {\r\n      let args = $dlg.data(\"args\"),\r\n          $lnk = $__default.default(args.lnk);\r\n      return args.caption || $lnk.data(\"caption\") || $lnk.data(\"original-title\") || \"\";\r\n    }; // Button text\r\n\r\n    let _button = function () {\r\n      let args = $dlg.data(\"args\");\r\n      if (args.btn === null) return \"\";else if (args.btn && args.btn != \"\") return ew.language.phrase(args.btn);\r\n      return _caption();\r\n    }; // Fail\r\n\r\n    let _fail = function (o) {\r\n      $dlg.modal(\"hide\");\r\n      if (o.status) _alert(\"Server Error \" + o.status + \": \" + o.statusText);\r\n    }; // Always\r\n\r\n    let _always = function () {\r\n      document.body.style.cursor = \"default\";\r\n    }; // Check if current page\r\n\r\n    let _current = function (url) {\r\n      let a = document.createElement(\"a\");\r\n      a.href = url;\r\n      return window.location.pathname.endsWith(a.pathname);\r\n    }; // Close hidden dialog\r\n\r\n    let _hide = function () {\r\n      if ($dlg.data(\"showing\") && !$dlg.hasClass(\"show\")) $dlg.trigger(\"hidden.bs.modal\"); // Call modalDialogHide()\r\n    };\r\n    /**\r\n     * Handle result\r\n     *\r\n     * @param {Object} result - Result object\r\n     * @param {string|Object} result.error - Error message or object\r\n     * @param {string} result.error.message - Error message\r\n     * @param {string} result.error.description - Error message\r\n     * @param {string} result.failureMessage - Failure message\r\n     * @param {string} result.successMessage - Success message\r\n     * @param {string} result.warningMessage - Warning message\r\n     * @param {string} result.message - Message\r\n     * @param {string} result.url - Redirection URL\r\n     * @param {string} result.modal - Redirect to result.url in current modal dialog\r\n     * @param {boolean} result.view - result.url is View page => No primary button\r\n     * @param {string} result.caption - Caption of modal dialog for result.url\r\n     * @param {boolean} result.reload - Reload current page\r\n     * @param {boolean} result.success - Result => Call callback if function\r\n     */\r\n\r\n    let handleResult = function (result) {\r\n      let error = getError(result);\r\n\r\n      if (error) {\r\n        _alert(error);\r\n\r\n        _hide();\r\n      } else if ($__default.default.isString(result.warningMessage)) {\r\n        _alert(result.warningMessage, cb, \"warning\");\r\n\r\n        _hide();\r\n      } else if ($__default.default.isString(result.message)) {\r\n        _alert(result.message, cb, \"body\");\r\n\r\n        _hide();\r\n      } else if ($__default.default.isString(result.successMessage)) {\r\n        _alert(result.successMessage, cb, \"success\");\r\n\r\n        _hide();\r\n      } else if (result.reload) {\r\n        $dlg.modal(\"hide\");\r\n        window.location.reload();\r\n      } else if ($__default.default.isBoolean(result.success) && isFunction$1(args == null ? void 0 : args.callback)) {\r\n        // If success or failure and callback is function, call the callback\r\n        $dlg.modal(\"hide\");\r\n        args.callback(result);\r\n      } else if (result.url) {\r\n        let url = result.url;\r\n\r\n        if (result.modal) {\r\n          if (_current(url)) {\r\n            // Return to current page\r\n            if (!result.error) {\r\n              $dlg.modal(\"hide\");\r\n              refresh(fetch(url));\r\n            }\r\n          } else {\r\n            // Return to other page\r\n            let args = $dlg.data(\"args\");\r\n            args.reload = true;\r\n            args.url = url;\r\n            if (result.caption) args.caption = result.caption;\r\n            args.btn = result.view ? null : \"\";\r\n            $dlg.data({\r\n              args,\r\n              url\r\n            });\r\n            url = setSearchParams(url, {\r\n              modal: \"1\",\r\n              rnd: random()\r\n            });\r\n            document.body.style.cursor = \"wait\";\r\n            $__default.default.get(url).done(success).fail(_fail).always(_always);\r\n          }\r\n        } else {\r\n          $dlg.modal(\"hide\");\r\n          window.location = sanitizeUrl(url);\r\n        }\r\n      }\r\n    }; // Create buttons\r\n\r\n    let _createButtons = function () {\r\n      let $footer = $dlg.find(\".modal-footer\").empty(),\r\n          // Empty the footer\r\n      $btn = $dlg.find(\".card-body button[type=submit]\").first().addClass(\"ew-submit\").on(\"click\", _submit); // Find submit button found in card body\r\n\r\n      if (!$btn[0]) {\r\n        // No submit button found in card body\r\n        $dlg.find(\".modal-body .ew-modal-buttons\").contents().clone().find(\"button\").each(function () {\r\n          // Find buttons in <template>\r\n          if (this.type == \"submit\") {\r\n            this.type = \"button\"; // Convert to normal button\r\n\r\n            this.classList.add(\"ew-submit\");\r\n            if (this.id == \"btn-cancel\") this.classList.add(\"ew-cancel\"); // Cancel button with type=\"submit\"\r\n\r\n            let $this = $__default.default(this);\r\n            $this.on(\"click\", function (e) {\r\n              if (this.dataset.ewAction == \"set-action\") // Set value first\r\n                this.form.elements[\"action\"].value = this.dataset.value;\r\n              $this.data(\"ajax\") === false ? $__default.default(this.form).trigger(\"submit\") : _submit(e);\r\n            });\r\n          } else if (this.id == \"btn-cancel\") {\r\n            if (this.dataset.href) {\r\n              if (samePath(this.dataset.href, currentUrl.pathname)) this.setAttribute(\"data-bs-dismiss\", \"modal\");else $__default.default(this).on(\"click\", () => redirect(this.dataset.href));\r\n            } else {\r\n              this.setAttribute(\"data-bs-dismiss\", \"modal\");\r\n            }\r\n          }\r\n\r\n          $footer[0].appendChild(this);\r\n        }); // Clone buttons and append to footer\r\n\r\n        if (!$dlg.find(\".card-body button[type=submit], .modal-footer .btn\")[0]) {\r\n          // No buttons found\r\n          let btn = _button();\r\n\r\n          if (btn) {\r\n            $__default.default('<button type=\"button\" class=\"btn btn-primary ew-btn\">' + btn + '</button>').on(\"click\", _submit).appendTo($footer);\r\n            $footer.append('<button type=\"button\" class=\"btn btn-default ew-btn\" data-bs-dismiss=\"modal\">' + ew.language.phrase(\"CancelBtn\") + '</button>');\r\n          } else {\r\n            $footer.append('<button type=\"button\" class=\"btn btn-default ew-btn\" data-bs-dismiss=\"modal\">' + ew.language.phrase(\"CloseBtn\") + '</button>');\r\n          }\r\n        }\r\n\r\n        $footer.find(\"button\").on(\"mousedown\", e => e.preventDefault()); // Do not focus button by mouse down\r\n\r\n        $footer.find(\".btn-primary\").focus();\r\n      }\r\n    }; // Check return URL\r\n\r\n    let _return = response => {\r\n      let returnUrl = response.headers.get(\"Return-Url\"); // Check if return URL exists\r\n\r\n      if (returnUrl && args.table && [\"inline\", \"modal\"].includes(args.ewAction) && !samePath(parseUrl(returnUrl).pathname, currentUrl.pathname)) $__default.default(\".ew-grid.\" + args.table).find(\"[data-ew-action=modal][data-url='\" + returnUrl + \"'], [data-ew-action=inline][data-url='\" + returnUrl + \"']\").trigger(\"click\");\r\n    }; // Submit success\r\n\r\n    let _submitSuccess = async function (response) {\r\n      let args = $dlg.data(\"args\"); // Get arguments first or it will be removed by modalDialogHide()\r\n\r\n      if (!(response instanceof Response)) return;\r\n      let ct = response.headers.get(\"Content-Type\");\r\n\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json();\r\n\r\n        if (isFunction$1(args == null ? void 0 : args.callback)) {\r\n          // If callback is function, call the callback function then return\r\n          let error = getError(result);\r\n          if (error) showToast(error);else $dlg.modal(\"hide\");\r\n          args.callback(result);\r\n          return;\r\n        }\r\n\r\n        handleResult(result);\r\n      } else {\r\n        let data = await response.clone().text(),\r\n            body = getContent(data).trim(); // Make sure no leading/trailing space\r\n\r\n        if (body.startsWith(\"<\") && body.endsWith(\">\")) {\r\n          // HTML\r\n          if (args.ajax && args.action == \"add\" && document.querySelector(\"main.ew-no-record\") && $__default.default(body).find(\"main:not(.ew-no-record)\")[0]) {\r\n            // No existing record, new record added\r\n            $dlg.modal(\"hide\");\r\n            await refresh(Promise.resolve(response));\r\n\r\n            _return(response);\r\n\r\n            return;\r\n          }\r\n\r\n          $dlg.find(\".modal-body\").html(body);\r\n          $dlg.find(\".modal-body .ew-infinite-scroll-grid .ew-grid-middle-panel\").css(\"height\", \"auto\"); // Do not use infinite scrolling height for Grid-Add/Edit\r\n          // If callback is function and no modal buttons, call the callback function then return\r\n\r\n          if (!$dlg.find(\".modal-body .ew-modal-buttons\").length && isFunction$1(args == null ? void 0 : args.callback)) {\r\n            $dlg.modal(\"hide\");\r\n            args.callback(response);\r\n            return;\r\n          }\r\n\r\n          _createButtons();\r\n\r\n          executeScript(data, \"modal_dialog\", true);\r\n          $dlg.trigger(\"load.ew\"); // Trigger load event\r\n        } else if (data) {\r\n          $dlg.modal(\"hide\");\r\n\r\n          _alert(data);\r\n        }\r\n      }\r\n    }; // Submit\r\n\r\n    let _submit = async function (e) {\r\n      let form = $dlg.find(\".modal-body form\")[0],\r\n          $form = $__default.default(form),\r\n          frm = forms.get(form.id),\r\n          btn = e == null ? void 0 : e.target;\r\n      if (btn.classList.contains(\"disabled\")) return false;\r\n\r\n      if (btn.classList.contains(\"ew-cancel\")) {\r\n        // Cancel button with type=\"submit\"\r\n        $__default.default.post($form.attr(\"action\"), $form.serialize(), success).fail(_fail).always(_always);\r\n      } else if (await frm.canSubmit(e)) {\r\n        document.body.style.cursor = \"wait\";\r\n\r\n        let p = _fetch($form.attr(\"action\"), {\r\n          method: \"POST\",\r\n          body: $form.serialize()\r\n        }).catch(_fail).finally(() => {\r\n          frm.enableForm();\r\n\r\n          _always();\r\n        });\r\n\r\n        if (frm.submitWithFetch) {\r\n          p.then(async response => {\r\n            var _resp$headers$get;\r\n\r\n            // Check error before refresh\r\n            let resp = response.clone(),\r\n                isJson = (_resp$headers$get = resp.headers.get(\"Content-Type\")) == null ? void 0 : _resp$headers$get.includes(\"json\"),\r\n                result = isJson ? await resp.json() : null,\r\n                hasErrors = (result == null ? void 0 : result.validation) || getError(result);\r\n            if (!isJson || !hasErrors) // HTML or JSON without error => close dialog\r\n              $dlg.modal(\"hide\");\r\n            let args = {\r\n              form,\r\n              result: Promise.resolve(response),\r\n              context: hasErrors ? \"#ew-modal-dialog.show .modal-body\" : null\r\n            },\r\n                evt = $__default.default.Event(\"aftersubmit\", {\r\n              originalEvent: e\r\n            });\r\n            frm.trigger(evt, [args]);\r\n          });\r\n        } else {\r\n          p.then(_submitSuccess);\r\n        }\r\n      }\r\n\r\n      return false;\r\n    };\r\n\r\n    let success = function (data) {\r\n      let result = parseJson(data);\r\n\r\n      if ($__default.default.isObject(result)) {\r\n        handleResult(result);\r\n      } else {\r\n        let args = $dlg.data(\"args\"),\r\n            $lnk = $__default.default(args.lnk),\r\n            body = getContent(data);\r\n        $dlg.find(\".modal-title\").html(_caption());\r\n        $dlg.find(\".modal-body\").html(body);\r\n        $dlg.find(\".modal-body .ew-infinite-scroll-grid .ew-grid-middle-panel\").css(\"height\", \"auto\"); // Do not use infinite scrolling height for Grid-Add/Edit\r\n\r\n        _createButtons();\r\n\r\n        $dlg.find(\".modal-footer\").toggle(args.footer !== false);\r\n        let lnkData = $lnk.data() || {};\r\n        if (lnkData.table) $dlg.find(\".modal-dialog\").addClass(\"table-\" + lnkData.table);\r\n        $dlg.find(\".modal-body form\").on(\"keydown\", e => {\r\n          if (e.key == \"Enter\" && e.target.nodeName != \"TEXTAREA\") {\r\n            $dlg.find(\".modal-footer .btn.btn-primary\").trigger(\"click\");\r\n            return false;\r\n          }\r\n        });\r\n\r\n        if (lnkData.ajax && lnkData.table && lnkData.action == \"view\") {\r\n          // Modal View page and use Ajax actions\r\n          [\".ew-add\", \".ew-copy\", \".ew-edit\", \".ew-delete\"].forEach(className => {\r\n            let $dlglnk = $dlg.find(\".modal-body \" + className + \"[data-ew-action=modal]\"),\r\n                // Link inside modal dialog\r\n            $lnk = $__default.default(\"[data-ew-action=modal][data-table='\" + lnkData.table + \"'][data-url='\" + $dlglnk.data(\"url\") + \"']\").not(\".modal-body *\").first(); // Link outside modal dialog\r\n\r\n            $lnk[0] ? $dlglnk.on(\"click\", e => {\r\n              e.preventDefault();\r\n              e.stopImmediatePropagation();\r\n              $lnk.trigger(\"click\"); // Click the link outside\r\n            }) : $dlglnk.addClass(\"d-none\"); // Hide the link\r\n          });\r\n        }\r\n\r\n        ew.modalDialog = $dlg.modal(\"show\");\r\n        executeScript(data, \"modal_dialog\", true); // Fix for CKEditor\r\n\r\n        let modal = bootstrap.Modal.getInstance($dlg[0]);\r\n\r\n        if (!modal._focustrap.__handleFocusin) {\r\n          modal._focustrap.__handleFocusin = modal._focustrap._handleFocusin;\r\n\r\n          modal._focustrap._handleFocusin = function (e) {\r\n            var _e$target10;\r\n\r\n            // Use function for \"this\"\r\n            if ((_e$target10 = e.target) != null && _e$target10.matches(\"[class^=cke_dialog_]\")) // Element from CKEditor dialog\r\n              return; // Do not focus the modal\r\n\r\n            this.__handleFocusin(e);\r\n          };\r\n        }\r\n\r\n        $dlg.trigger(\"load.ew\"); // Trigger load event\r\n      }\r\n    };\r\n\r\n    let show = function (html) {\r\n      let args = $dlg.data(\"args\");\r\n      $dlg.find(\".modal-title\").html(_caption());\r\n      $dlg.find(\".modal-body\").html(html);\r\n\r\n      _createButtons();\r\n\r\n      $dlg.find(\".modal-footer\").toggle(args.footer !== false);\r\n      ew.modalDialog = $dlg.modal(\"show\");\r\n    }; // Restore previous callback\r\n\r\n    if (args.callback === true && (_$dlg$data = $dlg.data(\"args\")) != null && _$dlg$data.callback) args.callback = $dlg.data(\"args\").callback;\r\n\r\n    if (url && (_$dlg$data2 = $dlg.data(\"args\")) != null && _$dlg$data2.reload) {\r\n      // About to load URL but previous result required reload\r\n      args.reload = true; // Carry the reload state to current args\r\n\r\n      $dlg.data(\"args\").reload = false; // Remove reload so \"hidden\" event will not reload\r\n    }\r\n\r\n    $dlg.modal(\"hide\");\r\n    $dlg.data(\"args\", args);\r\n\r\n    if (url) {\r\n      document.body.style.cursor = \"wait\";\r\n      let params = ew.getSearchParams(url);\r\n      params.set(\"rnd\", random());\r\n      if (params.get(\"action\") != \"delete\") params.set(\"modal\", \"1\");\r\n      $__default.default.ajax({\r\n        url: setSearchParams(url, params),\r\n        method: f ? \"POST\" : \"GET\",\r\n        data: f ? $__default.default(f).serialize() : \"\",\r\n        headers: args.json ? {\r\n          Accept: \"application/json, */*; q=0.01\"\r\n        } : {} // JSON response\r\n\r\n      }).done(success).fail(_fail).always(_always);\r\n    } else if (args.html) {\r\n      show(args.html);\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Show dialog for import\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {HTMLElement} args.lnk - Anchor element\r\n   * @returns\r\n   */\r\n\r\n  function importDialogShow(args) {\r\n    var _args$evt6, _bootstrap$Tooltip$ge5;\r\n\r\n    args.lnk = args.lnk || ((_args$evt6 = args.evt) == null ? void 0 : _args$evt6.currentTarget);\r\n    (_bootstrap$Tooltip$ge5 = bootstrap.Tooltip.getInstance(args.lnk)) == null ? void 0 : _bootstrap$Tooltip$ge5.hide();\r\n    let $dlg = ew.importDialog || $__default.default(\"#ew-import-dialog\");\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-import-dialog not found.\");\r\n\r\n      return false;\r\n    }\r\n\r\n    let $input = $dlg.find(\"#importfiles\"),\r\n        $dropzone = $input.closest(\".ew-file-drop-zone\"),\r\n        $bd = $dlg.find(\".modal-body\"),\r\n        $data = $bd.find(\":input[id!=importfiles]\"),\r\n        $message = $bd.find(\".message\"),\r\n        $progress = $bd.find(\".progress\"),\r\n        table,\r\n        sse; // Add row to table\r\n\r\n    let addRow = function (result) {\r\n      let {\r\n        row,\r\n        success,\r\n        error,\r\n        count\r\n      } = result,\r\n          callback = () => {\r\n        table.addRow(row).then(r => r.getElement().classList.toggle(\"text-danger\", error));\r\n        if (error) console.log(ew.language.phrase(\"ImportRowError\").replace(\"%i\", count + \" \" + JSON.stringify(row)).replace(\"%e\", error));\r\n      };\r\n\r\n      row = {\r\n        \"_index\": count,\r\n        \"_success\": success,\r\n        \"_error\": error,\r\n        ...row\r\n      };\r\n\r\n      if (!table) {\r\n        table = new Tabulator(\"#ew-import-dialog .result\", $__default.default.extend({\r\n          data: [row],\r\n          index: \"_index\",\r\n          autoColumns: true,\r\n          autoColumnsDefinitions: definitions => {\r\n            definitions.forEach(column => {\r\n              column.headerSort = false;\r\n              column.resizable = false;\r\n\r\n              if ([\"_index\", \"_error\"].includes(column.field)) {\r\n                column.visible = false;\r\n              } else if (column.field == \"_success\") {\r\n                column.title = \"#\";\r\n                column.headerSort = true;\r\n                column.headerSortTristate = true;\r\n\r\n                column.formatter = cell => {\r\n                  cell.getElement().style.textOverflow = \"clip\";\r\n                  let row = cell.getRow(),\r\n                      data = row.getData();\r\n                  if (data._error) new bootstrap.Tooltip(row.getElement(), {\r\n                    placement: \"bottom\",\r\n                    title: data._error,\r\n                    container: \"#ew-import-dialog .result\"\r\n                  });\r\n                  return (data._success ? '<i class=\"fa-solid fa-check text-success\"></i>' : '<i class=\"fa-solid fa-xmark text-danger\"></i>') + \" #\" + data._index;\r\n                };\r\n              }\r\n            });\r\n            return definitions;\r\n          }\r\n        }, ew.importTabulatorOptions));\r\n        table.on(\"tableBuilt\", () => table.element.querySelector(\".tabulator-row\").classList.toggle(\"text-danger\", error));\r\n      } else {\r\n        table.initialized ? callback() : table.on(\"tableBuilt\", callback);\r\n      }\r\n    }; // Enable buttons\r\n\r\n    let enableButtons = enabled => $dlg.find(\".modal-footer .btn\").prop(\"disabled\", !enabled); // Show message\r\n\r\n    let showMessage = function (msg, classname) {\r\n      let $msg = $__default.default(\"<div>\" + msg + \"</div>\");\r\n      if (classname) $msg.addClass(classname);\r\n      $message.removeClass(\"d-none\").html($msg);\r\n      if (classname == \"text-danger\") enableButtons(true);\r\n    }; // Hide message\r\n\r\n    let hideMessage = () => $message.addClass(\"d-none\").html(\"\"); // Show progress\r\n\r\n    let showProgress = (pc, classname) => $progress.removeClass(\"d-none\").find(\".progress-bar\").removeClass(\"bg-success bg-info\").addClass(classname || \"bg-success\").attr(\"aria-valuenow\", pc).css(\"width\", pc + \"%\").html(pc + \"%\"); // Hide progress\r\n\r\n    let hideProgress = () => $progress.addClass(\"d-none\").find(\".progress-bar\").attr(\"aria-valuenow\", 0).css(\"width\", \"0%\").html(\"0%\"); // Upload progress\r\n\r\n    let uploadProgress = function (data) {\r\n      const pc = parseInt(100 * data.loaded / data.total, 10);\r\n      showProgress(pc, \"bg-primary\");\r\n      if (pc === 100) showMessage(ew.language.phrase(\"ImportUploadComplete\"), \"text-primary\");else showMessage(ew.language.phrase(\"ImportUploadProgress\").replace(\"%p\", pc), \"text-primary\");\r\n    }; // Update import progress\r\n\r\n    let updateProgress = function (e) {\r\n      const result = parseJson(e.data) || {};\r\n\r\n      try {\r\n        let tcnt = result.totalCount || 0,\r\n            cnt = result.count || 0,\r\n            scnt = result.successCount || 0,\r\n            fcnt = result.failCount || 0,\r\n            filename = result.file;\r\n\r\n        if (tcnt > 0 && $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\")) {\r\n          // Show progress\r\n          if (result.row) addRow(result);\r\n          let pc = parseInt(100 * cnt / tcnt, 10);\r\n          showProgress(pc);\r\n          showMessage(ew.language.phrase(\"ImportResult\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", filename).replace(\"%s\", scnt).replace(\"%e\", fcnt), fcnt > 0 ? \"text-danger\" : \"text-primary\");\r\n        }\r\n      } catch (e) {}\r\n    }; // Import complete\r\n\r\n    let importComplete = function (e) {\r\n      var _sse;\r\n\r\n      let msg = [],\r\n          result = parseJson(e.data) || {},\r\n          fileResults = result.files;\r\n      showProgress(100);\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n\r\n      if (Array.isArray(fileResults)) {\r\n        fileResults.forEach(fileResult => {\r\n          let tcnt = fileResult.totalCount || 0,\r\n              cnt = fileResult.count || 0,\r\n              scnt = fileResult.successCount || 0,\r\n              fcnt = fileResult.failCount || 0;\r\n          msg.push(ew.language.phrase(\"ImportResult\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", fileResult.file).replace(\"%s\", scnt).replace(\"%e\", fcnt));\r\n        });\r\n      }\r\n\r\n      if (result.success) {\r\n        if (result.rollbacked) msg.push(ew.language.phrase(\"ImportSave\"));\r\n        showMessage(msg.join(\"<br>\"), \"text-success\");\r\n        $dlg.find(\".modal-footer .ew-close-btn\").data(\"imported\", true);\r\n      } else {\r\n        if (ew.IMPORT_MAX_FAILURES > 0 && result.failCount >= ew.IMPORT_MAX_FAILURES) msg.push(ew.language.phrase(\"ImportMaxFailuresExceeded\").replace(\"%s\", ew.IMPORT_MAX_FAILURES));\r\n        showMessage(msg.join(\"<br>\"), \"text-danger\"); // Show error message\r\n      } // hideProgress();\r\n\r\n      document.body.style.cursor = \"default\";\r\n      $dlg.find(\".modal-footer .ew-close-btn\").prop(\"disabled\", false); // Enable the close button\r\n\r\n      let $btn = $dlg.find(\".modal-footer .ew-import-btn\").toggleClass(\"d-none\", !result.rollbacked || !result.success); // Show/Hide the import button\r\n\r\n      if (result.rollbacked) $btn.off(\"click\").one(\"click\", saveImport);\r\n      console.log(\"Closing EventSource...\");\r\n      (_sse = sse) == null ? void 0 : _sse.close();\r\n    }; // Import fail\r\n\r\n    let importFail = function (e) {\r\n      var _sse2;\r\n\r\n      document.body.style.cursor = \"default\";\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\r\n\r\n      let result = parseJson(e.data) || {};\r\n      if (result.error) showMessage(result.error, \"text-danger\");\r\n      console.log(\"Closing EventSource...\");\r\n      (_sse2 = sse) == null ? void 0 : _sse2.close();\r\n    }; // Import file\r\n\r\n    let importFiles = function (filetoken) {\r\n      var _table;\r\n\r\n      document.body.style.cursor = \"wait\";\r\n      showProgress(0);\r\n      (_table = table) == null ? void 0 : _table.clearData();\r\n      $input.data(ew.API_FILE_TOKEN_NAME, filetoken);\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\r\n\r\n      let params = new URLSearchParams($data.serialize());\r\n      params.set(ew.API_ACTION_NAME, ew.API_IMPORT_ACTION);\r\n      params.set(ew.API_FILE_TOKEN_NAME, filetoken);\r\n      params.set(\"rollback\", \"1\");\r\n      sse = new EventSource(currentPage() + \"?\" + params.toString());\r\n      sse.addEventListener(\"message\", updateProgress);\r\n      sse.addEventListener(\"error\", importFail);\r\n      sse.addEventListener(\"complete\", importComplete);\r\n    }; // Save import\r\n\r\n    let saveImport = function (e) {\r\n      var _table2;\r\n\r\n      document.body.style.cursor = \"wait\";\r\n      showProgress(0);\r\n      (_table2 = table) == null ? void 0 : _table2.clearData();\r\n      $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\r\n\r\n      let params = new URLSearchParams($data.serialize());\r\n      params.set(ew.API_ACTION_NAME, ew.API_IMPORT_ACTION);\r\n      params.set(ew.API_FILE_TOKEN_NAME, $input.data(ew.API_FILE_TOKEN_NAME));\r\n      params.set(\"rollback\", \"0\");\r\n      sse = new EventSource(currentPage() + \"?\" + params.toString());\r\n      sse.addEventListener(\"message\", updateProgress);\r\n      sse.addEventListener(\"error\", importFail);\r\n      sse.addEventListener(\"complete\", importComplete);\r\n    };\r\n\r\n    let options = ew.importUploadOptions;\r\n    if (!options.acceptFileTypes) options.acceptFileTypes = new RegExp('\\\\.(' + ew.IMPORT_FILE_ALLOWED_EXTENSIONS.replace(/,/g, '|') + ')$', 'i');\r\n\r\n    if (!$input.data(\"blueimpFileupload\")) {\r\n      $input.fileupload(Object.assign({\r\n        url: getApiUrl(ew.API_UPLOAD_ACTION),\r\n        dataType: \"json\",\r\n        autoUpload: true,\r\n        singleFileUploads: false,\r\n        dropZone: $dropzone,\r\n        messages: {\r\n          acceptFileTypes: ew.language.phrase(\"UploadErrorAcceptFileTypes\"),\r\n          maxFileSize: ew.language.phrase(\"UploadErrorMaxFileSize\"),\r\n          maxNumberOfFiles: ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"),\r\n          minFileSize: ew.language.phrase(\"UploadErrorMinFileSize\")\r\n        },\r\n        beforeSend: function (jqxhr, settings) {\r\n          settings.data.set(\"session\", ew.SESSION_ID);\r\n          settings.data.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n\r\n          settings.data.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\r\n\r\n          if (ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION) // Do NOT set JWT authorization header if Windows Authentication\r\n            jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\r\n        },\r\n        done: function (e, data) {\r\n          var _data$result, _data$result$files;\r\n\r\n          if (Array.isArray(data == null ? void 0 : (_data$result = data.result) == null ? void 0 : (_data$result$files = _data$result.files) == null ? void 0 : _data$result$files.importfiles)) {\r\n            let ok = true;\r\n            data.result.files.importfiles.forEach(function (file, index) {\r\n              if (file.error) {\r\n                showMessage(ew.language.phrase(\"ImportUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\r\n                ok = false;\r\n              }\r\n            }); // Show upload errors for each file\r\n\r\n            if (ok) importFiles(data.result[ew.API_FILE_TOKEN_NAME]); // Import uploaded files\r\n          }\r\n        },\r\n        change: function (e, data) {\r\n          hideMessage();\r\n        },\r\n        processfail: function (e, data) {\r\n          data.files.forEach(function (file, index) {\r\n            if (file.error) showMessage(ew.language.phrase(\"ImportUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\r\n          }); // Show process errors for each file\r\n        },\r\n        fail: function (e, data) {\r\n          showMessage(ew.language.phrase(\"ImportServerError\").replace(\"%s\", data.textStatus).replace(\"%t\", data.errorThrown), \"text-danger\");\r\n        },\r\n        progressall: function (e, data) {\r\n          uploadProgress(data);\r\n        }\r\n      }, options));\r\n    }\r\n\r\n    $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr);\r\n    $dlg.find(\".modal-footer .ew-close-btn\").off(\"click.ew\").on(\"click.ew\", function () {\r\n      let $this = $__default.default(this);\r\n\r\n      if ($this.data(\"imported\")) {\r\n        $this.data(\"imported\", false);\r\n        window.location.reload();\r\n      }\r\n    });\r\n    hideMessage();\r\n    ew.importDialog = $dlg.on(\"show.bs.modal\", function () {\r\n      var _this$querySelector, _table3, _table4;\r\n\r\n      hideProgress();\r\n      (_this$querySelector = this.querySelector(\".modal-footer .ew-import-btn\")) == null ? void 0 : _this$querySelector.classList.add(\"d-none\");\r\n      (_table3 = table) == null ? void 0 : _table3.element.removeAttribute(\"style\");\r\n      (_table4 = table) == null ? void 0 : _table4.destroy();\r\n      table = null;\r\n    }).modal(\"show\");\r\n    return false;\r\n  } // Auto-fill\r\n\r\n  function autoFill(el) {\r\n    let f = forms.get(el).$element[0];\r\n    if (!f) return;\r\n    let ar = getOptionValues(el),\r\n        id = getId(el),\r\n        m = id.match(/^([xy])(\\d*)_/),\r\n        rowindex = m ? m[2] : \"\",\r\n        list = forms.get(el).getList(id),\r\n        dest_array = list.autoFillTargetFields;\r\n\r\n    let success = function (data) {\r\n      let results = data == null ? void 0 : data.records,\r\n          result = Array.isArray(results) && results.length > 0 ? results[0] : [];\r\n\r\n      for (let j = 0; j < dest_array.length; j++) {\r\n        let destEl = getElements(dest_array[j].replace(/^x_/, \"x\" + rowindex + \"_\"), f);\r\n\r\n        if (destEl) {\r\n          let val = $__default.default.isValue(result[\"af\" + j]) ? String(result[\"af\" + j]) : \"\",\r\n              args = {\r\n            results,\r\n            result,\r\n            data: val,\r\n            form: f,\r\n            name: id,\r\n            target: dest_array[j],\r\n            cancel: false,\r\n            trigger: true\r\n          };\r\n          $__default.default(el).trigger(\"autofill\", [args]); // Fire event\r\n\r\n          if (args.cancel) continue;\r\n          val = args.data; // Process the value\r\n\r\n          if (destEl.options) {\r\n            // Selection list\r\n            selectOption(destEl, val.split(\",\"));\r\n\r\n            if (isAutoSuggest(destEl)) {\r\n              // Auto-Suggest\r\n              destEl.input.value = val;\r\n              updateOptions.call(forms.get(f.id), destEl);\r\n            }\r\n          } else if (isHiddenTextArea(destEl)) {\r\n            // HTML editor\r\n            destEl.value = val;\r\n            $__default.default(destEl).data(\"editor\").set();\r\n          } else if (destEl.type == \"checkbox\") {\r\n            // Boolean checkbox\r\n            destEl.checked = convertToBool(val);\r\n          } else {\r\n            destEl.value = val;\r\n          }\r\n\r\n          if (args.trigger) $__default.default(destEl).trigger(\"change\");\r\n        }\r\n      }\r\n\r\n      return result;\r\n    };\r\n\r\n    if (ar.length > 0 && ar[0] != \"\") {\r\n      let data = Object.assign({\r\n        page: list.page,\r\n        field: list.field,\r\n        ajax: \"autofill\",\r\n        v0: ar[0],\r\n        language: ew.LANGUAGE_ID\r\n      }, getUserParams('#p_' + id, f)); // Add parent field values\r\n\r\n      let parentId = list.parentFields.slice(); // Clone\r\n\r\n      if (rowindex != \"\") {\r\n        for (let i = 0, len = parentId.length; i < len; i++) {\r\n          let ar = parentId[i].split(\" \");\r\n          if (ar.length == 1) // Parent field in the same table, add row index\r\n            parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\r\n        }\r\n      }\r\n\r\n      let arp = parentId.map(pid => getOptionValue(pid, f)); // Get parent field values\r\n\r\n      arp.forEach((p, i) => data[\"v\" + (i + 1)] = p); // Filter by parent fields\r\n\r\n      return $__default.default.post(getApiUrl(ew.API_LOOKUP_ACTION), data, success, \"json\");\r\n    }\r\n\r\n    return success();\r\n  } // Set up tooltip links as popovers\r\n\r\n  function tooltip(i, el) {\r\n    var $this = $__default.default(el),\r\n        $tt = $__default.default(\"#\" + $this.data(\"tooltip-id\")),\r\n        trig = $this.data(\"trigger\") || \"hover\",\r\n        dir = $this.data(\"placement\") || \"auto\";\r\n    if (!$tt[0] || $tt.text().trim() == \"\" && !$tt.find(\"img[src!='']\")[0]) return;\r\n\r\n    if (!bootstrap.Popover.getInstance(el)) {\r\n      $this.popover({ ...ew.popoverOptions,\r\n        placement: dir,\r\n        trigger: trig,\r\n        delay: 100,\r\n        container: document.getElementById(\"ew-tooltip\"),\r\n        content: $tt.html()\r\n      }).on(\"show.bs.popover\", function () {\r\n        var wd = $this.data(\"tooltip-width\");\r\n        if (wd) // Set width before show\r\n          $__default.default(bootstrap.Popover.getInstance(this)._getTipElement()).css(\"max-width\", parseInt(wd, 10) + \"px\");\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Init search filters\r\n   */\r\n\r\n  function initSearchFilters(e) {\r\n    var _e$target11;\r\n\r\n    let el = (_e$target11 = e == null ? void 0 : e.target) != null ? _e$target11 : document,\r\n        btn = el == null ? void 0 : el.querySelector(\".ew-filter-option\");\r\n\r\n    if (ew.CLIENT_SEARCH_FILTER || ew.SERVER_SEARCH_FILTER && ew.IS_LOGGEDIN && !ew.IS_SYS_ADMIN && ew.CURRENT_USER_NAME != \"\") {\r\n      $__default.default(btn).removeClass(\"d-none\").find(\".ew-btn-dropdown\").on(\"show.bs.dropdown\", function (e) {\r\n        var _frm$filterList$filte, _frm$filterList;\r\n\r\n        let formId = $__default.default(this).find(\".ew-save-filter[data-form], .ew-delete-filter[data-form]\").data(\"form\"),\r\n            frm = ew.forms.get(formId),\r\n            filters = ew.CLIENT_SEARCH_FILTER ? ew.parseJson(localStorage.getItem(ew.PROJECT_NAME + \"_\" + frm.id + \"_filters\") || \"[]\") || [] : (_frm$filterList$filte = frm == null ? void 0 : (_frm$filterList = frm.filterList) == null ? void 0 : _frm$filterList.filters) != null ? _frm$filterList$filte : [];\r\n        frm.setupFilters(e, filters.filter(val => Array.isArray(val) && val.length == 2));\r\n      });\r\n    } else {\r\n      btn == null ? void 0 : btn.classList.add(\"d-none\");\r\n    }\r\n  }\r\n  /**\r\n   * Show dialog for email sending\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {MouseEvent} args.evt - Event\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {Object} args.key - Key as object\r\n   * @param {boolean} args.exportSelected - Exported selected only\r\n   * @param {string} args.url - URL of content (for Custom Template)\r\n   * @param {string} args.exportId - Export ID (for Custom Template)\r\n   * @returns false\r\n   */\r\n\r\n  function emailDialogShow(args) {\r\n    let $dlg = ew.emailDialog || $__default.default(\"#ew-email-dialog\").on(\"shown.bs.modal\", e => setTimeout(() => {\r\n      var _e$target$querySelect;\r\n\r\n      return (_e$target$querySelect = e.target.querySelector(\".modal-body .form-control\")) == null ? void 0 : _e$target$querySelect.focus();\r\n    }, 200)).on(\"click\", \".modal-footer .btn-primary\", function (e) {\r\n      var _$$closest$find$data;\r\n\r\n      e.preventDefault();\r\n      if ((_$$closest$find$data = $__default.default(this).closest(\".modal\").find(\".modal-body form\").data(\"form\")) != null && _$$closest$find$data.submit()) $dlg.modal(\"hide\");\r\n    });\r\n\r\n    if (!$dlg[0]) {\r\n      _alert(\"DIV #ew-email-dialog not found.\");\r\n\r\n      return false;\r\n    }\r\n\r\n    let form = args.evt.currentTarget.form;\r\n\r\n    if (args.exportSelected && !keySelected(form)) {\r\n      _alert(ew.language.phrase(\"NoRecordSelected\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    let $f = $dlg.find(\".modal-body form\"),\r\n        frm = $f.data(\"form\");\r\n\r\n    if (!frm) {\r\n      frm = new FormBuilder().setId($f.attr(\"id\")).addFields([[\"sender\", [ew.Validators.required(ew.language.phrase(\"Sender\")), ew.Validators.email]], [\"recipient\", [ew.Validators.required(ew.language.phrase(\"Recipient\")), ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperRecipientEmail\"))]], [\"cc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperCcEmail\"))], [\"bcc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperBccEmail\"))], [\"subject\", ew.Validators.required(ew.language.phrase(\"Subject\"))]]).setValidate(function () {\r\n        return this.validateFields();\r\n      }).setSubmit(function () {\r\n        if (!this.validate()) return false;\r\n        let data = mergeSearchParams($f.serialize(), args.key, getchartParams(), form && args.exportSelected ? $__default.default(form).find(\"input[type=checkbox][name='key_m[]']:checked\").serialize() : null); // Export selected\r\n\r\n        $dlg.modal(\"hide\");\r\n        args.custom // Custom Template\r\n        ? _export({ ...args,\r\n          ...{\r\n            export: \"email\",\r\n            custom: true,\r\n            emailForm: $f[0]\r\n          }\r\n        }) : exportEmail($f.find(\"#tblvar\").val(), data);\r\n        return false;\r\n      }).build();\r\n      $f.data(\"form\", frm);\r\n    }\r\n\r\n    ew.emailDialog = $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr).end().modal(\"show\");\r\n    return false;\r\n  } // Export to email\r\n\r\n  function exportEmail(tblVar, data) {\r\n    let swal = window.parent.Swal; // Use window.parent.Swal in case in iframe\r\n\r\n    data = mergeSearchParams(data, [[ew.TOKEN_NAME_KEY, ew.TOKEN_NAME], [ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN]]);\r\n    return swal.fire({ ...ew.sweetAlertSettings,\r\n      showConfirmButton: false,\r\n      html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\r\n      allowOutsideClick: false,\r\n      allowEscapeKey: false,\r\n      willOpen: () => {\r\n        swal.showLoading();\r\n\r\n        _fetch(getApiUrl([ew.API_EXPORT_ACTION, \"email\", tblVar]) + \"?rnd=\" + random(), {\r\n          // Post to Export API\r\n          method: \"POST\",\r\n          body: data\r\n        }).then(async response => {\r\n          swal.hideLoading();\r\n          let result = await response.json();\r\n\r\n          if (result != null && result.success) {\r\n            swal.update({\r\n              html: \"<div class='text-success'>\" + result.message + \"</div>\"\r\n            });\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"done\",\r\n              tblVar,\r\n              data,\r\n              result\r\n            }]);\r\n          } else {\r\n            var _ref3;\r\n\r\n            swal.update({\r\n              html: (_ref3 = \"<div class='text-danger'>\" + getError(result)) != null ? _ref3 : ew.language.phrase(\"FailedToExport\") + \"</div>\"\r\n            });\r\n            $document$1.trigger(\"export\", [{\r\n              type: \"fail\",\r\n              tblVar,\r\n              data,\r\n              result\r\n            }]);\r\n          }\r\n        }).catch(error => {\r\n          var _ref4;\r\n\r\n          swal.hideLoading();\r\n          swal.update({\r\n            html: (_ref4 = \"<div class='text-danger'>\" + error) != null ? _ref4 : ew.language.phrase(\"FailedToExport\") + \"</div>\"\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"fail\",\r\n            tblVar,\r\n            data,\r\n            error\r\n          }]);\r\n        }).finally(() => {\r\n          swal.update({\r\n            showConfirmButton: true\r\n          });\r\n          $document$1.trigger(\"export\", [{\r\n            type: \"always\",\r\n            tblVar,\r\n            data\r\n          }]);\r\n        });\r\n      }\r\n    });\r\n  } // Show drill down\r\n\r\n  function showDrillDown(e, obj, url, id, hdr) {\r\n    if (e != null && e.ctrlKey) {\r\n      let newUrl = setSearchParams(url, {\r\n        d: \"2\"\r\n      }); // Change \"d\" parameter to 2\r\n\r\n      return redirect(newUrl);\r\n    }\r\n\r\n    var $obj = $__default.default(obj);\r\n    var pos = $obj.data(\"drilldown-placement\") || \"auto\";\r\n    var args = {\r\n      obj: $obj[0],\r\n      placement: pos,\r\n      id,\r\n      url,\r\n      hdr\r\n    };\r\n    $document$1.trigger(\"drilldown\", [args]);\r\n    var ar = args.url.split(\"?\");\r\n    args.file = ar[0] || \"\";\r\n    args.data = ar[1] || \"\";\r\n\r\n    if (!bootstrap.Popover.getInstance(obj)) {\r\n      $obj.popover({ ...ew.popoverOptions,\r\n        placement: args.placement,\r\n        trigger: \"manual\",\r\n        title: args.hdr,\r\n        template: '<div class=\"popover\" role=\"tooltip\"><h3 class=\"popover-header d-none\" style=\"cursor: move;\"></h3><div class=\"popover-body\"></div></div>',\r\n        // No .popover-arrow\r\n        content: ew.spinnerTemplate(),\r\n        container: $__default.default(\"#ew-drilldown-panel\").draggable(ew.draggableOptions),\r\n        boundary: \"viewport\"\r\n      }).on(\"show.bs.popover\", function (e) {\r\n        $obj.attr(\"data-original-title\", \"\");\r\n      }).on(\"shown.bs.popover\", function (e) {\r\n        if (!$obj.data(\"args\")) return;\r\n        var data = $obj.data(\"args\").data;\r\n        $__default.default.ajax({\r\n          cache: false,\r\n          dataType: \"html\",\r\n          type: \"POST\",\r\n          data: data,\r\n          url: $obj.data(\"args\").file,\r\n          success: function (data) {\r\n            var $tip = $__default.default(bootstrap.Popover.getInstance(obj)._getTipElement());\r\n            if (args.hdr) $tip.find(\".popover-header\").empty().removeClass(\"d-none\").append('<button type=\"button\" class=\"btn-close\" aria-label=\"' + ew.language.phrase(\"CloseBtn\") + '\"></button>' + args.hdr).find(\".btn-close\").on(\"click\", function () {\r\n              $obj.popover(\"hide\");\r\n            });\r\n            var m = data.match(/<body[^>]*>([\\s\\S]*?)<\\/body\\s*>/i); // Use HTML in document body only\r\n\r\n            data = m ? m[0] : data;\r\n            var html = ew.stripScript(data);\r\n            $tip.find(\".popover-body\").html($__default.default(\"<div></div>\").html(html).find(\"#ew-report\")) // Insert the container table only\r\n            .find(\".ew-table\").each(ew.setupTable);\r\n            ew.executeScript(data, id, true);\r\n            $obj.popover(\"update\");\r\n          },\r\n          error: function (o) {\r\n            if (o.responseText) {\r\n              let popover = bootstrap.Popover.getInstance(obj);\r\n\r\n              if ($__default.default.isString(o.responseText) && o.responseText.startsWith(\"{\") && o.responseText.endsWith(\"}\")) {\r\n                var _result$error12, _result$error13;\r\n\r\n                var result = parseJson(o.responseText);\r\n\r\n                if (result != null && (_result$error12 = result.error) != null && _result$error12.type && result != null && (_result$error13 = result.error) != null && _result$error13.description) {\r\n                  popover == null ? void 0 : popover.hide();\r\n                  return _alert({\r\n                    title: result.error.type,\r\n                    html: result.error.description,\r\n                    customClass: {\r\n                      title: \"ew-swal2-title text-danger\",\r\n                      htmlContainer: \"ew-swal2-html-container text-danger\"\r\n                    }\r\n                  });\r\n                }\r\n              }\r\n\r\n              popover == null ? void 0 : popover.setContent({\r\n                \".popover-body\": '<p class=\"text-danger\">' + o.responseText + '</p>'\r\n              });\r\n            }\r\n          }\r\n        });\r\n      }).on(\"hidden.bs.popover\", function (e) {\r\n        ew.removeScript(id);\r\n      });\r\n    }\r\n\r\n    $obj.data(\"args\", args).popover(\"show\");\r\n  }\r\n  /**\r\n   * Ajax query\r\n   * @param {Object} data - Object to passed to API\r\n   * @param {callback} callback - Callback function for async request (see http://api.jquery.com/jQuery.post/), empty for sync request\r\n   * @returns {string|string[]}\r\n   */\r\n\r\n  function ajax(data, callback) {\r\n    if (!$__default.default.isObject(data) || !data.url && !data.action) return undefined;\r\n    var action;\r\n\r\n    if (data.url) {\r\n      if (data.url.startsWith(getApiUrl())) action = data.url.replace(getApiUrl(), \"\").split(\"/\")[0];else if (data.url.startsWith(ew.API_URL)) action = data.url.replace(ew.API_URL, \"\").split(\"/\")[0];\r\n    } else {\r\n      action = data.action;\r\n      delete data.action;\r\n    }\r\n\r\n    var obj = Object.assign({}, data);\r\n\r\n    var _convert = response => {\r\n      if ($__default.default.isObject(response) && response.result == \"OK\") {\r\n        var results = response.records;\r\n\r\n        if (Array.isArray(results) && results.length == 1) {\r\n          // Single row\r\n          results = results[0];\r\n          if (Array.isArray(results) && results.length == 1) // Single column\r\n            return results[0]; // Return a value\r\n          else return results; // Return a row\r\n        }\r\n\r\n        return results;\r\n      }\r\n\r\n      return response;\r\n    };\r\n\r\n    var url = obj.url || getApiUrl(action),\r\n        // URL\r\n    type = obj.type || ([ew.API_LIST_ACTION, ew.API_VIEW_ACTION, ew.API_DELETE_ACTION].includes(action) ? \"GET\" : \"POST\");\r\n    delete obj.url;\r\n    delete obj.type;\r\n    obj.dataType = \"json\";\r\n\r\n    if (isFunction$1(callback)) {\r\n      // Async\r\n      $__default.default.ajax({\r\n        url: url,\r\n        type: type,\r\n        data: obj,\r\n        success: function (response) {\r\n          callback(_convert(response));\r\n        }\r\n      });\r\n    } else {\r\n      // Sync\r\n      var response = $__default.default.ajax({\r\n        url: url,\r\n        async: false,\r\n        type: type,\r\n        data: obj\r\n      });\r\n      return _convert(response.responseJSON);\r\n    }\r\n  } // Get URL of current page\r\n\r\n  function currentPage() {\r\n    return location.href.split(\"#\")[0].split(\"?\")[0];\r\n  } // Toggle search operator\r\n\r\n  function toggleSearchOperator(e, id, value) {\r\n    var el = e.currentTarget.form.elements[id];\r\n    if (!el) return;\r\n    el.value = el.value != value ? value : \"=\";\r\n  } // Toggle multi-column layout\r\n\r\n  function toggleLayout(el) {\r\n    var _bootstrap$Tooltip$ge6;\r\n\r\n    (_bootstrap$Tooltip$ge6 = bootstrap.Tooltip.getInstance(el)) == null ? void 0 : _bootstrap$Tooltip$ge6.hide();\r\n    document.body.style.cursor = \"wait\";\r\n    fetch(sanitizeUrl(setLayout(el.dataset.url, el.dataset.layout))).then(response => response.text()).then(html => {\r\n      let $grid = $__default.default(\".ew-multi-column-grid\").html($__default.default(\"<div>\" + html + \"</div>\").find(\".ew-multi-column-grid\").html());\r\n      ew.initPage({\r\n        target: $grid[0]\r\n      });\r\n      $grid.trigger(\"load.ew\");\r\n    }).catch(error => _alert(error)).finally(() => document.body.style.cursor = \"default\");\r\n  } // Copy inner text to clipboard\r\n\r\n  function copyToClipboard(source) {\r\n    var _source, _source2;\r\n\r\n    source = $__default.default.isString(source) ? document.querySelector(source) : source;\r\n    const str = ((_source = source) == null ? void 0 : _source.value) || ((_source2 = source) == null ? void 0 : _source2.innerText);\r\n\r\n    if (str) {\r\n      const el = document.createElement(\"textarea\");\r\n      el.value = str;\r\n      el.setAttribute(\"readonly\", \"\");\r\n      el.style.position = \"absolute\";\r\n      el.style.left = \"-9999px\";\r\n      document.body.appendChild(el);\r\n      el.select();\r\n      document.execCommand(\"copy\");\r\n      document.body.removeChild(el);\r\n    }\r\n\r\n    return str;\r\n  }\r\n  /**\r\n   * Validators\r\n   */\r\n  // Check integer\r\n\r\n  function checkInteger(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    if (object_value.includes(ew.DECIMAL_SEPARATOR)) return false;\r\n    return checkNumber(object_value);\r\n  } // Check number\r\n\r\n  function checkNumber(object_value) {\r\n    object_value = String(object_value);\r\n    if (!object_value || object_value.length == 0) return true;\r\n    object_value = object_value.trim(); // let re = new RegExp(\"^[+\\-\\d\\s%\" + escapeRegExChars(ew.DECIMAL_SEPARATOR) + escapeRegExChars(ew.GROUPING_SEPARATOR) + ew.CURRENCY_SYMBOL + \"]+$\");\r\n    // return re.test(object_value) && ew.parseNumber(object_value) !== null;\r\n\r\n    return ew.parseNumber(object_value) !== null;\r\n  } // Escape regular expression chars\r\n\r\n  function escapeRegExChars(str) {\r\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n  } // Check range\r\n\r\n  function checkRange(object_value, min_value, max_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n\r\n    if ($__default.default.isNumber(min_value) || $__default.default.isNumber(max_value)) {\r\n      // Number\r\n      if (checkNumber(object_value)) object_value = ew.parseNumber(object_value);\r\n    }\r\n\r\n    if (min_value !== null && object_value < min_value) return false;\r\n    if (max_value !== null && object_value > max_value) return false;\r\n    return true;\r\n  } // Check phone\r\n\r\n  function checkPhone(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\(\\d{3}\\) ?\\d{3}( |-)?\\d{4}|^\\d{3}( |-)?\\d{3}( |-)?\\d{4}$/.test(object_value.trim());\r\n  } // Check zip\r\n\r\n  function checkZip(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^\\d{5}$|^\\d{5}-\\d{4}$/.test(object_value.trim());\r\n  } // Check credit card\r\n\r\n  function checkCreditCard(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var creditcard_string = object_value.replace(/\\D/g, \"\");\r\n    if (creditcard_string.length == 0) return false;\r\n    var doubledigit = creditcard_string.length % 2 == 1 ? false : true;\r\n    var tempdigit,\r\n        checkdigit = 0;\r\n\r\n    for (var i = 0, len = creditcard_string.length; i < len; i++) {\r\n      tempdigit = parseInt(creditcard_string.charAt(i), 10);\r\n\r\n      if (doubledigit) {\r\n        tempdigit *= 2;\r\n        checkdigit += tempdigit % 10;\r\n        if (tempdigit / 10 >= 1.0) checkdigit++;\r\n        doubledigit = false;\r\n      } else {\r\n        checkdigit += tempdigit;\r\n        doubledigit = true;\r\n      }\r\n    }\r\n\r\n    return checkdigit % 10 == 0;\r\n  } // Check social security number\r\n\r\n  function checkSsn(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(?!000)([0-6]\\d{2}|7([0-6]\\d|7[012]))([ -]?)(?!00)\\d\\d\\3(?!0000)\\d{4}$/.test(object_value.trim());\r\n  } // Check emails\r\n\r\n  function checkEmails(object_value, email_cnt) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    var arEmails = object_value.replace(/,/g, \";\").split(\";\");\r\n\r\n    for (var i = 0, len = arEmails.length; i < len; i++) {\r\n      if (email_cnt > 0 && len > email_cnt) return false;\r\n      if (!checkEmail(arEmails[i])) return false;\r\n    }\r\n\r\n    return true;\r\n  } // Check email\r\n\r\n  function checkEmail(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^[\\w.%+-]+@[\\w.-]+\\.[A-Z]{2,18}$/i.test(object_value.trim());\r\n  } // Check GUID {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}\r\n\r\n  function checkGuid(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return /^(\\{\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}\\}|\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12})$/.test(object_value.trim());\r\n  } // Check URL\r\n\r\n  function checkUrl(object_value) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n\r\n    try {\r\n      new URL(object_value);\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  } // Check by regular expression\r\n\r\n  function checkByRegEx(object_value, pattern) {\r\n    if (!object_value || object_value.length == 0) return true;\r\n    return !!object_value.match(pattern);\r\n  }\r\n  /**\r\n   * Show message dialog\r\n   *\r\n   * @param {Event|string} arg - Event or message\r\n   * @returns\r\n   */\r\n\r\n  function showMessage(arg) {\r\n    var _arg$target;\r\n\r\n    let doc, swal;\r\n\r\n    try {\r\n      // Note: If a window does not have a parent, its parent property is a reference to itself.\r\n      [doc, swal] = [window.parent.document, window.parent.Swal];\r\n    } catch (e) {\r\n      // In case window.parent.document cannot be accessed\r\n      [doc, swal] = [window.document, window.Swal];\r\n    }\r\n\r\n    let p = (_arg$target = arg == null ? void 0 : arg.target) != null ? _arg$target : doc,\r\n        $div = $__default.default(p).find(\"div.ew-message-dialog.d-none\").first(),\r\n        msg = $div.length ? $div.text() : \"\"; // Text only\r\n\r\n    if ($__default.default.isString(arg)) msg = $__default.default(\"<div>\" + arg.trim() + \"</div>\").text();\r\n    if (msg.trim() == \"\") return;\r\n\r\n    if ($div.length) {\r\n      [\"success\", \"info\", \"warning\", \"danger\"].forEach(function (type) {\r\n        let $alert = $div.find(\".alert-\" + type).toggleClass(\"alert-\" + type),\r\n            $heading = $alert.find(\".alert-heading\").detach(),\r\n            $content = $alert.children(\":not(.icon)\");\r\n        $alert.find(\".icon\").remove();\r\n\r\n        if ($alert[0]) {\r\n          let w = parseInt($content.css(\"width\"), 10); // Width specified\r\n\r\n          if (w > 0) $content.first().css(\"width\", \"auto\");\r\n          let $toast = showToast($alert.html(), type, $heading.html());\r\n          if (w > 0) $toast.css(\"max-width\", w); // Override bootstrap .toast max-width\r\n\r\n          return;\r\n        }\r\n      });\r\n    }\r\n\r\n    if ($__default.default.isString(arg)) {\r\n      return swal.fire({ ...ew.sweetAlertSettings,\r\n        html: arg\r\n      });\r\n    }\r\n  } // Random number\r\n\r\n  function random() {\r\n    return Math.floor(Math.random() * 100001) + 100000;\r\n  } // File upload\r\n\r\n  function upload(input) {\r\n    let $input = $__default.default(input);\r\n    if ($input.data(\"blueimpFileupload\")) return;\r\n    let id = $input.attr(\"name\"),\r\n        nid = id.replace(/\\$/g, \"\\\\$\"),\r\n        tbl = $input.data(\"table\"),\r\n        multiple = $input.is(\"[multiple]\"),\r\n        $dropzone = $input.closest(\".ew-file-drop-zone\"),\r\n        $p = $input.closest(fieldContainerSelector),\r\n        $ft = $p.find(\"#ft_\" + nid),\r\n        $fn = $p.find(\"#fn_\" + nid),\r\n        $fa = $p.find(\"#fa_\" + nid),\r\n        $label = $p.find(\".ew-file-label\"),\r\n        label = $label.html();\r\n\r\n    let _done = function (e, data) {\r\n      if (data.result.files[0].error) return;\r\n      let name = data.result.files[0].name,\r\n          ar = multiple ? $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [] : [];\r\n      ar.push(name);\r\n      $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n      $fa.val(\"0\");\r\n      if (!multiple) // Remove other entries if not multiple upload\r\n        $ft.find(\"tbody > tr:not(:last-child)\").remove();\r\n    };\r\n\r\n    let _deleted = function (e, data) {\r\n      let url = e.originalEvent.target.dataset.url,\r\n          params = getSearchParams(url),\r\n          fid = params.get(\"id\"),\r\n          name = params.get(fid);\r\n\r\n      if (name) {\r\n        let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [],\r\n            index = ar.indexOf(name);\r\n        if (index > -1) ar.splice(index, 1);\r\n        $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\r\n        $fa.val(\"0\");\r\n      }\r\n    };\r\n\r\n    let _change = function (e, data) {\r\n      var _data$files;\r\n\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files = data.files) == null ? void 0 : _data$files.length) > 0);\r\n      let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n      data.files.forEach(file => ar.push(file.name));\r\n      let cnt = $input.data(\"maxNumberOfFiles\");\r\n\r\n      if ($__default.default.isNumber(cnt) && cnt > 0 && ar.length > cnt) {\r\n        _alert(ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"));\r\n\r\n        return false;\r\n      }\r\n\r\n      let l = $input.data(\"size\");\r\n\r\n      if ($__default.default.isNumber(l) && l > 0 && ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR).length > l) {\r\n        _alert(ew.language.phrase(\"UploadErrorMaxFileLength\"));\r\n\r\n        return false;\r\n      }\r\n    };\r\n\r\n    let _confirmDelete = function (e) {\r\n      if (!multiple && $fn.val()) {\r\n        if (!confirm(ew.language.phrase(\"UploadOverwrite\"))) {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }\r\n      }\r\n    };\r\n\r\n    let _changed = function (e, data) {\r\n      var _data$files2, _data$result2, _data$result2$files;\r\n\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files2 = data.files) == null ? void 0 : _data$files2.length) > 0 || ((_data$result2 = data.result) == null ? void 0 : (_data$result2$files = _data$result2.files) == null ? void 0 : _data$result2$files.length) > 0);\r\n      let ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\r\n      $label.html(ar.join(\", \") || label);\r\n    };\r\n\r\n    let _completed = function (e, data) {\r\n      // After download template rendered\r\n      let evt = {\r\n        target: data.context\r\n      };\r\n      initLightboxes(evt);\r\n      initPdfObjects(evt);\r\n      ew.updateDropdownPosition();\r\n      data.context.find(\"img\").on(\"load\", ew.updateDropdownPosition);\r\n    };\r\n\r\n    let _added = function (e, data) {\r\n      var _data$files3;\r\n\r\n      // After upload template rendered\r\n      $ft.toggleClass(\"ew-has-rows\", ((_data$files3 = data.files) == null ? void 0 : _data$files3.length) > 0);\r\n      data.context.find(\".start\").click(_confirmDelete);\r\n    }; // let _send = function(e, data) { // Before each file upload request\r\n    //     console.log(data);\r\n    // };\r\n\r\n    let uploadUrl = getApiUrl(ew.API_JQUERY_UPLOAD_ACTION),\r\n        _downloadTemplate = $__default.default.templates(\"#template-download\"),\r\n        _uploadTemplate = $__default.default.templates(\"#template-upload\"),\r\n        form = getForm(input),\r\n        $form = $__default.default(form),\r\n        readonly = $form.find(\"#confirm\").val() == \"confirm\" || $input.attr(\"readonly\") || $input.prop(\"disabled\");\r\n\r\n    if (readonly && !$input.prop(\"disabled\")) $input.prop(\"disabled\", true); // Disable input button if readonly\r\n\r\n    const {\r\n      acceptFileTypes,\r\n      maxFileSize,\r\n      maxNumberOfFiles\r\n    } = $input.data();\r\n    const formData = {\r\n      id: id,\r\n      table: tbl,\r\n      session: ew.SESSION_ID,\r\n      replace: multiple ? \"0\" : \"1\",\r\n      acceptFileTypes,\r\n      maxFileSize,\r\n      maxNumberOfFiles\r\n    };\r\n    $input.fileupload(ew.deepAssign({\r\n      url: uploadUrl,\r\n      type: \"POST\",\r\n      multipart: true,\r\n      autoUpload: true,\r\n      loadImageFileTypes: /^image\\/(gif|jpe?g|png)$/i,\r\n      loadVideoFileTypes: /^video\\/mp4$/i,\r\n      loadAudioFileTypes: /^audio\\/(mpeg|mp3)$/i,\r\n      filesContainer: $ft,\r\n      uploadTemplateId: null,\r\n      downloadTemplateId: null,\r\n      uploadTemplate: _uploadTemplate.render.bind(_uploadTemplate),\r\n      downloadTemplate: _downloadTemplate.render.bind(_downloadTemplate),\r\n      previewMaxWidth: ew.UPLOAD_THUMBNAIL_WIDTH,\r\n      previewMaxHeight: ew.UPLOAD_THUMBNAIL_HEIGHT,\r\n      dropZone: $dropzone,\r\n      messages: {\r\n        acceptFileTypes: ew.language.phrase(\"UploadErrorAcceptFileTypes\"),\r\n        maxNumberOfFiles: ew.language.phrase(\"UploadErrorMaxNumberOfFiles\"),\r\n        maxFileSize: ew.language.phrase(\"UploadErrorMaxFileSize\"),\r\n        minFileSize: ew.language.phrase(\"UploadErrorMinFileSize\")\r\n      },\r\n      formData,\r\n      readonly // Custom\r\n\r\n    }, ew.uploadOptions)) // .on(\"fileuploadsend\", _send)\r\n    .on(\"fileuploaddone\", _done).on(\"fileuploaddestroy\", _deleted).on(\"fileuploadchange\", _change).on(\"fileuploadadded fileuploadfinished fileuploaddestroyed\", _changed).on('fileuploadadded', _added).on('fileuploadcompleted', _completed);\r\n\r\n    if ($fn.val()) {\r\n      $__default.default.ajax({\r\n        url: uploadUrl,\r\n        data: {\r\n          id: id,\r\n          table: tbl,\r\n          session: ew.SESSION_ID\r\n        },\r\n        dataType: \"json\",\r\n        context: this,\r\n        success: function (result) {\r\n          if (result != null && result[id]) {\r\n            let done = $input.fileupload(\"option\", \"done\");\r\n            if (done) done.call(input, $__default.default.Event(), {\r\n              result: {\r\n                files: result[id]\r\n              }\r\n            }); // Use \"files\"\r\n          }\r\n\r\n          if (readonly) // Hide delete button if readonly\r\n            $ft.find(\"td.delete\").hide();\r\n        }\r\n      });\r\n    }\r\n  }\r\n  /**\r\n   * Convert data to number\r\n   *\r\n   * @param {*} data - Data being converted\r\n   * @returns {number}\r\n   */\r\n\r\n  function parseNumber(data) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.parse(data, {\r\n      locale\r\n    });\r\n  }\r\n  /**\r\n   * Get numbering system\r\n   */\r\n\r\n  function getNumberingSystem() {\r\n    return ew.NUMBERING_SYSTEM || new Intl.NumberFormat(ew.LANGUAGE_ID).resolvedOptions().numberingSystem;\r\n  }\r\n  let DateTime = luxon__default.default.DateTime,\r\n      Interval = luxon__default.default.Interval;\r\n  /**\r\n   * Format data by DateTime (see https://moment.github.io/luxon/docs/class/src/datetime.js~DateTime.html)\r\n   *\r\n   * @param {string|Number|Date} data - Date\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/docs/manual/formatting.html#toformat)\r\n   * @returns {string}\r\n   */\r\n\r\n  function formatDateTime(data, format) {\r\n    let dt;\r\n    if ($__default.default.isString(data)) // SQL dates, times, and datetimes\r\n      dt = DateTime.fromSQL(data, {\r\n        zone: \"utc\"\r\n      }); // Do not change the time zone\r\n    else if ($__default.default.isNumber(data)) // Unix timestamps\r\n      dt = DateTime.fromSeconds(data, {\r\n        zone: \"utc\"\r\n      });else if (data instanceof Date) // JS Date Object\r\n      dt = DateTime.fromJSDate(data, {\r\n        zone: \"utc\"\r\n      });else if (data instanceof DateTime) // DateTime Object\r\n      dt = data;\r\n    return dt.toFormat(format, {\r\n      locale: ew.LANGUAGE_ID,\r\n      numberingSystem: ew.getNumberingSystem()\r\n    });\r\n  }\r\n  /**\r\n   * Format time span\r\n   *\r\n   * @param {Date} start - JS start date/time\r\n   * @param {Date} end - JS end date/time\r\n   * @param {bool} allDay - Whether event is all day\r\n   * @returns {string}\r\n   */\r\n\r\n  function formatTimeSpan(start, end, allDay) {\r\n    let from = DateTime.fromJSDate(start, {\r\n      zone: \"utc\"\r\n    }),\r\n        to = DateTime.fromJSDate(end, {\r\n      zone: \"utc\"\r\n    });\r\n    if (to.isValid && to.equals(to.startOf(\"day\"))) // 12:00AM\r\n      to = to.minus(1); // Minus one millisecond => back to previous day\r\n\r\n    let interval = new Interval({\r\n      start: from,\r\n      end: to\r\n    });\r\n\r\n    if (interval.isValid) {\r\n      // Check if all day\r\n      let days = interval.count() / (24 * 60 * 60 * 1000);\r\n      allDay || (allDay = Number.isInteger(days) && days >= 1);\r\n    }\r\n\r\n    if (allDay) {\r\n      // All day => Show date only\r\n      if (interval.isValid && interval.count(\"days\") > 1 || from.isValid && to.isValid && from.startOf(\"day\") < to.startOf(\"day\")) return formatDateTime(from, ew.DATE_FORMAT) + \" - \" + formatDateTime(to, ew.DATE_FORMAT);else if (from.isValid && !end) // No end date\r\n        return formatDateTime(from, ew.DATE_FORMAT);\r\n      return \"\";\r\n    } else {\r\n      // Not all day => Show date/time\r\n      if (from.isValid && to.isValid) return from.startOf(\"day\") < to.startOf(\"day\") ? formatDateTime(from, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT) + \" - \" + formatDateTime(to, ew.DATE_FORMAT + \" \" + ew.TIME_FORMAT) : formatDateTime(from, ew.TIME_FORMAT) + \" - \" + formatDateTime(to, ew.TIME_FORMAT);else if (from.isValid) return formatDateTime(from, ew.TIME_FORMAT);\r\n    }\r\n\r\n    return \"\";\r\n  }\r\n  /**\r\n   * Parse data to DateTime (see https://moment.github.io/luxon/api-docs/index.html#datetime)\r\n   *\r\n   * @param {string} data - Date/Time string supported by DateTime\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/#/formatting?id=table-of-tokens)\r\n   * @returns {DateTime}\r\n   */\r\n\r\n  function parseDateTime(data, format) {\r\n    return DateTime.fromFormat(data, format, {\r\n      locale: ew.LANGUAGE_ID,\r\n      numberingSystem: ew.getNumberingSystem()\r\n    });\r\n  } // Parse date/time (alias of parseDateTime)\r\n  /**\r\n   * Check if data can be parsed to DateTime (see https://moment.github.io/luxon/api-docs/index.html#datetime)\r\n   *\r\n   * @param {string} data - Date string supported by DateTime\r\n   * @param {string|Array} format - Date format (see https://moment.github.io/luxon/#/formatting?id=table-of-tokens)\r\n   * @returns {boolean}\r\n   */\r\n\r\n  function checkDate(data, format) {\r\n    if (!data || data.length == 0) return true;\r\n    return parseDateTime(data, format).isValid;\r\n  } // Check time (alias of checkDate)\r\n\r\n  function checkTime(data, format) {\r\n    if (!data || data.length == 0) return true;\r\n    return parseDateTime(data, format).isValid;\r\n  }\r\n  /**\r\n   * Format currency\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n\r\n  function formatCurrency(value, format) {\r\n    format || (format = ew.CURRENCY_FORMAT);\r\n\r\n    if (format.includes(\";\")) {\r\n      let formats = format.split(\";\");\r\n      format = value >= 0 ? formats[0] : formats[1];\r\n    }\r\n\r\n    format = format.replace(\"\", \"$\");\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format, {\r\n      locale,\r\n      currency: (ew.IS_RTL ? \"\\u200E\" : \"\") + ew.CURRENCY_SYMBOL\r\n    }); // Make sure the currency symbol position is not moved.\r\n  }\r\n  /**\r\n   * Format number\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n\r\n  function formatNumber(value, format) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format || ew.NUMBER_FORMAT, {\r\n      locale\r\n    });\r\n  }\r\n  /**\r\n   * Format percent\r\n   *\r\n   * @param {number} value - Value\r\n   * @param {string} format - Formatter pattern\r\n   */\r\n\r\n  function formatPercent(value, format) {\r\n    let locale = ew.getLocaleFromPlatform(ew.LANGUAGE_ID);\r\n    if (ew.NUMBERING_SYSTEM == \"latn\") locale.numeralSystem = undefined;\r\n    if (locale.delimiters.thousands !== ew.GROUPING_SEPARATOR) locale.delimiters.thousands = ew.GROUPING_SEPARATOR;\r\n    if (locale.delimiters.decimal !== ew.DECIMAL_SEPARATOR) locale.delimiters.decimal = ew.DECIMAL_SEPARATOR;\r\n    return ew.format(value, format || ew.PERCENT_FORMAT, {\r\n      locale\r\n    });\r\n  }\r\n  /**\r\n   * Init page\r\n   *\r\n   * @param {Event|undefined} e - Event\r\n   */\r\n\r\n  function initPage(e) {\r\n    var _e$target12;\r\n\r\n    var el = (_e$target12 = e == null ? void 0 : e.target) != null ? _e$target12 : document,\r\n        $el = $__default.default(el),\r\n        $tables = $el.find(\"table.ew-table:not(.ew-export-table)\");\r\n    ew.initPanels(el); // Init grid panels\r\n\r\n    ew.renderJsTemplates(e);\r\n    lazyLoad(e);\r\n    initForms(e);\r\n    initTooltips(e);\r\n    initPasswordOptions(e);\r\n    initIcons(e);\r\n    initSearchFilters(e);\r\n    initLightboxes(e);\r\n    initPdfObjects(e);\r\n    $tables.each(setupTable); // Init tables\r\n\r\n    $el.find(\".ew-column-dropdown\").each(function () {\r\n      var _localStorage$getItem;\r\n\r\n      let table = this.dataset.table;\r\n      (_localStorage$getItem = localStorage.getItem(ew.PROJECT_NAME + \"_\" + table + \"_invisible_fields\")) == null ? void 0 : _localStorage$getItem.split(\",\").forEach(field => $__default.default(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"'],td[data-name='\" + field + \"']\").toggleClass(\"d-none\", true));\r\n      $__default.default(this).find(\".ew-dropdown-checkbox\").on(\"click\", function (e) {\r\n        let input = this.querySelector(\".ew-dropdown-check-input[data-field]\"),\r\n            field = input == null ? void 0 : input.dataset.field;\r\n\r\n        if (table && field) {\r\n          input.classList.toggle(\"ew-checked\");\r\n          $__default.default(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"'],td[data-name='\" + field + \"']\").toggleClass(\"d-none\", !input.classList.contains(\"ew-checked\"));\r\n        }\r\n\r\n        localStorage.setItem(ew.PROJECT_NAME + \"_\" + table + \"_invisible_fields\", Array.from(e.currentTarget.closest(\".dropdown-menu\").querySelectorAll(\".ew-dropdown-check-input[data-field]:not(.ew-checked)\"), el => el.dataset.field));\r\n      });\r\n    }).on(\"show.bs.dropdown\", function (e) {\r\n      let table = e.currentTarget.dataset.table,\r\n          inputs = e.currentTarget.querySelectorAll(\".ew-dropdown-check-input[data-field]\");\r\n\r\n      for (let input of inputs) {\r\n        let field = input.dataset.field;\r\n        input.classList.toggle(\"ew-checked\", !!$__default.default(\"#tbl_\" + table + \"list\").find(\"th[data-name='\" + field + \"']:not(.d-none)\")[0]);\r\n      }\r\n    });\r\n    initExportLinks(e);\r\n    initMultiSelectCheckboxes(e); // Report\r\n\r\n    var $rpt = $el.find(\".ew-report\");\r\n\r\n    if ($rpt[0]) {\r\n      $rpt.find(\".card\").on(\"collapsed.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is collapsed\r\n        var $card = $__default.default(this),\r\n            $div = $card.closest(\"[class^='col-']\"),\r\n            mh = $div.css(\"min-height\");\r\n        if (mh) $div.data(\"min-height\", mh);\r\n        $div.css(\"min-height\", 0);\r\n      }).on(\"expanded.lte.widget\", function () {\r\n        // Fix min-height when .lte.widget is expanded\r\n        var $card = $__default.default(this),\r\n            $div = $card.closest(\"[class^='col-']\"),\r\n            mh = $div.css(\"min-height\");\r\n        if (mh) $div.css(\"min-height\", mh); // Restore min-height\r\n      }); // Group expand/collapse button\r\n\r\n      $rpt.find(\".ew-group-toggle\").on(\"click\", function () {\r\n        ew.toggleGroup(this);\r\n      });\r\n    } // Show message\r\n\r\n    if (typeof ew.USE_JAVASCRIPT_MESSAGE != \"undefined\" && ew.USE_JAVASCRIPT_MESSAGE) showMessage(e);\r\n  } // Redirect by HTTP GET or POST\r\n\r\n  function redirect(url, f, method, data) {\r\n    var _ew$vars;\r\n\r\n    let urls = (_ew$vars = ew.vars) != null && _ew$vars.login ? Array.from(Object.entries(ew.vars.login)).filter(entry => entry[0].endsWith(\"Url\")).map(entry => entry[1]) : [];\r\n\r\n    if (urls.includes(url)) {\r\n      // Known URLs\r\n      window.location = url;\r\n      return false;\r\n    }\r\n\r\n    let newUrl;\r\n\r\n    if (url.startsWith(\"http\")) {\r\n      newUrl = new URL(url);\r\n    } else if (url.startsWith(\"/\")) {\r\n      newUrl = new URL(url, location.protocol + \"//\" + location.host);\r\n    } else {\r\n      _alert(ew.language.phrase(\"IncorrectUrl\"));\r\n\r\n      return false;\r\n    }\r\n\r\n    let params = newUrl.searchParams;\r\n    if (data) params = mergeSearchParams(params, data);\r\n\r\n    if (sameText(method, \"post\")) {\r\n      // POST\r\n      const form = f || document.createElement(\"form\");\r\n      form.method = \"post\";\r\n      form.action = url.split(\"?\")[0];\r\n      document.body.appendChild(form);\r\n      params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME);\r\n      params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN);\r\n      params.forEach((value, key) => {\r\n        const el = document.createElement(\"input\");\r\n        el.type = \"hidden\";\r\n        el.name = key;\r\n        el.value = ew.sanitize(value);\r\n        form.appendChild(el);\r\n      });\r\n      form.submit();\r\n    } else {\r\n      // GET\r\n      window.location = sanitizeUrl(newUrl.toString());\r\n    }\r\n\r\n    return false;\r\n  } // Show/Hide password\r\n\r\n  function togglePassword(e) {\r\n    let $btn = $__default.default(e.currentTarget),\r\n        $input = $btn.closest(\".input-group\").find(\"input\"),\r\n        $i = $btn.find(\"i\");\r\n\r\n    if ($input.attr(\"type\") == \"text\") {\r\n      $input.attr(\"type\", \"password\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    } else if ($input.attr(\"type\") == \"password\") {\r\n      $input.attr(\"type\", \"text\");\r\n      $i.toggleClass(\"fa-eye-slash fa-eye\");\r\n    }\r\n  } // Re-order chart\r\n\r\n  function updateChart(el) {\r\n    let url = new URL(el.form.action),\r\n        $container = $__default.default(el).closest(\".ew-chart-top, .ew-chart-bottom\"),\r\n        $overlay = $__default.default(ew.overlayTemplate());\r\n    url.search = $__default.default(el.form).serialize();\r\n    $container.addClass(\"ew-loading\").append($overlay);\r\n    fetch(url.toString()).then(async response => {\r\n      let $html = $__default.default(\"<div>\" + (await response.text()) + \"</div>\"),\r\n          $new = $html.find(\".ew-chart-top, .ew-chart-bottom\").filter(\"[data-chart='\" + $container.data(\"chart\") + \"']\"),\r\n          $debug = $html.find(\".ew-debug\");\r\n      if ($new[0]) $container.replaceWith($new);\r\n      if ($debug[0]) $new.next(\".ew-debug\").replaceWith($debug);\r\n    }).finally(() => $container.removeClass(\"ew-loading\").find($overlay).remove());\r\n  } // Check if larger than mediumn screen width (not mobile)\r\n\r\n  function isMediumScreen() {\r\n    return window.matchMedia(ew.screenMediaQuery).matches;\r\n  } // Check if mobile\r\n\r\n  function isMobile() {\r\n    return ew.IS_MOBILE || !isMediumScreen();\r\n  }\r\n  /**\r\n   * Refresh page\r\n   *\r\n   * @param {Promise} promise Promise returned by fetch()\r\n   * @param {string} context CSS class name of context\r\n   * @returns {Promise}\r\n   */\r\n\r\n  function refresh(promise, context) {\r\n    var _context;\r\n\r\n    (_context = context) != null ? _context : context = \".ew-card.ew-grid\";\r\n    context = context.startsWith(\".\") || context.startsWith(\"#\") ? context : \".\" + context;\r\n    let target = document.querySelector(context + \", .ew-multi-column-grid, .ew-view-form, .ew-edit-form, main.ew-no-record\");\r\n    if (!target) return;\r\n    let $overlay = $__default.default(ew.overlayTemplate()),\r\n        $target = $__default.default(target).addClass(\"ew-loading\").toggleClass(\"overlay-wrapper\", !target.classList.contains(\"card\")).append($overlay);\r\n    return promise.then(async response => {\r\n      if (!(response instanceof Response)) return response;\r\n      let ct = response.headers.get(\"Content-Type\"); // Handle JSON\r\n\r\n      if (ct != null && ct.includes(\"json\")) {\r\n        let result = await response.json(),\r\n            validation = result.validation,\r\n            error = getError(result),\r\n            form = target.querySelector(\".ew-form\"),\r\n            f = ew.forms.get(form);\r\n\r\n        if (f && validation) {\r\n          // Validation errors\r\n          for (let [key, value] of Object.entries(validation)) {\r\n            key = parseInt(key, 10);\r\n\r\n            if ($__default.default.isNumber(key) && $__default.default.isObject(value)) {\r\n              form.dataset.rowindex = key;\r\n\r\n              for (let [fldvar, msg] of Object.entries(value)) f.addCustomError(fldvar, msg, key);\r\n            } else if ($__default.default.isString(value)) {\r\n              f.addCustomError(key, value);\r\n            }\r\n          }\r\n\r\n          f.focus();\r\n        }\r\n\r\n        if (error) showToast(error);else if ($__default.default.isString(result.warningMessage)) showToast(result.warningMessage, \"warning\");else if ($__default.default.isString(result.message)) showToast(result.message, \"body\");else if ($__default.default.isString(result.successMessage)) showToast(result.successMessage, \"success\");\r\n        return false; // Return false\r\n      } // Handle HTML\r\n\r\n      let html = await response.text(),\r\n          url = new URL(response.url),\r\n          selectors = [\".ew-message-dialog\", \".ew-chart-top\", \".ew-chart-bottom\", \".ew-debug .card-body\", \".ew-timer\"];\r\n\r\n      if (url.searchParams.get(\"layout\") == \"false\") {\r\n        html = \"<div>\" + html + \"</div>\";\r\n        url.searchParams.delete(\"layout\");\r\n      }\r\n\r\n      url.searchParams.delete(\"rnd\");\r\n      url.searchParams.delete(\"action\");\r\n      html = getContent(html, true); // Keep scripts\r\n\r\n      let $html = $__default.default(\"<div>\" + html + \"</div>\"); // New HTML\r\n\r\n      if (!target.closest(\".ew-dashboard\")) {\r\n        // Not dashboard\r\n        selectors.unshift(\".ew-toolbar\"); // Update toolbar also\r\n\r\n        if (samePath(url, currentUrl) && currentUrl.toString() != url.toString()) // Only update browser URL if same page or view/edit page\r\n          window.history.pushState(null, \"\", url.toString()); // Update browser URL\r\n      }\r\n\r\n      if ($html.find(\"main.ew-no-record\")[0] || $target.is(\"main.ew-no-record\")) {\r\n        // New or old HTML contains no records => update <main> element\r\n        selectors = [\".ew-ext-search-form\", \"main\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-view-form\")) {\r\n        // View page\r\n        selectors = [\".ew-view-form\", \".ew-pager\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-edit-form\")) {\r\n        // Edit page\r\n        selectors = [\".ew-edit-form\", \".ew-pager\", ...selectors];\r\n      } else if ($target.hasClass(\"ew-multi-column-grid\")) {\r\n        // Multi-column page\r\n        selectors = [\".ew-ext-search-form\", \".ew-multi-column-grid\", ...selectors];\r\n      } else {\r\n        // List/Report page\r\n        selectors = [\"#ew-filter-list\", \".ew-ext-search-form\", context + \" .card-header\", context + \" .card-body\", context + \" .card-footer\", ...selectors];\r\n      }\r\n\r\n      selectors.forEach(selector => $__default.default(selector).each((i, el) => {\r\n        let $old = $__default.default(el),\r\n            $new = $html.find(selector).eq(i);\r\n\r\n        if ($old[0] && $new[0]) {\r\n          delete el.dataset.isset; // Reset\r\n\r\n          $old.html($new.html()); // Replace inner HTML\r\n\r\n          $old.attr(\"class\", $new.attr(\"class\")); // Update class name\r\n        }\r\n\r\n        if (selector == \".ew-toolbar\") {\r\n          let e = {\r\n            target: el\r\n          };\r\n          initIcons(e);\r\n          initSearchFilters(e);\r\n        } else if (selector == \".ew-ext-search-form\") {\r\n          ew.initForms({\r\n            target: $new[0]\r\n          });\r\n          let $tmpl = $new.find(\"#navbar-basic-search\");\r\n\r\n          if ($tmpl[0]) {\r\n            let html = $tmpl.render(null, ew.jsRenderHelpers),\r\n                $html = $__default.default(html),\r\n                $search = $html.find(\"#\" + ew.TABLE_BASIC_SEARCH),\r\n                $searchType = $html.find(\"#\" + ew.TABLE_BASIC_SEARCH_TYPE);\r\n            if ($search.val() != $__default.default(\"#\" + ew.TABLE_BASIC_SEARCH).val() || $searchType.val() != $__default.default(\"#\" + ew.TABLE_BASIC_SEARCH_TYPE).val()) $__default.default(\".nav-item.navbar-basic-search\").replaceWith($html);\r\n          }\r\n\r\n          $old.find(\".ew-search-operator .form-select.ew-operator-select\").each((i, el) => searchOperatorChange(el));\r\n        } else if (selector == \".ew-message-dialog\") {\r\n          if (!$new.hasClass(\"d-none\")) $old.html($new.html()); // Replace inline html\r\n        }\r\n      }));\r\n      selectors.filter(selector => selector != \".ew-message-dialog\").forEach(selector => $html.find(selector).remove()); // Remove HTML used (except message)\r\n\r\n      removeScript(\"refresh\"); // Remove old scripts\r\n\r\n      executeScript($html.html(), \"refresh\"); // Execute scripts, e.g. custom template\r\n\r\n      let e = $__default.default.Event({\r\n        type: \"load.ew\",\r\n        target\r\n      });\r\n      ew.initPage(e);\r\n      if (selectors.includes(\".ew-toolbar\")) ew.initExportLinks(); // Export links are not inside e.target\r\n\r\n      target.querySelectorAll(\".btn-group\").forEach(el => {\r\n        var _bootstrap$Tooltip$ge7;\r\n\r\n        return (_bootstrap$Tooltip$ge7 = bootstrap.Tooltip.getInstance(el)) == null ? void 0 : _bootstrap$Tooltip$ge7.update();\r\n      }); // Update tooltip position or it may obscure other buttons\r\n\r\n      $__default.default(\".toast.show\").toast(\"dispose\"); // Hide toasts\r\n\r\n      showMessage({\r\n        target: $html\r\n      }); // Show message, if any\r\n\r\n      $document$1.trigger(e);\r\n      $document$1.trigger($__default.default.Event({\r\n        type: \"refresh.ew\",\r\n        target\r\n      }));\r\n    }).finally(() => $target.removeClass(\"ew-loading\").find($overlay).remove());\r\n  } // Check if dark mode\r\n\r\n  function isDark() {\r\n    return document.body.classList.contains(\"dark-mode\");\r\n  } // Layout\r\n\r\n  var _fixLayoutHeightTimer; // Fix layout height\r\n\r\n  function fixLayoutHeight() {\r\n    if (_fixLayoutHeightTimer) _fixLayoutHeightTimer.cancel(); // Clear timer\r\n\r\n    _fixLayoutHeightTimer = $__default.default.later(50, null, function () {\r\n      var layout = $body.data(\"lte.layout\");\r\n      if (layout) layout.fixLayoutHeight();\r\n    });\r\n  } // Add user event handlers\r\n\r\n  function addEventHandlers(tblVar) {\r\n    let fields = ew.events[tblVar];\r\n\r\n    if (fields) {\r\n      for (const [fldVar, events] of Object.entries(fields)) $__default.default('[data-table=' + tblVar + '][data-field=' + fldVar + ']').on(events);\r\n    }\r\n  }\n\n  var functions = {\n    __proto__: null,\n    currentUrl,\n    forms,\n    AjaxLookup,\n    AutoSuggest,\n    Form,\n    Field,\n    Select2Utils: Utils,\n    Select2Defaults: Defaults,\n    fieldContainerSelector,\n    createSelect,\n    createModalLookup,\n    createFilter,\n    initIcons,\n    initPasswordOptions,\n    getApiUrl,\n    parseUrl,\n    createSearchParams,\n    getSearchParams,\n    getSearchParam,\n    setSearchParams,\n    mergeSearchParams,\n    setSearchParam,\n    deleteSearchParam,\n    buildUrl,\n    setLayout,\n    sanitizeUrl,\n    setSessionTimer,\n    initExportLinks,\n    initMultiSelectCheckboxes,\n    getError,\n    fileDownload,\n    lazyLoad,\n    updateDropdownPosition,\n    initLightboxes,\n    initPdfObjects,\n    initTooltips,\n    parseJson,\n    searchOperatorChange,\n    initForms,\n    isFunction: isFunction$1,\n    alert: _alert,\n    prompt: _prompt,\n    toast,\n    showToast,\n    getForm,\n    hasFormData,\n    setSearchType,\n    updateOptions,\n    getUserParams,\n    getQueryBuilderFilterInput,\n    getQueryBuilderValueSetter,\n    getQueryBuilderFilterValidation,\n    applyTemplate,\n    exportCustom,\n    toggleGroup,\n    convertToBool,\n    valueChanged,\n    setLanguage,\n    submitAction,\n    getchartParams,\n    _export,\n    export: _export,\n    removeSpaces,\n    isHiddenTextArea,\n    isModalLookup,\n    isFilter,\n    isAutoSuggest,\n    isSelect2,\n    isNativeSelectOne,\n    isTextbox,\n    isBooleanCheckbox,\n    clearError,\n    onError,\n    setFocus,\n    setInvalid,\n    setValid,\n    hasValue,\n    isMaskedPassword,\n    sort,\n    filter,\n    scrollIntoView,\n    inlineAction,\n    confirmDelete,\n    keySelected,\n    selectAllKeys,\n    selectAll,\n    updateSelected,\n    clearSelected,\n    clearDelete,\n    clickDelete,\n    selectKey,\n    setupTable,\n    setupGrid,\n    addGridRow,\n    deleteGridRow,\n    htmlEncode,\n    htmlDecode,\n    getElements,\n    getElement,\n    getAncestorBy,\n    isHidden,\n    sameText,\n    sameString,\n    headerCase,\n    samePath,\n    getValue,\n    getOptionValues,\n    getOptionValue,\n    getOptionTexts,\n    clearOptions,\n    getId,\n    valueSeparator,\n    displayValue,\n    optionHtml,\n    optionsHtml,\n    newOption,\n    selectOption,\n    fetch: _fetch,\n    executeScript,\n    stripScript,\n    addScript,\n    removeScript,\n    getContent,\n    getOptions,\n    enable2FA,\n    disable2FA,\n    sendOTP,\n    showBackupCodes,\n    addOptionDialogShow,\n    modalDialogHide,\n    modalDialogShow,\n    importDialogShow,\n    autoFill,\n    tooltip,\n    initSearchFilters,\n    emailDialogShow,\n    exportEmail,\n    showDrillDown,\n    ajax,\n    currentPage,\n    toggleSearchOperator,\n    toggleLayout,\n    copyToClipboard,\n    checkInteger,\n    checkNumber,\n    escapeRegExChars,\n    checkRange,\n    checkPhone,\n    checkZip,\n    checkCreditCard,\n    checkSsn,\n    checkEmails,\n    checkEmail,\n    checkGuid,\n    checkUrl,\n    checkByRegEx,\n    showMessage,\n    random,\n    upload,\n    parseNumber,\n    getNumberingSystem,\n    formatDateTime,\n    formatTimeSpan,\n    parseDateTime,\n    parseDate: parseDateTime,\n    parseTime: parseDateTime,\n    checkDate,\n    checkTime,\n    formatCurrency,\n    formatNumber,\n    formatPercent,\n    initPage,\n    redirect,\n    togglePassword,\n    updateChart,\n    isMediumScreen,\n    isMobile,\n    refresh,\n    isDark,\n    fixLayoutHeight,\n    addEventHandlers\n  };\n\n  /**\r\n   * Create FullCalendar object\r\n   *\r\n   * @param {HTMLElement} el - HTML element\r\n   * @param {Object} options - Calendar options\r\n   * @param {Object} options.fullCalendarOptions - FullCalendar options\r\n   * @param {Object} options.eventPopoverOptions - Event popover options\r\n   * @param {HTMLElement} dropdown - HTML element\r\n   * @returns calendar object\r\n   */\r\n\r\n  function fullCalendar(el, options, dropdown) {\r\n    let {\r\n      updateTable,\r\n      eventFields,\r\n      addUrl,\r\n      viewUrl,\r\n      editUrl,\r\n      deleteUrl,\r\n      copyUrl,\r\n      fullCalendarOptions,\r\n      eventPopoverOptions\r\n    } = options,\r\n        calendar; // Remove addUrl in options\r\n\r\n    delete options.addUrl; // Update event from server side JSON response\r\n\r\n    let processJson = data => {\r\n      //console.log(result);\r\n      let convertValue = (key, value) => {\r\n        let match;\r\n        if (typeof value == \"string\" && (match = value.match(/^(\\d{4}-\\d{2}-\\d{2}) (\\d{2}:\\d{2}:\\d{2})/))) // Make sure ISO date\r\n          return match[1] + \"T\" + match[2];\r\n        if (key == \"allDay\") // Make sure Boolean\r\n          return ew.convertToBool(value);else if (key == \"url\" && !value) return \"\"; // Make sure not null\r\n        else if (key == \"display\" && !value) return \"auto\"; // Make sure not null\r\n        else if (key == \"classNames\" && value && $__default.default.isString(value)) // Make sure return as array\r\n          return value.replace(/\\s+/g, \" \").split(\" \");else if (key == \"classNames\" && !value) // Make sure return as array\r\n          return [\"\"];else if (key == \"groupId\" && !value) // Make sure return as stringy\r\n          return \"\";else if (key == \"description\" && !value) return \"\"; // Make sure not null\r\n        else return value;\r\n      };\r\n\r\n      if (data.success) {\r\n        let action = data.action,\r\n            events = data[updateTable];\r\n        if (!Array.isArray(events)) events = [events];\r\n\r\n        for (let event of events) {\r\n          for (let [key, name] of Object.entries(eventFields)) {\r\n            // Normalize keys in event\r\n            if (key != name && name !== null && name in event) {\r\n              event[key] = event[name];\r\n              delete event[name];\r\n            }\r\n          }\r\n\r\n          if (action == ew.API_DELETE_ACTION) {\r\n            var _calendar$getEventByI;\r\n\r\n            // Remove deleted event\r\n            (_calendar$getEventByI = calendar.getEventById(event.id)) == null ? void 0 : _calendar$getEventByI.remove();\r\n          } else if (action == ew.API_ADD_ACTION) {\r\n            // Add/Copy event\r\n            for (let name in event) {\r\n              // Check new properties\r\n              let key = Object.keys(eventFields).find(key => key === name),\r\n                  value = event[name];\r\n              if (key && value !== undefined) // Value can be null\r\n                event[key] = convertValue(key, value); // Convert value\r\n            }\r\n\r\n            calendar.addEvent(event);\r\n          } else {\r\n            // Update event\r\n            let curEvent = calendar.getEventById(event.id);\r\n            let groupId = event.groupId;\r\n\r\n            for (let name in event) {\r\n              // Update properties\r\n              let key = Object.keys(eventFields).find(key => key === name),\r\n                  value = convertValue(key, event[name]);\r\n\r\n              if (key && value !== undefined) {\r\n                // Value can be null\r\n                value = convertValue(key, value); // Convert value\r\n\r\n                if (key == \"start\") curEvent.setStart(value);else if (key == \"end\") curEvent.setEnd(value);else if (key == \"allDay\") curEvent.setAllDay(value);else if (key == \"description\") curEvent.setExtendedProp(key, value);else if (key != \"id\" && !groupId) // setProp will change all related events, https://fullcalendar.io/docs/Event-setProp\r\n                  curEvent.setProp(key, value);\r\n              } else if (value) {\r\n                curEvent.setExtendedProp(name, value);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }; // Process event\r\n\r\n    let processEvent = info => {\r\n      let event = info.event,\r\n          events = [event, ...info.relatedEvents],\r\n          apiAction = event.id ? ew.API_EDIT_ACTION : ew.API_ADD_ACTION;\r\n      events.forEach(event => processRequest(event, apiAction).then(data => {\r\n        if (!data.success) {\r\n          // Revert if not success\r\n          info.revert();\r\n        } else {\r\n          // Update event\r\n          processJson(data);\r\n        }\r\n      }).catch(err => {\r\n        // Revert if error\r\n        console.log(err);\r\n        info.revert();\r\n      }));\r\n    }; // Process request\r\n\r\n    let processRequest = (event, apiAction) => new Promise((resolve, reject) => {\r\n      // Set up post data\r\n      let obj = event.toPlainObject({\r\n        collapseExtendedProps: true\r\n      }),\r\n          data = {}; // Event fields\r\n\r\n      for (let [key, name] of Object.entries(eventFields)) {\r\n        if (key in obj) {\r\n          let val = obj[key];\r\n          name || (name = key);\r\n          if (val instanceof Date) // Handle date field, need to convert to ISO string\r\n            val = val.toISOString().slice(0, -5).replace(/T/, \" \"); // Assume UTC\r\n          else if (typeof val == \"string\" && val.match(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}/)) val = val.substring(0, 19).replace(/T/, \" \");else if (typeof val === \"boolean\") // Handle boolean field\r\n            val = val ? \"1\" : \"0\";else if (key == \"classNames\") val = Array.isArray(val) ? val.join(\" \") : val; // Convert array to string\r\n\r\n          data[name] = val;\r\n          delete obj[key];\r\n        }\r\n      }\r\n\r\n      data = { ...data,\r\n        ...obj\r\n      }; // Post to Event Table add/edit/delete API\r\n\r\n      let apiUrl = apiAction == ew.API_ADD_ACTION ? ew.getApiUrl([apiAction, updateTable]) : ew.getApiUrl([apiAction, updateTable, event.id]);\r\n      $__default.default.post(apiUrl, data, data => resolve(data)).fail(err => reject(err));\r\n    }); // Get field parameter\r\n\r\n    let getFldParm = name => Object.keys(currentTable.fields).find(key => currentTable.fields[key].name == name); // Add menu ID to URL\r\n\r\n    let urlAddId = (url, id) => {\r\n      let ar = url.split(\"?\");\r\n      ar[0] += id ? (!ar[0].endsWith(\"/\") ? \"/\" : \"\") + id : \"\";\r\n      return ar.join(\"?\");\r\n    }; // Add/Copy event\r\n\r\n    let addEventDialogShow = data => {\r\n      let url = addUrl,\r\n          params = new URLSearchParams();\r\n\r\n      if ($__default.default.isObject(data) && (data.startStr || data.endStr\r\n      /* || data.allDay */\r\n      )) {\r\n        let startFld = getFldParm(eventFields[\"start\"]),\r\n            endFld = getFldParm(eventFields[\"end\"])\r\n        /*,\r\n        allDayFld = getFldParm(eventFields[\"allDay\"])*/\r\n        ;\r\n        if (startFld && data.startStr) params.set(startFld, data.startStr);\r\n        if (endFld && data.endStr) params.set(endFld, data.endStr); // if (allDayFld && data.allDay)\r\n        //     params.set(allDayFld, \"1\");\r\n      }\r\n\r\n      if ($__default.default.isString(data) && data.match(/^\\d+$/)) // Copy\r\n        url = urlAddId(url, data);\r\n      let qs = params.toString();\r\n      url += qs ? \"?\" + qs : \"\";\r\n      ew.modalDialogShow({\r\n        url: url,\r\n        callback: processJson,\r\n        json: true,\r\n        btn: ew.language.phrase(\"AddBtn\"),\r\n        caption: ew.language.phrase(\"AddLink\")\r\n      });\r\n    }; // View event\r\n\r\n    let viewEventDialogShow = id => ew.modalDialogShow({\r\n      url: urlAddId(viewUrl, id),\r\n      callback: processJson,\r\n      json: true,\r\n      btn: null,\r\n      caption: ew.language.phrase(\"ViewLink\")\r\n    }); // Edit event\r\n\r\n    let editEventDialogShow = id => ew.modalDialogShow({\r\n      url: urlAddId(editUrl, id),\r\n      callback: processJson,\r\n      json: true,\r\n      btn: null,\r\n      caption: ew.language.phrase(\"EditLink\")\r\n    }); // Delete event\r\n\r\n    let deleteEvent = id => ew.prompt(ew.language.phrase(\"DeleteEventConfirm\"), result => {\r\n      if (result) ew.modalDialogShow({\r\n        url: ew.setSearchParams(urlAddId(deleteUrl, id), {\r\n          action: \"delete\"\r\n        }),\r\n        callback: processJson,\r\n        json: true\r\n      });\r\n    }); // Add custom add button\r\n\r\n    if (addUrl) {\r\n      fullCalendarOptions.customButtons = {\r\n        add: {\r\n          text: ew.language.phrase(\"AddEvent\"),\r\n          click: addEventDialogShow\r\n        }\r\n      };\r\n      fullCalendarOptions.headerToolbar.left += \" add\";\r\n    } // Get or create popover\r\n\r\n    let getOrCreatePopover = info => {\r\n      let config = { ...bootstrap.Popover.Default,\r\n        ...eventPopoverOptions,\r\n        trigger: \"manual\" // Set trigger to \"manual\"\r\n\r\n      };\r\n      let popover = bootstrap.Popover.getOrCreateInstance(info.el, config),\r\n          template = Array.from(document.querySelectorAll(\"script[data-name='event-popover']\")).sort((a, b) => {\r\n        a = parseInt(a.dataset.seq, 10) || 0;\r\n        b = parseInt(b.dataset.seq, 10) || 0;\r\n        return a - b;\r\n      }).shift(),\r\n          tmpl = $__default.default.templates(template.text);\r\n      info.event.setExtendedProp(\"timeSpan\", ew.formatTimeSpan(info.event.start, info.event.end, info.event.allDay)); // Add extended property \"timeSpan\"\r\n\r\n      let content = tmpl.render(info.event, ew.jsRenderHelpers).trim();\r\n\r\n      if (content) {\r\n        var _Array$from$find$repl, _Array$from$find;\r\n\r\n        let popoverClass = (_Array$from$find$repl = (_Array$from$find = Array.from(info.el.classList.values()).find(name => name.match(/^event-([\\w+]+)\\b/))) == null ? void 0 : _Array$from$find.replace(/^event-/, \"popover-\")) != null ? _Array$from$find$repl : \"popover-default\";\r\n        popover._templateFactory = null; // Make sure popover create tip again from _config\r\n\r\n        popover._config.title = info.event.title;\r\n        popover._config.content = content;\r\n        popover._config.customClass += (popover._config.customClass ? \" \" : \"\") + \"ew-event-popover \" + popoverClass;\r\n        return popover;\r\n      }\r\n\r\n      return null;\r\n    }; // Context menu\r\n\r\n    let generateGetBoundingClientRect = info => {\r\n      let x = 0,\r\n          y = 0;\r\n\r\n      if (info) {\r\n        let rect = info.el.getBoundingClientRect(),\r\n            evt = info.jsEvent;\r\n        x = rect.left + evt.offsetX, y = rect.top + evt.offsetY;\r\n      }\r\n\r\n      return () => ({\r\n        width: 0,\r\n        height: 0,\r\n        top: y,\r\n        right: x,\r\n        bottom: y,\r\n        left: x\r\n      });\r\n    },\r\n        virtualElement = {\r\n      getBoundingClientRect: generateGetBoundingClientRect()\r\n    },\r\n        bsDropdown;\r\n\r\n    if (dropdown && options.useContextMenu && (viewUrl || editUrl || addUrl && copyUrl || deleteUrl)) {\r\n      dropdown.dataset.bsToggle = \"dropdown\"; // For clearing dropdown menu\r\n\r\n      document.addEventListener(\"keydown\", event => event.key !== \"Escape\" || bootstrap.Dropdown.clearMenus());\r\n      bsDropdown = bootstrap.Dropdown.getOrCreateInstance(dropdown, {\r\n        reference: virtualElement\r\n      });\r\n\r\n      bsDropdown._menu.querySelectorAll(\".dropdown-item\").forEach(item => item.addEventListener(\"click\", e => {\r\n        let dataset = e.currentTarget.dataset,\r\n            action = dataset.action,\r\n            id = dataset.eventId;\r\n\r\n        if (action && id) {\r\n          if (action == \"view\" && viewUrl) viewEventDialogShow(id);else if (action == \"edit\" && editUrl) editEventDialogShow(id);else if (action == \"copy\" && addUrl && copyUrl) // Copy\r\n            addEventDialogShow(id);else if (action == \"delete\" && deleteUrl) deleteEvent(id);\r\n        }\r\n      }));\r\n    } // Options\r\n\r\n    let opts = ew.deepAssign(fullCalendarOptions, {\r\n      // events\r\n      //eventDragStart: info => console.log(info),\r\n      //eventDragStop: info => console.log(info),\r\n      drop: function (info) {\r\n        // Remove element\r\n        let checkbox = document.getElementById(\"remove-event\");\r\n        if (checkbox.checked) info.draggedEl.parentNode.removeChild(info.draggedEl);\r\n      },\r\n      select: event => addUrl && addEventDialogShow(event),\r\n      eventReceive: processEvent,\r\n      // Event created\r\n      eventDragStart: info => {\r\n        var _bootstrap$Popover$ge;\r\n\r\n        return (_bootstrap$Popover$ge = bootstrap.Popover.getInstance(info.el)) == null ? void 0 : _bootstrap$Popover$ge.hide();\r\n      },\r\n      eventDrop: processEvent,\r\n      // Event changed (Drag / Drop)\r\n      eventResize: processEvent,\r\n      // Event changed (Resize)\r\n      eventClick: info => {\r\n        // Event click\r\n        info.jsEvent.preventDefault();\r\n\r\n        if (info.jsEvent.button == 2) {\r\n          // Right click\r\n          if (bsDropdown) {\r\n            var _bootstrap$Popover$ge2;\r\n\r\n            (_bootstrap$Popover$ge2 = bootstrap.Popover.getInstance(info.el)) == null ? void 0 : _bootstrap$Popover$ge2.hide();\r\n            bsDropdown.hide();\r\n\r\n            bsDropdown._menu.querySelectorAll(\".dropdown-item\").forEach(item => {\r\n              item.dataset.eventId = info.event.id;\r\n              item.classList.toggle(\"d-none\", !options[item.dataset.action + \"Url\"]);\r\n            });\r\n\r\n            if (bsDropdown._menu.querySelectorAll(\".dropdown-item:not(.d-done)\").length) {\r\n              virtualElement.getBoundingClientRect = generateGetBoundingClientRect(info);\r\n              bsDropdown.show();\r\n            }\r\n          }\r\n        } else if (info.event.url) {\r\n          window.open(info.event.url);\r\n        } else if (options.usePopover && eventPopoverOptions.trigger.match(/\\bclick\\b/)) {\r\n          var _getOrCreatePopover;\r\n\r\n          (_getOrCreatePopover = getOrCreatePopover(info)) == null ? void 0 : _getOrCreatePopover.toggle();\r\n        } else if (options.showViewPageOnEventClick) {\r\n          viewEventDialogShow(info.event.id);\r\n        }\r\n      },\r\n      eventMouseEnter: info => {\r\n        var _bsDropdown, _getOrCreatePopover2;\r\n\r\n        if ((_bsDropdown = bsDropdown) != null && _bsDropdown._isShown(bsDropdown._menu)\r\n        /* && bsDropdown._element.dataset.eventId == info.event.id*/\r\n        ) return;\r\n        if (info.view.type == \"dayGridMonth\" && options.usePopover && eventPopoverOptions.trigger.match(/\\bhover\\b/)) (_getOrCreatePopover2 = getOrCreatePopover(info)) == null ? void 0 : _getOrCreatePopover2.show();\r\n      },\r\n      eventMouseLeave: info => {\r\n        var _bsDropdown2, _bootstrap$Popover$ge3;\r\n\r\n        if ((_bsDropdown2 = bsDropdown) != null && _bsDropdown2._isShown(bsDropdown._menu)\r\n        /* && bsDropdown._element.dataset.eventId == info.event.id*/\r\n        ) return;\r\n        if (info.view.type == \"dayGridMonth\" && options.usePopover && eventPopoverOptions.trigger.match(/\\bhover\\b/)) (_bootstrap$Popover$ge3 = bootstrap.Popover.getInstance(info.el)) == null ? void 0 : _bootstrap$Popover$ge3.hide();\r\n      }\r\n    }); // Trigger \"calendar\" event\r\n\r\n    let args = {\r\n      element: el,\r\n      options: opts\r\n    };\r\n    $__default.default(document).trigger(\"calendar\", [args]); // Create calendar\r\n\r\n    calendar = new window.FullCalendar.Calendar(el, args.options); // Return calendar\r\n\r\n    return calendar;\r\n  }\n\n  var fullCalendar$1 = {\n    __proto__: null,\n    fullCalendar\n  };\n\n  /**\r\n   * Service worker\r\n   */\r\n\r\n  ew__default.default.SERVICE_WORKER = \"sw.js\";\r\n  /**\r\n   * Show dialog for push notification\r\n   *\r\n   * @param {Object} args - Arguments\r\n   * @param {string} args.hdr - Dialog header\r\n   * @param {string} args.url - URL of web push API\r\n   * @param {MouseEvent} args.evt - Mouse event\r\n   * @returns false\r\n   */\r\n\r\n  async function pushNotificationDialogShow(args) {\r\n    let $dlg = ew__default.default.pushDialog || $__default.default(\"#ew-push-notification-dialog\").on(\"shown.bs.modal\", e => setTimeout(() => {\r\n      var _e$target$querySelect;\r\n\r\n      return (_e$target$querySelect = e.target.querySelector(\".modal-body .form-control\")) == null ? void 0 : _e$target$querySelect.focus();\r\n    }, 200)).on(\"click\", \".modal-footer .btn-primary\", function (e) {\r\n      var _$$closest$find$data;\r\n\r\n      e.preventDefault();\r\n      if ((_$$closest$find$data = $__default.default(this).closest(\".modal\").find(\".modal-body form\").data(\"form\")) != null && _$$closest$find$data.submit()) $dlg.modal(\"hide\");\r\n    });\r\n\r\n    if (!$dlg[0]) {\r\n      console.log(\"DIV #ew-push-notificatoin-dialog not found\");\r\n      return false;\r\n    }\r\n\r\n    if (!args.url) {\r\n      // No API URL\r\n      console.log(\"Missing URL of Web Push API\");\r\n      return false;\r\n    }\r\n\r\n    let target = args.evt.currentTarget,\r\n        // Button\r\n    $form = $__default.default(target.form),\r\n        $f = $dlg.find(\".modal-body form\"),\r\n        frm = $f.data(\"form\");\r\n    $f.data(\"all\", false); // Reset\r\n\r\n    if (!$form.find(\"input[name='key_m[]']:checked\")[0]) {\r\n      // No keys selected\r\n      let result = await ew__default.default.prompt(ew__default.default.language.phrase(\"SendPushNotificationsToAll\"), bool => bool); // Callback returns result as boolean\r\n\r\n      $f.data(\"all\", result);\r\n      if (!result) // Cancelled\r\n        return;\r\n    }\r\n\r\n    if (!frm) {\r\n      frm = new ew__default.default.FormBuilder().setId($f.attr(\"id\")).addFields([[\"title\", ew__default.default.Validators.required(ew__default.default.language.phrase(\"PushNotificationFormTitle\"))], [\"body\", ew__default.default.Validators.required(ew__default.default.language.phrase(\"PushNotificationFormBody\"))]]).setValidate(function () {\r\n        return this.validateFields();\r\n      }).setSubmit(function () {\r\n        if (!this.validate()) return false;\r\n        let data = [$f.serialize(), $f.data(\"all\") ? \"\" : $form.find(\"input[name='key_m[]']:checked\").serialize()].join(\"&\");\r\n        $__default.default.post(args.url, data, result => {\r\n          var _result$error;\r\n\r\n          if (Array.isArray(result)) {\r\n            let successes = result.reduce((acc, cur) => acc + (cur.success ? 1 : 0), 0),\r\n                failures = result.length - successes;\r\n            if (successes > 0 && failures == 0) ew__default.default.alert(ew__default.default.language.phrase(\"PushNotificationSuccess\").replace(\"%s\", successes), \"success\");else if (successes == 0 && failures > 0) ew__default.default.alert(ew__default.default.language.phrase(\"PushNotificationFailure\").replace(\"%f\", failures));else if (successes == 0 && failures == 0) ew__default.default.alert(ew__default.default.language.phrase(\"NoSubscriptions\").replace(\"%f\", failures), \"primary\");else ew__default.default.alert(ew__default.default.language.phrase(\"PushNotificationSent\").replace(\"%s\", successes).replace(\"%f\", failures), \"primary\");\r\n          } else if (result != null && (_result$error = result.error) != null && _result$error.description) {\r\n            ew__default.default.alert(result.error.description);\r\n          }\r\n        });\r\n        return true;\r\n      }).build();\r\n      $f.data(\"form\", frm);\r\n    }\r\n\r\n    ew__default.default.pushDialog = $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr || target.dataset.caption).end().modal(\"show\");\r\n    return false;\r\n  }\r\n  /**\r\n   * Check if push notification and service workers are supported by browser\r\n   */\r\n\r\n  function isPushNotificationSupported() {\r\n    return \"serviceWorker\" in navigator && \"PushManager\" in window;\r\n  }\r\n  /**\r\n   * Base 64 to Unit8Array\r\n   */\r\n\r\n  function urlBase64ToUint8Array(base64String) {\r\n    const padding = \"=\".repeat((4 - base64String.length % 4) % 4),\r\n          base64 = (base64String + padding).replace(/\\-/g, \"+\").replace(/_/g, \"/\"),\r\n          rawData = window.atob(base64),\r\n          outputArray = new Uint8Array(rawData.length);\r\n\r\n    for (let i = 0; i < rawData.length; ++i) outputArray[i] = rawData.charCodeAt(i);\r\n\r\n    return outputArray;\r\n  }\r\n  /**\r\n   * Send subscription to server\r\n   */\r\n\r\n  async function sendSubscriptionToServer(subscription, url) {\r\n    const key = subscription.getKey(\"p256dh\"),\r\n          token = subscription.getKey(\"auth\"),\r\n          contentEncoding = (PushManager.supportedContentEncodings || [\"aesgcm\"])[0];\r\n    let formData = new FormData();\r\n    formData.set(\"endpoint\", subscription.endpoint);\r\n    formData.set(\"publicKey\", key ? btoa(String.fromCharCode.apply(null, new Uint8Array(key))) : null);\r\n    formData.set(\"authToken\", token ? btoa(String.fromCharCode.apply(null, new Uint8Array(token))) : null);\r\n    formData.set(\"contentEncoding\", contentEncoding);\r\n    let response = await ew__default.default.fetch(url, {\r\n      method: \"POST\",\r\n      body: formData\r\n    });\r\n    return response.json();\r\n  }\r\n  /**\r\n   * Create subscription and send to server\r\n   * @returns Promise that resolves to a PushSubscription object\r\n   */\r\n\r\n  async function createSubscription() {\r\n    var _result$error2;\r\n\r\n    let url = ew__default.default.getApiUrl([ew__default.default.API_PUSH_NOTIFICATION_ACTION, ew__default.default.API_PUSH_NOTIFICATION_SUBSCRIBE]),\r\n        serviceWorkerReg = await navigator.serviceWorker.ready,\r\n        subscription = await serviceWorkerReg.pushManager.subscribe({\r\n      userVisibleOnly: true,\r\n      applicationServerKey: urlBase64ToUint8Array(ew__default.default.PUSH_SERVER_PUBLIC_KEY)\r\n    }),\r\n        result = await sendSubscriptionToServer(subscription, url);\r\n    if (result != null && (_result$error2 = result.error) != null && _result$error2.description) ew__default.default.alert(result.error.description);\r\n    return result.success ? subscription : null;\r\n  }\r\n  /**\r\n   * Get subscription\r\n   */\r\n\r\n  async function getSubscription() {\r\n    let serviceWorkerReg = await navigator.serviceWorker.ready;\r\n    return serviceWorkerReg.pushManager.getSubscription();\r\n  }\r\n  /**\r\n   * Set subscription\r\n   * @param {PushSubscription} subscription\r\n   */\r\n\r\n  function setSubscription(subscription) {\r\n    let $btn = $__default.default(\"#subscribe-notification\").toggleClass(\"ew-enable-notification\", !subscription).removeClass(\"disabled\");\r\n    $btn.find(\"i\").toggleClass(\"fa-bell\", !subscription).toggleClass(\"fa-bell-slash\", !!subscription);\r\n    let inst = bootstrap.Tooltip.getInstance($btn[0]);\r\n    if (inst) inst._config.title = ew__default.default.language.phrase(subscription ? \"DisableNotifications\" : \"EnableNotifications\");\r\n  }\r\n  /**\r\n   * Subscribe notifications\r\n   *\r\n   * @returns false\r\n   */\r\n\r\n  async function subscribeNotification() {\r\n    if (Notification.permission !== \"denied\" && !ew__default.default.IS_SYS_ADMIN) {\r\n      // Support non system administrator\r\n      document.body.style.cursor = \"wait\";\r\n\r\n      try {\r\n        if (Notification.permission === \"granted\") {\r\n          var _await$getSubscriptio, _document$getElementB;\r\n\r\n          setSubscription((_await$getSubscriptio = await getSubscription()) != null ? _await$getSubscriptio : await createSubscription());\r\n          if (!((_document$getElementB = document.getElementById(\"subscribe-notification\")) != null && _document$getElementB.classList.contains(\"ew-enable-notification\"))) ew__default.default.showToast(ew__default.default.language.phrase(\"NotificationsEnabled\"), \"success\");\r\n        } else if (Notification.permission === \"default\" && (await Notification.requestPermission()) == \"granted\") {\r\n          var _document$getElementB2;\r\n\r\n          setSubscription(await createSubscription());\r\n          if (!((_document$getElementB2 = document.getElementById(\"subscribe-notification\")) != null && _document$getElementB2.classList.contains(\"ew-enable-notification\"))) ew__default.default.showToast(ew__default.default.language.phrase(\"NotificationsEnabled\"), \"success\");\r\n        }\r\n      } catch (e) {\r\n        ew__default.default.alert(e);\r\n      } finally {\r\n        document.body.style.cursor = \"default\";\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   * Check subscription\r\n   *\r\n   * @returns true\r\n   */\r\n\r\n  async function checkSubscription() {\r\n    $__default.default(\"#subscribe-notification\").tooltip();\r\n    if (Notification.permission == \"granted\") setSubscription(await getSubscription());else setSubscription(null);\r\n    return true;\r\n  }\r\n  /**\r\n   * Unsubscribe notifications\r\n   *\r\n   * @returns false\r\n   */\r\n\r\n  async function unsubscribeNotification() {\r\n    ew__default.default.prompt({\r\n      html: ew__default.default.language.phrase(\"DisableNotificationsConfirm\")\r\n    }, async res => {\r\n      if (!res) return;\r\n      document.body.style.cursor = \"wait\";\r\n\r\n      try {\r\n        var _result$error3;\r\n\r\n        let subscription = await getSubscription();\r\n        await subscription.unsubscribe();\r\n        let url = ew__default.default.getApiUrl([ew__default.default.API_PUSH_NOTIFICATION_ACTION, ew__default.default.API_PUSH_NOTIFICATION_DELETE]),\r\n            result = await sendSubscriptionToServer(subscription, url); // Delete subscription\r\n\r\n        if (result != null && (_result$error3 = result.error) != null && _result$error3.description) {\r\n          ew__default.default.alert(result.error.description);\r\n          return false;\r\n        }\r\n\r\n        if (result.success) {\r\n          // No subscription or deleted successfully\r\n          setSubscription(null);\r\n          ew__default.default.showToast(ew__default.default.language.phrase(\"NotificationsDisabled\"), \"success\");\r\n        }\r\n      } catch (e) {\r\n        ew__default.default.alert(e);\r\n      } finally {\r\n        document.body.style.cursor = \"default\";\r\n      }\r\n    });\r\n    return false;\r\n  }\r\n  /**\r\n   * Init web push notifications\r\n   */\r\n\r\n  loadjs.ready(\"foot\", () => {\r\n    if (ew__default.default.PUSH_SERVER_PUBLIC_KEY && isPushNotificationSupported()) {\r\n      navigator.serviceWorker.register(ew__default.default.PATH_BASE + ew__default.default.SERVICE_WORKER, {\r\n        scope: ew__default.default.PATH_BASE\r\n      }).then(() => {\r\n        checkSubscription();\r\n        $__default.default(\"#subscribe-notification\").on(\"click\", function () {\r\n          this.classList.contains(\"ew-enable-notification\") ? subscribeNotification() : unsubscribeNotification();\r\n        });\r\n      }).catch(e => console.log(e));\r\n    } else {\r\n      $__default.default(\"#subscribe-notification\").addClass(\"d-none\");\r\n    }\r\n  });\n\n  var webpush = {\n    __proto__: null,\n    pushNotificationDialogShow,\n    isPushNotificationSupported,\n    subscribeNotification,\n    checkSubscription,\n    unsubscribeNotification\n  };\n\n  /**\r\n   * Map styles\r\n   */\r\n  /**\r\n   * Show map\r\n   * @param {Object} data Data of map\r\n   */\r\n\r\n  function show(data) {\r\n    if (data.inited) // Already initiated\r\n      return true;\r\n    let latlng = data.latlng,\r\n        $div = $__default.default(\"#\" + data.id),\r\n        useSingleMap = data.useSingleMap,\r\n        showAllMarkers = data.showAllMarkers,\r\n        useMarkerClusterer = data.useMarkerClusterer,\r\n        ext = ew.maps[data.ext];\r\n\r\n    if (useSingleMap) {\r\n      // Use single map\r\n      let id = data.id.replace(/^mp\\d*_/, \"mp_\"); // Remove index from \"m<n>_\" prefix\r\n\r\n      $div = $__default.default(\"#\" + id);\r\n\r\n      if (!$div[0]) {\r\n        $div = $__default.default(\"<div></div>\").attr(\"id\", id).addClass(\"ew-single-map\").height(data.singleMapHeight); // Create new $div for single map\r\n\r\n        if (data.singleMapWidth) $div.width(data.singleMapWidth);\r\n        $__default.default(\".ew-grid, .ew-multi-column-grid\").first()[data.showMapOnTop ? \"before\" : \"after\"]($div); // Insert before/after table\r\n\r\n        data.map = ext.createMap($div[0], data);\r\n        $div.data(\"map\", data.map);\r\n        $div.data(\"ext\", data.ext);\r\n        $div.data(\"bounds\", showAllMarkers ? ext.createBounds() : null);\r\n        $div.data(\"markerClusterer\", useMarkerClusterer ? ext.createMarkerClusterer(data) : null);\r\n      }\r\n\r\n      data = Object.assign(data, $div.data()); // Merge data\r\n    } else {\r\n      if (!latlng) {\r\n        // Location not found\r\n        $div.addClass(\"d-none\").html(data.status);\r\n        return true;\r\n      }\r\n\r\n      $div.next(\".ew-map-value\").addClass(\"d-none\"); // Hide view value\r\n\r\n      if (!data.map) data.map = ext.createMap($div[0], data);\r\n    }\r\n\r\n    data.marker = ext.createMarker(data); // Create marker\r\n\r\n    data.inited = true; // Initiated\r\n\r\n    $__default.default(document).trigger(\"map\", [data]);\r\n    return true;\r\n  }\r\n  /**\r\n   * All maps initiated\r\n   */\r\n\r\n  function done() {\r\n    $__default.default(\".ew-single-map\").each(function () {\r\n      let data = $__default.default(this).data();\r\n      ew.maps[data.ext].fitBounds(data); // Fit bounds\r\n    });\r\n    $__default.default(document).trigger(\"maps\");\r\n  }\r\n  /**\r\n   * Init maps\r\n   * @param {string} [ext] - Map type, e.g. 'googlemaps', 'leaflet'\r\n   * @returns\r\n   */\r\n\r\n  function init(ext) {\r\n    let promises = $__default.default(\".ew-map\").filter(function () {\r\n      return !ext || $__default.default(this).data(\"ext\") == ext;\r\n    }).map(function (i) {\r\n      let data = $__default.default(this).data();\r\n      if (data.inited) // Already initiated\r\n        return show(data);\r\n      data.id = this.id; // Get ID\r\n\r\n      data.address = (data.address || \"\").trim();\r\n\r\n      if (data.address) {\r\n        let geocodingDelay = data.geocodingDelay;\r\n        return new Promise(resolve => {\r\n          $__default.default.later(i * geocodingDelay, null, () => {\r\n            // Set a timer for better performance\r\n            resolve(ew.maps[data.ext].geocode(data).then(latlng => {\r\n              data.latlng = latlng;\r\n            }).catch(status => {\r\n              data.status = status;\r\n            }).finally(() => show(data)));\r\n          });\r\n        });\r\n      } else {\r\n        let latitude = data.latitude,\r\n            longitude = data.longitude;\r\n        if (latitude && !isNaN(latitude) && longitude && !isNaN(longitude)) data.latlng = ew.maps[data.ext].createLatLng(latitude, longitude);\r\n        return show(data);\r\n      }\r\n    }).get();\r\n    return Promise.all(promises).then(done);\r\n  }\r\n  /**\r\n   * Init\r\n   */\r\n\r\n  $__default.default(function () {\r\n    $__default.default(\"#ew-modal-dialog\").on(\"load.ew\", init);\r\n    $__default.default(document).on(\"preview.ew\", init);\r\n  });\n\n  var maps = {\n    __proto__: null,\n    show,\n    done,\n    init\n  };\n\n  ew.MOBILE_DETECT = new MobileDetect(window.navigator.userAgent);\r\n  ew.IS_MOBILE = !!ew.MOBILE_DETECT.mobile(); // Charts\r\n\r\n  window.exportCharts = {}; // Per window\r\n  // Extend\r\n\r\n  Object.assign(ew, {\r\n    MultiPage,\r\n    Form,\r\n    FormBuilder,\r\n    Validators,\r\n    maps\r\n  }, functions, webpush, fullCalendar$1);\r\n  var $document = $__default.default(document); // Init document\r\n\r\n  loadjs.ready(\"load\", function () {\r\n    $__default.default.views.settings.debugMode(ew.DEBUG);\r\n    ew.setSessionTimer();\r\n    ew.initPage();\r\n    $__default.default(\"#ew-modal-dialog\").on(\"load.ew\", ew.initPage);\r\n    $__default.default(\"#ew-add-opt-dialog\").on(\"load.ew\", ew.initPage);\r\n    var hash = ew.currentUrl.searchParams.get(\"hash\");\r\n    if (hash) $__default.default(\"html, body\").animate({\r\n      scrollTop: $__default.default(\"#\" + hash).offset().top\r\n    }, 800);\r\n    $document.trigger(\"load.ew\");\r\n  }); // Default \"addoption\" event (fired before adding new option to selection list)\r\n\r\n  $document.on(\"addoption\", function (e, args) {\r\n    let row = args.data,\r\n        // New row to be validated\r\n    arp = args.parents; // Parent field values\r\n\r\n    for (let i = 0, cnt = arp.length; i < cnt; i++) {\r\n      // Iterate parent values\r\n      let p = arp[i];\r\n      if (!p.length) // Empty parent\r\n        //continue; // Allow\r\n        return args.valid = false; // Disallow\r\n\r\n      let val = row[\"ff\" + (i > 0 ? i + 1 : \"\")]; // Filter fields start from the 6th field\r\n\r\n      if (!$__default.default.isUndefined(val) && !p.includes(String(val))) // Filter field value not in parent field values\r\n        return args.valid = false; // Returns false if invalid\r\n    }\r\n  }); // Click handler for buttons\r\n\r\n  $document.on(\"click\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $__default.default(this).data()),\r\n        action = data.ewAction;\r\n\r\n    if (!action) {\r\n      return true;\r\n    } else if (action == \"none\") {\r\n      return false;\r\n    } else if (action == \"redirect\") {\r\n      return ew.redirect(data.url);\r\n    } else if (action == \"reload\") {\r\n      location.reload();\r\n      return false;\r\n    } else if (action == \"submit\") {\r\n      delete data.ewAction;\r\n      return ew.submitAction(e, data);\r\n    } else if (action == \"modal\") {\r\n      e.preventDefault();\r\n      return data.ajax ? ew.inlineAction({\r\n        evt: e,\r\n        ...data\r\n      }) : ew.modalDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"inline\" || action == \"grid\") {\r\n      e.preventDefault();\r\n      return ew.inlineAction({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"export\") {\r\n      return ew.export({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"layout\") {\r\n      return ew.toggleLayout(this);\r\n    } else if (action == \"language\") {\r\n      return ew.setLanguage(this);\r\n    } else if (action == \"filter\") {\r\n      return ew.filter(e);\r\n    } else if (action == \"sort\") {\r\n      return ew.sort(e, this.dataset);\r\n    } else if (action == \"refresh\") {\r\n      let url = ew.setLayout(this.dataset.url, false);\r\n      if (url && url != \"#\") ew.refresh(fetch(url), this.dataset.context);\r\n      return false;\r\n    } else if (action == \"email\") {\r\n      delete data.ewAction;\r\n      return ew.emailDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"set-action\") {\r\n      this.form.elements[\"action\"].value = data.value;\r\n    } else if (action == \"drilldown\") {\r\n      return ew.showDrillDown(e, this, data.url, data.id, data.hdr);\r\n    } else if (action == \"add-option\") {\r\n      delete data.ewAction;\r\n      return ew.addOptionDialogShow({\r\n        evt: e,\r\n        ...data\r\n      });\r\n    } else if (action == \"search-type\") {\r\n      return ew.setSearchType(this);\r\n    } else if (action == \"search-operator\") {\r\n      ew.toggleSearchOperator(e, data.target, data.value);\r\n    } else if (action == \"search-toggle\") {\r\n      let panel = document.getElementById(this.dataset.form + \"_search_panel\");\r\n\r\n      if (panel) {\r\n        bootstrap.Collapse.getOrCreateInstance(panel).toggle();\r\n        this.classList.toggle(\"active\");\r\n      }\r\n    } else if (action == \"highlight\") {\r\n      $__default.default(\"mark.\" + this.dataset.name).toggleClass(\"mark\");\r\n      this.classList.toggle(\"active\");\r\n    } else if (action == \"inline-delete\") {\r\n      return ew.confirmDelete(this);\r\n    } else if (action == \"add-grid-row\") {\r\n      return ew.addGridRow(this);\r\n    } else if (action == \"delete-grid-row\") {\r\n      return ew.deleteGridRow(this, this.dataset.rowindex);\r\n    } else if (action == \"select-all\") {\r\n      ew.selectAll(this);\r\n    } else if (action == \"select-key\") {\r\n      ew.selectKey(e);\r\n    } else if (action == \"select-all-keys\") {\r\n      ew.selectAllKeys(this);\r\n    } else if (action == \"import\") {\r\n      return ew.importDialogShow({\r\n        evt: e,\r\n        hdr: data.hdr\r\n      });\r\n    } else if (action == \"password\") {\r\n      return ew.togglePassword(e);\r\n    } else if (action == \"push\") {\r\n      return ew.pushNotificationDialogShow({\r\n        evt: e,\r\n        url: data.apiUrl\r\n      });\r\n    } else if (action == \"enable-2fa\") {\r\n      return ew.enable2FA();\r\n    } else if (action == \"disable-2fa\") {\r\n      return ew.disable2FA();\r\n    } else if (action == \"send-otp\") {\r\n      var _document$getElementB;\r\n\r\n      return ew.sendOTP((_document$getElementB = document.getElementById(data.account)) == null ? void 0 : _document$getElementB.value);\r\n    } else if (action == \"backup-codes\") {\r\n      return ew.showBackupCodes();\r\n    } else if (action == \"scroll-top\") {\r\n      $__default.default(document).scrollTop($__default.default('#top').offset().top);\r\n      return false;\r\n    }\r\n  }) // Change handler for selects\r\n  .on(\"change\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $__default.default(this).data());\r\n    if (!data.ewAction) return true;\r\n    let actions = data.ewAction.split(\" \").filter(action => !!action);\r\n\r\n    for (let action of actions) {\r\n      if (action == \"submit-form\") {\r\n        var _this$form;\r\n\r\n        (_this$form = this.form) == null ? void 0 : _this$form.submit();\r\n      } else if (action == \"change-page-size\") {\r\n        let pageSize = ew.sameText(this.value, \"ALL\") ? \"ALL\" : ew.parseNumber(this.value);\r\n\r\n        if (ew.convertToBool(data.ajax)) {\r\n          let url = ew.setLayout(this.dataset.url, false) + \"&\" + this.name + \"=\" + pageSize;\r\n          ew.refresh(fetch(url), this.dataset.context);\r\n        } else {\r\n          let url = ew.setSearchParam(this.dataset.url, this.name, pageSize);\r\n          ew.redirect(url);\r\n        }\r\n\r\n        return false;\r\n      } else if (action == \"update-options\") {\r\n        ew.updateOptions.call(this);\r\n      } else if (action == \"autofill\") {\r\n        ew.autoFill(this);\r\n      } else if (action == \"search-operator\") {\r\n        return ew.searchOperatorChange(this);\r\n      } else if (action == \"language\") {\r\n        ew.setLanguage(this);\r\n      } else if (action == \"chart-order\") {\r\n        ew.updateChart(this);\r\n      }\r\n    }\r\n  }).on(\"keydown\", \"[data-ew-action]:not([data-ew-action=''])\", function (e) {\r\n    let data = Object.assign({}, $__default.default(this).data()),\r\n        action = data.ewAction;\r\n\r\n    if (action == \"change-page\") {\r\n      // ew-page-number\r\n      if (e.key == \"Enter\") {\r\n        if (ew.convertToBool(data.ajax)) {\r\n          let url = ew.setLayout(this.dataset.url, false) + \"&\" + this.name + \"=\" + ew.parseNumber(this.value);\r\n          ew.refresh(fetch(url), this.dataset.context);\r\n        } else {\r\n          ew.currentUrl.searchParams.set(this.name, ew.parseNumber(this.value));\r\n          window.location = ew.sanitizeUrl(ew.currentUrl.toString());\r\n        }\r\n\r\n        return false;\r\n      }\r\n    }\r\n  }); // Click handler for row links\r\n\r\n  $document.on(\"click\", \".ew-row-link\", e => e.stopPropagation()); // Fix z-index of multiple modals\r\n\r\n  $document.on(\"show.bs.modal\", \".modal\", function () {\r\n    var zIndex = 1050 + $__default.default(\".modal:visible\").length;\r\n    $__default.default(this).css(\"z-index\", zIndex);\r\n    setTimeout(function () {\r\n      $__default.default(\".modal-backdrop\").not(\".modal-stack\").css(\"z-index\", zIndex - 1).addClass(\"modal-stack\");\r\n    }, 0);\r\n  }); // Fix scrolling of multiple modals\r\n\r\n  $document.on(\"hidden.bs.modal\", \".modal\", function () {\r\n    $__default.default(\".modal:visible\").length && $__default.default(\"body\").addClass(\"modal-open\");\r\n  }); // Crop action for jQuery File Upload\r\n\r\n  $__default.default.blueimp.fileupload.prototype.options.processQueue.unshift({\r\n    action: \"cropImage\",\r\n    // Action name\r\n    fileTypes: \"@loadImageFileTypes\",\r\n    // Reuse loadImageFileTypes\r\n    maxFileSize: \"@loadImageMaxFileSize\",\r\n    // Reuse loadImageMaxFileSize\r\n    cropperOptions: \"@\",\r\n    // Use global settings in ewcore.js, see https://github.com/fengyuanchen/cropperjs/blob/e969348d313dafe3416926125b21388cc67cefb1/README.md#options\r\n    cropperCanvasOptions: \"@\",\r\n    // Use global settings in ewcore.js, see https://github.com/fengyuanchen/cropperjs/blob/e969348d313dafe3416926125b21388cc67cefb1/README.md#getcroppedcanvasoptions\r\n    disabled: \"@disableImageCrop\" // Use data-disable-image-crop attribute to enable/disable\r\n\r\n  });\r\n  $__default.default.widget(\"blueimp.fileupload\", $__default.default.blueimp.fileupload, {\r\n    processActions: {\r\n      cropImage: function (data, options) {\r\n        let file = data.files[data.index];\r\n        if (options.disabled || $__default.default.isNumber(options.maxFileSize) && file.size > options.maxFileSize || options.fileTypes && !options.fileTypes.test(file.type)) return data;\r\n        let url = URL.createObjectURL(file),\r\n            dfd = $__default.default.Deferred(),\r\n            that = this;\r\n        let $dlg = ew.cropperDialog || $__default.default(\"#ew-cropper-dialog\").on(\"shown.bs.modal\", function () {\r\n          $dlg.data(\"cropper\", new Cropper(this.querySelector(\"#ew-crop-image\"), options.cropperOptions));\r\n        }).on(\"hidden.bs.modal\", function () {\r\n          var _$dlg$data;\r\n\r\n          (_$dlg$data = $dlg.data(\"cropper\")) == null ? void 0 : _$dlg$data.destroy();\r\n          $dlg.removeData(\"cropper\");\r\n          $dlg.find(\"#ew-crop-image\").attr(\"src\", \"data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=\");\r\n        });\r\n        ew.cropperDialog = $dlg;\r\n        $dlg.find(\"#ew-crop-image\").attr(\"src\", url);\r\n        $dlg.find(\".ew-crop-btn\").off(\"click\").on(\"click\", function () {\r\n          if ($dlg.data(\"cropper\")) {\r\n            try {\r\n              let canvas = $dlg.data(\"cropper\").getCroppedCanvas(options.cropperCanvasOptions);\r\n              canvas.toBlob(blob => {\r\n                data.files[data.index] = new File([blob], file.name, {\r\n                  type: file.type\r\n                });\r\n                dfd.resolveWith(that, [data]);\r\n              }, file.type);\r\n            } catch (error) {\r\n              ew.alert(error);\r\n              dfd.rejectWith(that, [data]);\r\n            } finally {\r\n              $dlg.modal(\"hide\");\r\n            }\r\n          }\r\n        });\r\n        $dlg.find(\".ew-skip-btn\").off(\"click\").on(\"click\", function () {\r\n          dfd.resolveWith(that, [data]);\r\n          $dlg.modal(\"hide\");\r\n        });\r\n        $dlg.modal(\"show\");\r\n        return dfd.promise();\r\n      }\r\n    }\r\n  });\n\n  $__default.default.extend({\r\n    isBoolean: function (o) {\r\n      return typeof o === 'boolean';\r\n    },\r\n    isNumber: function (o) {\r\n      return typeof o === 'number' && isFinite(o);\r\n    },\r\n    isObject: function (o) {\r\n      return o && (typeof o === 'object' || this.isFunction(o)) || false;\r\n    },\r\n    isString: function (o) {\r\n      return typeof o === 'string';\r\n    },\r\n    isUndefined: function (o) {\r\n      return typeof o === 'undefined';\r\n    },\r\n    isValue: function (o) {\r\n      return this.isObject(o) || this.isString(o) || this.isNumber(o) || this.isBoolean(o);\r\n    },\r\n    isDate: function (o) {\r\n      return this.type(o) === 'date' && o.toString() !== 'Invalid Date' && !isNaN(o);\r\n    },\r\n    later: function (when, o, fn, data, periodic) {\r\n      when = when || 0;\r\n      o = o || {};\r\n      var m = fn,\r\n          d = data,\r\n          f,\r\n          r;\r\n      if (this.isString(fn)) m = o[fn];\r\n      if (!m) return;\r\n      if (!this.isUndefined(data) && !this.isArray(d)) d = [data];\r\n\r\n      f = function () {\r\n        m.apply(o, d || []);\r\n      };\r\n\r\n      r = periodic ? setInterval(f, when) : setTimeout(f, when);\r\n      return {\r\n        interval: periodic,\r\n        cancel: function () {\r\n          if (this.interval) {\r\n            clearInterval(r);\r\n          } else {\r\n            clearTimeout(r);\r\n          }\r\n        }\r\n      };\r\n    }\r\n  });\n\n  /**\r\n   * jQuery.fields() plugin\r\n   *\r\n   * @param {string|undefined} fldvar - Field variable name or undefined\r\n   *  If field variable name, returns jQuery object of the specified field element(s).\r\n   *  If unspecified, returns object of jQuery objects of all fields.\r\n   * @returns jQuery object\r\n   */\r\n\r\n  $__default.default.fn.fields = function (fldvar) {\r\n    // Note: fldvar has NO \"x_\" prefix\r\n    let rec = {},\r\n        id = this.attr(\"id\"),\r\n        obj = this[0],\r\n        m = id.match(/^[xy](\\d*)_/),\r\n        f,\r\n        tbl,\r\n        infix;\r\n\r\n    if (m) {\r\n      // \"this\" is input element\r\n      f = ew.getForm(obj); // form\r\n\r\n      tbl = this.data(\"table\"); // table var\r\n\r\n      infix = m[1]; // row index\r\n    } else if (obj != null && obj.htmlForm) {\r\n      // \"this\" is form\r\n      f = obj.$element; // form\r\n\r\n      tbl = obj.id.replace(new RegExp(\"^f|\" + obj.pageId + \"$\", \"g\"), \"\"); // table var\r\n\r\n      infix = obj.htmlForm.dataset.rowindex; // row index\r\n    }\r\n\r\n    let selector = \"[data-table\" + (tbl ? \"=\" + tbl : \"\") + \"][data-field\" + (fldvar ? \"=x_\" + fldvar : \"\") + \"]\" + ($__default.default.isValue(infix) ? \"[name^=x\" + infix + \"]\" : \"\") + \":not(.ew-custom-option)\";\r\n\r\n    if (f && selector) {\r\n      $__default.default(f).find(selector).each(function () {\r\n        let key = this.dataset.field.substring(2),\r\n            // \"data-field\"\r\n        name = this.getAttribute(\"name\");\r\n        key = /^y_/.test(name) ? \"y_\" + key : key; // Use \"y_fldvar\" as key for 2nd search input\r\n\r\n        rec[key] = rec[key] ? rec[key].add(this) : $__default.default(this); // Create jQuery object for each field\r\n      });\r\n    }\r\n\r\n    return fldvar ? rec[fldvar] : rec;\r\n  };\r\n\r\n  $__default.default.fn.extend({\r\n    // Get jQuery object of the row (<div> or <tr>)\r\n    row: function () {\r\n      var _this$data;\r\n\r\n      let $row = this.closest(\"#r_\" + ((_this$data = this.data(\"field\")) == null ? void 0 : _this$data.substring(2)));\r\n      if (!$row[0]) $row = this.closest(\".ew-table > tbody > tr\"); // Grid page\r\n\r\n      return $row;\r\n    },\r\n    // Show/Hide field\r\n    visible: function (v) {\r\n      var _this$data2;\r\n\r\n      let $p = this.closest(\"#r_\" + ((_this$data2 = this.data(\"field\")) == null ? void 0 : _this$data2.substring(2))); // Find the row\r\n\r\n      if (!$p[0]) $p = this.closest(\"[id^=el]\"); // Find the span\r\n\r\n      if (typeof v != \"undefined\") {\r\n        $p.toggle(v);\r\n        return this;\r\n      } else {\r\n        return $el.is(\":visible\");\r\n      }\r\n    },\r\n    // Get/Set field \"readonly\" attribute\r\n    // Note: This attribute is ignored if the value of the type attribute is hidden, range, color, checkbox, radio, file, or a button type\r\n    readonly: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"readOnly\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"readOnly\");\r\n      }\r\n    },\r\n    // Get/Set field \"disabled\" attribute\r\n    // Note: A disabled control's value isn't submitted with the form\r\n    disabled: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        this.prop(\"disabled\", v);\r\n        return this;\r\n      } else {\r\n        return this.prop(\"disabled\");\r\n      }\r\n    },\r\n    // Get/Set field value(s)\r\n    // Note: Return array if select-multiple\r\n    value: function (v) {\r\n      if (typeof v != \"undefined\") {\r\n        ew.selectOption(this[0], v);\r\n        return this;\r\n      } else {\r\n        return ew.getValue(this[0]);\r\n      }\r\n    },\r\n    // Get field value as number\r\n    toNumber: function () {\r\n      return ew.parseNumber(this.value());\r\n    },\r\n    // Get field value as Luxon object\r\n    toDate: function () {\r\n      var _ew$vars$tables, _ew$vars$tables$table, _ew$vars$tables$table2, _ew$vars$tables$table3;\r\n\r\n      let data = this.data(),\r\n          table = data.table,\r\n          field = data.field.replace(/^[xy]_/, \"\"),\r\n          format = (_ew$vars$tables = ew.vars.tables) == null ? void 0 : (_ew$vars$tables$table = _ew$vars$tables[table]) == null ? void 0 : (_ew$vars$tables$table2 = _ew$vars$tables$table.fields) == null ? void 0 : (_ew$vars$tables$table3 = _ew$vars$tables$table2[field]) == null ? void 0 : _ew$vars$tables$table3.clientFormatPattern;\r\n      return ew.parseDateTime(this.value(), format);\r\n    },\r\n    // Get field value as native Date object\r\n    toJsDate: function () {\r\n      return this.toDate().toJSDate();\r\n    }\r\n  });\n\n  bootstrap.Dropdown.prototype.toggle = function () {\r\n    if (!this._element.classList.contains(\"ew-dropdown-toggle\")) {\r\n      if (this._element.closest(\"[data-widget]\")) $__default.default(this._element).on(\"click.ew.dropdown\", e => {\r\n        bootstrap.Dropdown.clearMenus(e.originalEvent); // Clear menus first because this click event will not propagate to the document\r\n\r\n        e.stopPropagation(); // Stop propagate or the event will toggle row of expandable-table\r\n      }); // Move the menu to document body if menu inside responsive table\r\n\r\n      if (this._menu.closest(\".table-responsive\")) {\r\n        let container = this._menu.closest(\".popover-body, .modal-body, .offcanvas-body, body\");\r\n\r\n        container.appendChild(this._menu);\r\n        let menu = this._menu;\r\n        if (!this._element.id) this._element.id = \"dropdownbtn\" + ew.random();\r\n        menu.setAttribute('aria-labelledby', this._element.id);\r\n\r\n        function callback(mutationList) {\r\n          mutationList.forEach(mutation => {\r\n            switch (mutation.type) {\r\n              case \"attributes\":\r\n                if (mutation.target.classList.contains(\"show\")) menu.classList.add(\"d-block\");else menu.classList.remove(\"d-block\");\r\n                break;\r\n            }\r\n          });\r\n        }\r\n\r\n        let observer = new MutationObserver(callback);\r\n        observer.observe(this._parent, {\r\n          attributeFilter: [\"class\"],\r\n          attributeOldValue: false,\r\n          subtree: false\r\n        });\r\n      }\r\n\r\n      this._element.classList.add(\"ew-dropdown-toggle\");\r\n    }\r\n\r\n    return this._isShown() ? this.hide() : this.show();\r\n  };\n\n  var isNil = (value) => {\r\n      return value === null || value === undefined;\r\n  };\n\n  var isFunction = (value) => {\r\n      return typeof value === 'function';\r\n  };\n\n  var isNaNNumber = (value) => {\r\n      return typeof value === 'number' && isNaN(value);\r\n  };\n\n  var isFiniteNumber = (value) => {\r\n      return typeof value == 'number' && isFinite(value);\r\n  };\n\n  /**\r\n   * Optimized for performance\r\n   */\r\n  const multiplyByPowerOfTen = (number, powerOfTenExponent) => {\r\n      if (!isFiniteNumber(number))\r\n          return NaN;\r\n      const numAsString = '' + number;\r\n      const indexOfE = numAsString.indexOf('e');\r\n      if (indexOfE === -1) {\r\n          return +(numAsString + 'e' + powerOfTenExponent);\r\n      }\r\n      else {\r\n          return +(numAsString.slice(0, indexOfE) + 'e' + (+numAsString.slice(indexOfE + 1) + powerOfTenExponent));\r\n      }\r\n  };\n\n  /**\r\n   * Only handles direct power of ten (only integer exponents)\r\n   */\r\n  const log10 = (numberThatIsPowerOfTen) => {\r\n      return Math.round(Math.log(numberThatIsPowerOfTen) * Math.LOG10E);\r\n  };\n\n  const toObject = (arr, entriesResolver) => {\r\n      const object = {};\r\n      for (let i = 0; i < arr.length; ++i) {\r\n          if (i in arr) {\r\n              const [key, value] = entriesResolver(arr[i], i);\r\n              object[key] = value;\r\n          }\r\n      }\r\n      return object;\r\n  };\n\n  // <i> Extracted from https://stackoverflow.com/questions/3446170/escape-string-for-use-in-javascript-regex\r\n  const escapeRegexString = (string) => {\r\n      return string.replace(/[.*+?^${}()|[\\]\\\\]/g, match => `\\\\${match}`);\r\n  };\n\n  /**\r\n   * This function doesn't work with non-primitive arguments\r\n   */\r\n  const memoize = (fn) => {\r\n      const cache = {};\r\n      return function (...args) {\r\n          const cacheKey = args.length > 1 ? args.join('-(:-:)-') : args[0];\r\n          if (cacheKey in cache) {\r\n              return cache[cacheKey];\r\n          }\r\n          const result = fn.apply(this, args);\r\n          cache[cacheKey] = result;\r\n          return result;\r\n      };\r\n  };\n\n  const powerOf10LookupObject = (() => {\r\n      const object = {};\r\n      // 1 <= x <= Infinity (positive exponent)\r\n      let additionalZeros = '';\r\n      let currentValue;\r\n      while (currentValue !== Infinity) {\r\n          currentValue = +('1' + additionalZeros);\r\n          object[currentValue] = true;\r\n          additionalZeros += '0';\r\n      }\r\n      // 0 <= x < 1 (negative exponent)\r\n      additionalZeros = '';\r\n      currentValue = undefined;\r\n      while (currentValue !== 0) {\r\n          currentValue = +('0.' + additionalZeros + '1');\r\n          object[currentValue] = true;\r\n          additionalZeros += '0';\r\n      }\r\n      return object;\r\n  })();\r\n  const isPowerOfTen = (number) => {\r\n      return !!powerOf10LookupObject[number];\r\n  };\n\n  const toBase = (value, valueUnit, unitScale) => {\r\n      if (!isFiniteNumber(value) || valueUnit === unitScale.base)\r\n          return value;\r\n      if (!(valueUnit in unitScale.scale))\r\n          return NaN;\r\n      const toBaseMultiplier = unitScale.scale[valueUnit] || 1;\r\n      return isPowerOfTen(toBaseMultiplier)\r\n          ? multiplyByPowerOfTen(value, log10(toBaseMultiplier))\r\n          : value * toBaseMultiplier;\r\n  };\r\n  const convertUnit = (value, originUnit, targetUnit, unitScale) => {\r\n      if (!isFiniteNumber(value) || originUnit === targetUnit)\r\n          return value;\r\n      const valueAsBase = toBase(value, originUnit, unitScale);\r\n      const resolvedScale = Object.assign(Object.assign({}, unitScale.scale), { [unitScale.base]: 1 });\r\n      if (isNaN(valueAsBase) || !(originUnit in resolvedScale) || !(targetUnit in resolvedScale))\r\n          return NaN;\r\n      const conversionFactorFromBase = unitScale.scale[targetUnit] || 1;\r\n      return isPowerOfTen(conversionFactorFromBase)\r\n          ? multiplyByPowerOfTen(valueAsBase, -log10(conversionFactorFromBase))\r\n          : valueAsBase / conversionFactorFromBase;\r\n  };\r\n  /**\r\n   * Looks through every possibility for the 'best' available unit.\r\n   * i.e. Where the value has the fewest numbers before the decimal point,\r\n   * but is still higher than 1.\r\n   */\r\n  const toBest = (value, originUnit, unitScale, options) => {\r\n      const resolvedOptions = Object.assign({ exclude: [], cutOffNumber: 1 }, options);\r\n      let best = null;\r\n      const scale = unitScale.scale;\r\n      Object.keys(scale).sort((a, b) => scale[a] - scale[b]).forEach((scaleUnit) => {\r\n          const isIncluded = resolvedOptions.exclude.indexOf(scaleUnit) === -1;\r\n          if (!isIncluded)\r\n              return;\r\n          const result = convertUnit(value, originUnit, scaleUnit, unitScale);\r\n          const absoluteResult = Math.abs(result);\r\n          if (!best || (absoluteResult >= resolvedOptions.cutOffNumber && absoluteResult < Math.abs(best[0]))) {\r\n              best = [result, scaleUnit];\r\n          }\r\n      });\r\n      return best || [value, originUnit];\r\n  };\r\n  const unitScale = (unitScaleDefinition) => {\r\n      return {\r\n          toBase: (value, unit) => {\r\n              return toBase(value, unit, unitScaleDefinition);\r\n          },\r\n          convert: (value, originUnit, targetUnit) => {\r\n              return convertUnit(value, originUnit, targetUnit, unitScaleDefinition);\r\n          },\r\n          toBest: (value, originUnit, options) => {\r\n              return toBest(value, originUnit, unitScaleDefinition, options);\r\n          },\r\n          scaleDefinition: unitScaleDefinition,\r\n      };\r\n  };\n\n  /**\r\n   * Short version of mozilla polyfill:\r\n   * <i> See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\r\n   */\r\n  const stringRepeat = (str, count) => {\r\n      // return (str.repeat && str.repeat(count)) || new Array(count + 1).join(str);\r\n      if (count < 1)\r\n          return '';\r\n      let result = '';\r\n      let pattern = str;\r\n      while (count > 1) {\r\n          if (count & 1)\r\n              result += pattern;\r\n          count >>>= 1, pattern += pattern;\r\n      }\r\n      return result + pattern;\r\n  };\n\n  const baseCreateUnitScaleFromLocaleAbbreviations = (str) => {\r\n      if (!str) {\r\n          return unitScale({ base: '', scale: {} });\r\n      }\r\n      const scale = str.split('|');\r\n      const scaleDefinition = { ['']: 1 };\r\n      scale.forEach((scaleItem, scaleItemIndex) => {\r\n          if (!scaleItem)\r\n              return;\r\n          scaleDefinition[scaleItem] = +(1 + stringRepeat('0', scaleItemIndex));\r\n      });\r\n      return unitScale({ base: '', scale: scaleDefinition });\r\n  };\r\n  const createUnitScaleFromLocaleAbbreviations = memoize(baseCreateUnitScaleFromLocaleAbbreviations);\n\n  const replaceNumeralSystemWithLatinNumbers = (numericStringWithExtraInfo, numeralSystemMap) => {\r\n      if (!numeralSystemMap || numeralSystemMap.length !== 10)\r\n          return numericStringWithExtraInfo;\r\n      const numericStringLength = numericStringWithExtraInfo.length;\r\n      const numeralSystemToLatinSystemMap = toObject(numeralSystemMap, (digit, digitIndex) => [digit.replace(/\\u200e/g, ''), '' + digitIndex]);\r\n      let output = '';\r\n      for (let numericStringIndex = 0; numericStringIndex < numericStringLength; numericStringIndex++) {\r\n          const char = numericStringWithExtraInfo[numericStringIndex];\r\n          output += numeralSystemToLatinSystemMap[char] || char;\r\n      }\r\n      return output;\r\n  };\r\n  const getScalingFactorFromAbbreviations = (stringOriginal, options) => {\r\n      var _a;\r\n      const scale = createUnitScaleFromLocaleAbbreviations((_a = options.locale) === null || _a === void 0 ? void 0 : _a.abbreviations);\r\n      const abbreviationsSortedByLengthDesc = Object.keys(scale.scaleDefinition.scale).sort((a, b) => b.length - a.length);\r\n      let abbreviationScalingFactor = 1;\r\n      for (const abbreviation of abbreviationsSortedByLengthDesc) {\r\n          const scapedAbbreviationForRegex = escapeRegexString(abbreviation);\r\n          const regexp = new RegExp('[^a-zA-Z]'\r\n              + `(${scapedAbbreviationForRegex})|(${scapedAbbreviationForRegex.replace(/\\u200e/g, '')})`\r\n              + '(?:\\\\)(?:\\\\))?)?$');\r\n          if (stringOriginal.match(regexp)) {\r\n              abbreviationScalingFactor = scale.toBase(abbreviationScalingFactor, abbreviation);\r\n              break;\r\n          }\r\n      }\r\n      return abbreviationScalingFactor;\r\n  };\r\n  // unformats numbers separators, decimals places, signs, abbreviations\r\n  const formattedStringToNumber = (inputString, options) => {\r\n      var _a;\r\n      const locale = options.locale;\r\n      const stringOriginal = inputString;\r\n      let value;\r\n      // Replace special digits with latin digits\r\n      const stringWithLatinDigits = replaceNumeralSystemWithLatinNumbers(inputString, (_a = options.locale) === null || _a === void 0 ? void 0 : _a.numeralSystem);\r\n      if (options.zeroFormat && stringWithLatinDigits === options.zeroFormat) {\r\n          value = 0;\r\n      }\r\n      else if (options.nullFormat && stringWithLatinDigits === options.nullFormat || !stringWithLatinDigits.replace(/[^0-9]+/g, '').length) {\r\n          value = null;\r\n      }\r\n      else {\r\n          // Replaces the locale decimal delimiter with a dot (.)\r\n          const decimalDelimiterFromLocale = locale.delimiters.decimal;\r\n          const stringWithDotDecimalDelimiter = decimalDelimiterFromLocale === '.'\r\n              ? stringWithLatinDigits\r\n              : stringWithLatinDigits.replace(/\\./g, '').replace(decimalDelimiterFromLocale, '.');\r\n          // Determines the scaling factor from the abbreviations (if has abbreviations)\r\n          const abbreviationScalingFactor = getScalingFactorFromAbbreviations(stringOriginal, options);\r\n          // Check for negative number\r\n          const negativeFactor = (stringWithDotDecimalDelimiter.split('-').length\r\n              + Math.min(stringWithDotDecimalDelimiter.split('(').length - 1, stringWithDotDecimalDelimiter.split(')').length - 1)) % 2 ? 1 : -1;\r\n          // Remove non numbers\r\n          const numberAsString = stringWithDotDecimalDelimiter.replace(/[^0-9.]+/g, '');\r\n          value = negativeFactor * multiplyByPowerOfTen(+numberAsString, log10(abbreviationScalingFactor));\r\n      }\r\n      return value;\r\n  };\n\n  const locale = {\r\n      code: 'en',\r\n      delimiters: {\r\n          thousands: ',',\r\n          decimal: '.',\r\n      },\r\n      abbreviations: '|||K|||M|||B|||T',\r\n      ordinal: number => {\r\n          const b = number % 10;\r\n          return (Math.floor(number % 100 / 10) === 1)\r\n              ? 'th'\r\n              : b === 1\r\n                  ? 'st'\r\n                  : b === 2\r\n                      ? 'nd'\r\n                      : b === 3\r\n                          ? 'rd'\r\n                          : 'th';\r\n      },\r\n  };\n\n  function merge(...args) {\r\n      const newObject = {};\r\n      const argsLength = args.length;\r\n      for (let i = 0; i < argsLength; i++) {\r\n          for (const key in args[i])\r\n              newObject[key] = args[i][key];\r\n      }\r\n      return newObject;\r\n  }\n\n  var isObject = (value) => {\r\n      return typeof value === 'object' && value !== null;\r\n  };\n\n  var isString = (value) => {\r\n      return typeof value === 'string';\r\n  };\n\n  const truncateNumber = (value) => {\r\n      return value < 0 ? Math.ceil(value) : Math.floor(value);\r\n  };\n\n  const getPatternParts = (patternMask) => {\r\n      let isInEscapedPart = false;\r\n      let currentEscapedWord = '';\r\n      const parts = [];\r\n      for (let i = 0; i < patternMask.length; i++) {\r\n          const char = patternMask.charAt(i);\r\n          if (char === \"'\" && !isInEscapedPart) {\r\n              isInEscapedPart = true;\r\n              currentEscapedWord = '';\r\n          }\r\n          else if (char === \"'\" && isInEscapedPart && patternMask.charAt(i - 1) !== \"\\\\\") {\r\n              isInEscapedPart = false;\r\n              parts.push({ escaped: true, value: currentEscapedWord });\r\n          }\r\n          else if (isInEscapedPart) {\r\n              currentEscapedWord += char;\r\n          }\r\n          else {\r\n              if (parts.length && !parts[parts.length - 1].escaped) {\r\n                  parts[parts.length - 1].value += char;\r\n              }\r\n              else {\r\n                  parts.push({ escaped: false, value: char });\r\n              }\r\n          }\r\n      }\r\n      return parts;\r\n  };\r\n  /**\r\n   * Checks only the pattern parts that are not escaped\r\n   */\r\n  const patternIncludes = (patternMask, search) => {\r\n      return patternRemoveEscapedText(patternMask).indexOf(search) !== -1;\r\n  };\r\n  /**\r\n   * Replaces only the pattern parts that are not escaped\r\n   */\r\n  const patternReplace = (patternMask, searchValue, replaceValue) => {\r\n      return getPatternParts(patternMask)\r\n          .map(e => e.escaped ? `'${e.value}'` : e.value.replace(searchValue, _ => replaceValue))\r\n          .join('');\r\n  };\r\n  const patternRemoveEscapedText = (patternMask) => {\r\n      return getPatternParts(patternMask)\r\n          .filter(e => !e.escaped)\r\n          .map(e => e.value)\r\n          .join('');\r\n  };\r\n  const patternStripAndNormalizeEscapedText = (patternMask) => {\r\n      return getPatternParts(patternMask)\r\n          .map(e => e.escaped ? e.value.replace(/\\\\'/g, \"'\") : e.value)\r\n          .join('');\r\n  };\n\n  const stringIncludes = (str, search) => {\r\n      return str.indexOf(search) !== -1;\r\n  };\n\n  /**\r\n   * What does it look for in the pattern?\r\n   *     '(' | '+' | '-'\r\n   * What does it remove from the pattern?\r\n   *     '(' | ')' | '+' | '-'\r\n   * What options does it provide?\r\n   *     - negativeParentheses (if negative value should be wrapped between parentheses)\r\n   *     - forceSign (is positive values should have a + sign)\r\n   * How will it transform the output?\r\n   *     - Parentheses:\r\n   *         '-23.58' & '(0.00)'  =>  '(23.58)'\r\n   *         '-23.58' & '( 0.00 )'  =>  '( 23.58 )'\r\n   *         '-23.58' & '(  0.00 ) '  =>  ' (  23.58 )'\r\n   *     - Sign:\r\n   *         '12.34' & '+0.0'  =>  '+12.34'\r\n   *         '-12.34' & '+0.0'  =>  '-12.34'\r\n   *\r\n   * <i> If '+' is somewhere in the pattern, it will set the '+' sign for positive numbers\r\n   *     and same for negative numbers.\r\n   * <i> If '-' is somewhere in the pattern, it will place the negative sign in the defined position.\r\n   *     But it won't still set the sign for positive numbers.\r\n   * <i> Checks if we should use parentheses for negative number or if we should prefix with a sign.\r\n   *     If both are present we default to parentheses.\r\n   */\r\n  const signRule = (pattern) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(pattern);\r\n      const negativeParentheses = stringIncludes(patternWithoutEscapedText, '(') && stringIncludes(patternWithoutEscapedText, ')');\r\n      const forceSign = !negativeParentheses && stringIncludes(patternWithoutEscapedText, '+');\r\n      let outputPatternMask = pattern;\r\n      outputPatternMask = patternReplace(outputPatternMask, '(', `'nps'`);\r\n      outputPatternMask = patternReplace(outputPatternMask, ')', `'npe'`);\r\n      outputPatternMask = patternReplace(outputPatternMask, /(-|\\+)/, `'s'`);\r\n      return [outputPatternMask, { negativeParentheses, forceSign }];\r\n  };\n\n  /**\r\n   * Checks if abbreviation is wanted\r\n   * <i> Applied only when 'a' is present.\r\n   * <i> If 'a' is followed by 'k' | 'm' | 'b' | 't', then, it will force the abbreviation to be the specified\r\n   *     unit. (e.g. (123456.78, '0,0.00am')  =>  '0.12M')\r\n   */\r\n  const abbreviationRule = (patternMask) => {\r\n      let compactUnit = null; // force abbreviation\r\n      let compact = false;\r\n      // If it includes 'a' means it should be abbreviated (only if at least includes 'a')\r\n      if (patternIncludes(patternMask, 'a')) {\r\n          compact = true;\r\n          const patternWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n          const abbreviationRegExpResult = patternWithoutEscapedText.match(/a(k|m|b|t)?/);\r\n          compactUnit = !!abbreviationRegExpResult ? abbreviationRegExpResult[1] : null;\r\n      }\r\n      let outputPatternMask = patternMask;\r\n      outputPatternMask = patternReplace(outputPatternMask, /a(k|m|b|t)?/, `'a'`);\r\n      return [outputPatternMask, { compact, compactUnit, compactAuto: compact && !compactUnit }];\r\n  };\n\n  /**\r\n   * Faster version of String.prototype.split that only handles splitting in two parts\r\n   */\r\n  const splitStringInTwoParts = (str, separator) => {\r\n      if (!str)\r\n          return ['', ''];\r\n      const indexOfSearchChar = str.indexOf(separator);\r\n      if (indexOfSearchChar === -1) {\r\n          return [str, ''];\r\n      }\r\n      else {\r\n          return [str.slice(0, indexOfSearchChar), str.slice(indexOfSearchChar + 1)];\r\n      }\r\n  };\n\n  const countChars = (string, char) => {\r\n      return !string ? 0 : string.split('').filter(stringChar => stringChar === char).length;\r\n  };\r\n  /**\r\n   * Fraction digits (decimals) count rule (minimum and maximum fraction digits)\r\n   * <i> Optional fraction digits would go always after the forced ones\r\n   */\r\n  const decimalPlacesRule = (patternMask) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n      const patternPrecisionPart = splitStringInTwoParts(patternWithoutEscapedText, '.')[1];\r\n      let minimumFractionDigits = 0;\r\n      let maximumFractionDigits = 0;\r\n      if (!!patternPrecisionPart) {\r\n          const trimmedPatternPrecisionPart = patternPrecisionPart.trim();\r\n          if (stringIncludes(trimmedPatternPrecisionPart, '[')) {\r\n              // If it contains optional fraction digits\r\n              const patternPrecisionPartWithoutClosingBracket = trimmedPatternPrecisionPart.replace(']', '');\r\n              // Isolates forced (left) vs optional (right) decimals\r\n              const precisionSplitted = splitStringInTwoParts(patternPrecisionPartWithoutClosingBracket, '[');\r\n              minimumFractionDigits = countChars(precisionSplitted[0], '0');\r\n              maximumFractionDigits = minimumFractionDigits + countChars(precisionSplitted[1], '0');\r\n          }\r\n          else if (stringIncludes(trimmedPatternPrecisionPart, '#')) {\r\n              // If it contains optional fraction digits marked with '#'\r\n              minimumFractionDigits = countChars(trimmedPatternPrecisionPart.split('#')[0], '0');\r\n              maximumFractionDigits = trimmedPatternPrecisionPart.length;\r\n          }\r\n          else if (stringIncludes(trimmedPatternPrecisionPart, 'X')) {\r\n              // If it contains no-maximum fraction digits marked with 'X'\r\n              minimumFractionDigits = countChars(trimmedPatternPrecisionPart.split('X')[0], '0');\r\n              maximumFractionDigits = 500;\r\n          }\r\n          else {\r\n              const fractionDigits = countChars(trimmedPatternPrecisionPart.split(' ')[0], '0');\r\n              minimumFractionDigits = fractionDigits;\r\n              maximumFractionDigits = fractionDigits;\r\n          }\r\n      }\r\n      return { minimumFractionDigits, maximumFractionDigits };\r\n  };\n\n  /**\r\n   * Check for optional decimals.\r\n   *\r\n   * <i> 'optionalDecimals' This would mean that:\r\n   *     - In case the number (value) HAS decimals (e.g. 55.34), then it would display the fixed amount of defined\r\n   *       decimals (e.g. '0[.]000' => 3 fixed decimals), but, if the number is an straight integer, then it won't\r\n   *       display any decimals.\r\n   * <i> It could also accept optional decimals afterwards. So for the case '0[.]00##':\r\n   *     - If it is an integer, displays only an integer:  23 => '23'\r\n   *     - If it has 1 decimal, displays 2 decimals:       23.4 => '23.40'\r\n   *     - If it has 3 decimals, displays 3 decimals:      23.456 => '23.456'\r\n   */\r\n  const optionalDecimalPlacesRule = (patternMask) => {\r\n      let optionalFractionDigits = false;\r\n      let outputPatternMask = patternMask;\r\n      if (patternIncludes(patternMask, '[.]')) {\r\n          optionalFractionDigits = true;\r\n          outputPatternMask = patternReplace(outputPatternMask, '[.]', '.');\r\n      }\r\n      return [outputPatternMask, { optionalFractionDigits }];\r\n  };\n\n  /**\r\n   * <i> The regExp tests for:\r\n   *     - 0.00##X\r\n   *     - 0,0.00##X\r\n   *     - #.00##X (without leading zeros)\r\n   *     - #,#.00##X (without leading zeros)\r\n   */\r\n  const numberPositionRule = (patternMask) => {\r\n      const numberPartRegExp = /((((0|#)+,)?(0|#)+(\\.([0#X]|\\[0+\\])+)?){1})/;\r\n      return patternReplace(patternMask, numberPartRegExp, `'n'`);\r\n  };\r\n  /**\r\n   * Minimum leading integer digits rule\r\n   * This will define the minimum amount of digits on the integer part (left-most grouped zeroes).\r\n   *     - (12.34, '0000.0') =>  '0012.3'\r\n   *     - (12.34, '0000,0.0')  =>  '0,012.3'\r\n   *     - (0.34, '#.0') => '.3'\r\n   *     - (1.34, '#.0') => '1.3'\r\n   *\r\n   * <i> It always pick the left-most amount of zeros, so:\r\n   *     - If pattern has NO thousands separator ('000.0'), then the amount at the left of the DOT is used.\r\n   *     - If pattern HAS thousands separator ('00,0.0'), then the amount at the left of the COMMA is used.\r\n   * <i> This will remove the integer zero for numbers between 1 and -1 (e.g. 0.23 or -0.5)\r\n   *     - If pattern integer part is option (0.24, '#.00') => '.24'\r\n   */\r\n  const minimumIntegerDigitsRule = (patternMask) => {\r\n      const patternMaskWithoutEscapedText = patternRemoveEscapedText(patternMask);\r\n      const patternMaskIntegerPart = patternMaskWithoutEscapedText.split('.')[0].split(',')[0];\r\n      // If it has '#' in the integer part, sets the minimumIntegerDigits to 0\r\n      if (/#/g.test(patternMaskIntegerPart)) {\r\n          return 0;\r\n      }\r\n      return (patternMaskIntegerPart.match(/0/g) || []).length;\r\n  };\r\n  // If sign is not included, put sign at the left of the number\r\n  const addSignPositionIfItDoesNotExists = (patternMask) => {\r\n      if (stringIncludes(patternMask, `'s'`) || stringIncludes(patternMask, `'nps'`))\r\n          return patternMask;\r\n      return patternMask.replace(`'n'`, _ => `'s''n'`);\r\n  };\r\n  const baseParsePattern = (inputPattern) => {\r\n      const resolvedInputPattern = isString(inputPattern) && inputPattern || '0,0.##########';\r\n      const [patternMaskAfterSignRule, signRules] = signRule(resolvedInputPattern);\r\n      const [patternMaskAfterAbbreviationRule, abbreviationRules] = abbreviationRule(patternMaskAfterSignRule);\r\n      const [patternMaskAfterOptionalDecimalPlacesRule, optionalDecimalPlacesRules] = optionalDecimalPlacesRule(patternMaskAfterAbbreviationRule);\r\n      const outputPatternMask = patternMaskAfterOptionalDecimalPlacesRule;\r\n      const outputPatternMaskWithoutEscapedText = patternRemoveEscapedText(outputPatternMask);\r\n      const decimalPlacesRules = decimalPlacesRule(outputPatternMask);\r\n      const minimumIntegerDigits = minimumIntegerDigitsRule(outputPatternMask);\r\n      const grouping = outputPatternMaskWithoutEscapedText.indexOf(',') > -1;\r\n      const patternMaskAfterHandlingNumberPosition = numberPositionRule(outputPatternMask);\r\n      const patternMaskWithEnsuredSignPosition = addSignPositionIfItDoesNotExists(patternMaskAfterHandlingNumberPosition);\r\n      const patternMask = patternMaskWithEnsuredSignPosition;\r\n      return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({}, signRules), abbreviationRules), optionalDecimalPlacesRules), decimalPlacesRules), { grouping,\r\n          minimumIntegerDigits,\r\n          patternMask });\r\n  };\r\n  const parsePattern = memoize(baseParsePattern);\n\n  /**\r\n   * <i> Checks if value is negative, and removes the sign in case it exists\r\n   * Expects: a value as string, with or without the minus sign, AND NOTHING ELSE.\r\n   * Returns: same as the input but without the minus sign in case it had.\r\n   */\r\n  const removeSignIfExists = (valueAsString) => {\r\n      return valueAsString[0] === '-' ? valueAsString.slice(1) : valueAsString;\r\n  };\n\n  /**\r\n   * This process only is applied for automatic abbreviation ('a'), and only in the rounding\r\n   * bubbling cases where the scale has to be recomputed.\r\n   * E.g.\r\n   *     formatNumber(999960, 0.0a') // Would return '1000.0k' instead of '1.0m' without this rescaling-fix\r\n   *\r\n   * It only applies rescaling if the absolute value of 'the already scaled and rounded value' (1.87, 'k') is greater or\r\n   * equal to 1000, and the abbreviation is not greater or equal to trillion.\r\n   *\r\n   * <i> After initial scaling, value shouldn't be greater than 1000, unless it is a trillion.\r\n   * <i> The resulting decimal part, will be always 0, as this will be executed only on the corner cases,\r\n   *     that results from rounding bubbling. This is why decimal part is ignored.\r\n   */\r\n  const rescaleRoundedValue = (value, currentAbbreviationScale, patternRules, options) => {\r\n      const { compact, compactAuto } = patternRules;\r\n      const { abbreviations } = options.locale;\r\n      if (!compact || !compactAuto) {\r\n          return [value, currentAbbreviationScale];\r\n      }\r\n      const scale = createUnitScaleFromLocaleAbbreviations(abbreviations);\r\n      const [newScaledValue, newScaledValueUnit] = scale.toBest(value, currentAbbreviationScale || '');\r\n      return [newScaledValue, newScaledValueUnit];\r\n  };\n\n  /**\r\n   * If abbreviation is forced, looks for the closest (in terms of power of ten) abbreviation in the current locale\r\n   *     k === 10 ** 3\r\n   *     m === 10 ** 6\r\n   *     b === 10 ** 9\r\n   *     t === 10 ** 12\r\n   */\r\n  const resolveForcedAbbreviationUnit = (forcedAbbreviationUnit, abbreviationsFromLocale, value) => {\r\n      // Record<AbbreviationSymbol, PowerOfTenExponent>\r\n      const forcedScaleMap = { k: 3, m: 6, b: 9, t: 12 };\r\n      const targetPowerOfTenExponent = forcedScaleMap[forcedAbbreviationUnit];\r\n      const scaleDefinitionFromLocale = (abbreviationsFromLocale === null || abbreviationsFromLocale === void 0 ? void 0 : abbreviationsFromLocale.split('|')) || [];\r\n      let closestPowerOfTenWithAvailableAbbreviation = null;\r\n      for (let distanceFromTarget = 0; distanceFromTarget < scaleDefinitionFromLocale.length; distanceFromTarget++) {\r\n          if (!scaleDefinitionFromLocale[targetPowerOfTenExponent - distanceFromTarget])\r\n              continue;\r\n          closestPowerOfTenWithAvailableAbbreviation = targetPowerOfTenExponent - distanceFromTarget;\r\n          break;\r\n      }\r\n      if (closestPowerOfTenWithAvailableAbbreviation === null) {\r\n          return [value, null];\r\n      }\r\n      return [\r\n          multiplyByPowerOfTen(value, -closestPowerOfTenWithAvailableAbbreviation),\r\n          scaleDefinitionFromLocale[closestPowerOfTenWithAvailableAbbreviation],\r\n      ];\r\n  };\r\n  const scaleValueWithAbbreviation = (value, patternRules, options) => {\r\n      const { compact, compactUnit } = patternRules;\r\n      const { abbreviations } = options.locale;\r\n      if (!compact)\r\n          return [value, null];\r\n      if (!!compactUnit) {\r\n          return resolveForcedAbbreviationUnit(compactUnit, abbreviations, value);\r\n      }\r\n      /**\r\n       * If abbreviation is automatic, resolves the abbreviation to the best (where the value has\r\n       * the fewest numbers before the decimal point, but is still higher than 1).\r\n       */\r\n      const scale = createUnitScaleFromLocaleAbbreviations(abbreviations);\r\n      const [scaledValue, localizedUnit] = scale.toBest(value, '');\r\n      return [scaledValue, localizedUnit || null];\r\n  };\n\n  const roundNumber = (number, precision, roundingFunction) => {\r\n      const resolvedPrecision = precision || 0;\r\n      const resolvedRoundingFunction = roundingFunction || Math.round;\r\n      const scaledValueForRounding = multiplyByPowerOfTen(number, resolvedPrecision);\r\n      const roundedScaledValue = resolvedRoundingFunction(scaledValueForRounding);\r\n      const roundedValue = multiplyByPowerOfTen(roundedScaledValue, -resolvedPrecision);\r\n      return roundedValue;\r\n  };\n\n  /**\r\n   * The result from toFixed can contain an exponent for big numbers (e.g. 1.12345671234567e+50).\r\n   * <!> Only handles positive exponents.\r\n   */\r\n  const formatPositiveExponentResult = (valueAsString) => {\r\n      const [significand, exponent] = splitStringInTwoParts(valueAsString, 'e');\r\n      const exponentAsNumber = +exponent;\r\n      if (exponentAsNumber < 0)\r\n          return valueAsString;\r\n      const [integerPartOfSignificand, fractionalPartOfSignificand] = splitStringInTwoParts(significand, '.');\r\n      const numberOfZerosToAdd = exponentAsNumber - fractionalPartOfSignificand.length;\r\n      return `${integerPartOfSignificand}${fractionalPartOfSignificand}${stringRepeat('0', numberOfZerosToAdd)}`;\r\n  };\r\n  /**\r\n   * The result from toFixed can contain an exponent for small numbers (e.g. 1.123e-87).\r\n   * <i> Only handles negative exponents\r\n   */\r\n  const formatNegativeExponentResult = (value, exponentAsNumber, significandAsString) => {\r\n      const negativeExponentAbsoluteValue = Math.abs(exponentAsNumber);\r\n      const [integerPartOfSignificand, fractionalPartOfSignificand] = splitStringInTwoParts(significandAsString, '.');\r\n      const absoluteIntegerPartOfSignificand = integerPartOfSignificand[0] === '-' ? integerPartOfSignificand.slice(1) : integerPartOfSignificand;\r\n      let outputIntegerPartOfSignificand = absoluteIntegerPartOfSignificand;\r\n      let outputFractionalPartOfSignificand = fractionalPartOfSignificand;\r\n      for (let i = 0; i < negativeExponentAbsoluteValue; i += 1) {\r\n          // Consider using array.shift\r\n          const firstCharInIntegerPart = outputIntegerPartOfSignificand[0] || '';\r\n          outputIntegerPartOfSignificand = outputIntegerPartOfSignificand.slice(0, outputIntegerPartOfSignificand.length - 1);\r\n          outputFractionalPartOfSignificand = (firstCharInIntegerPart || '0') + outputFractionalPartOfSignificand;\r\n      }\r\n      return `${value < 0 ? '-' : ''}${outputIntegerPartOfSignificand || 0}.${outputFractionalPartOfSignificand}`;\r\n  };\r\n  /**\r\n   * Like Number.prototype.toString() but excluding the exponential info for small and big numbers.\r\n   * e.g.\r\n   *     Small numbers:\r\n   *         value: 0.0000000000001234 (1.234e-13)\r\n   *         toString() => \"1.234e-13\"\r\n   *         numberToStringWithoutExponent() => \"0.0000000000001234\"\r\n   *     Big numbers:\r\n   *         value: 1234123412341230000000 (1.234123412341234e+21)\r\n   *         toString() => \"1.234123412341234e+21\"\r\n   *         numberToStringWithoutExponent() => \"1234123412341230000000\"\r\n   */\r\n  const numberToNonExponentialString = (value) => {\r\n      const valueAsString = (value || 0).toString();\r\n      const valueAsStringHasExponentialInfo = valueAsString.indexOf('e') >= 0;\r\n      if (!valueAsStringHasExponentialInfo)\r\n          return valueAsString;\r\n      // If the toString returns an exponential number (e.g. 1.23e+28)\r\n      const [significand, exponent] = splitStringInTwoParts(valueAsString, 'e');\r\n      const exponentAsNumber = +exponent;\r\n      return exponentAsNumber >= 0\r\n          ? formatPositiveExponentResult(valueAsString)\r\n          : formatNegativeExponentResult(value, exponentAsNumber, significand);\r\n  };\n\n  const addTrailingZerosInFractionalPart = (valueAsString, minimumFractionDigits) => {\r\n      const [integerPart, fractionalPart] = splitStringInTwoParts(valueAsString, '.');\r\n      return `${integerPart}.${fractionalPart + stringRepeat('0', minimumFractionDigits - fractionalPart.length)}`;\r\n  };\r\n  /**\r\n   * Implementation of Number.prototype.toFixed() that treats floats more like decimals\r\n   *\r\n   * Fixes binary rounding issues (eg. (0.615).toFixed(2) === '0.61') that present\r\n   * problems for accounting- and finance-related software.\r\n   *\r\n   * <!> This function should only receive a finite number, never NaN, Infinity or -Infinity\r\n   * <i> This function should return always a JS string representation of a number, but without exponent.\r\n   * <i> optionalFractionDigits means: from the fractionDigits amount, the ones that are optional.\r\n   */\r\n  const numberToFixed = (finiteNumber, fractionDigits, roundingFunction, optionalFractionDigits) => {\r\n      const valueAsString = numberToNonExponentialString(finiteNumber);\r\n      const minimumFractionDigits = fractionDigits - (optionalFractionDigits || 0);\r\n      const fractionalPartOfValueAsString = splitStringInTwoParts(valueAsString, '.')[1];\r\n      const targetFractionDigitsAmount = !!fractionalPartOfValueAsString\r\n          ? Math.min(Math.max(fractionalPartOfValueAsString.length, minimumFractionDigits), fractionDigits)\r\n          : minimumFractionDigits;\r\n      const roundedValue = roundNumber(finiteNumber, targetFractionDigitsAmount, roundingFunction);\r\n      let output = numberToNonExponentialString(roundedValue);\r\n      // Add trailing zeros if needed\r\n      if (!!minimumFractionDigits) {\r\n          output = addTrailingZerosInFractionalPart(output, minimumFractionDigits);\r\n      }\r\n      return output;\r\n  };\n\n  const roundValueAndAddTrailingZeros = (value, patternRules, options) => {\r\n      const { rounding } = options;\r\n      const { minimumFractionDigits, maximumFractionDigits } = patternRules;\r\n      const resolvedRoundingFunction = rounding || Math.round;\r\n      const shouldIncludeDecimalPlaces = minimumFractionDigits > 0 || maximumFractionDigits > 0;\r\n      if (shouldIncludeDecimalPlaces) {\r\n          const optionalDecimalDigitsCount = maximumFractionDigits - minimumFractionDigits;\r\n          return numberToFixed(value, maximumFractionDigits, resolvedRoundingFunction, optionalDecimalDigitsCount);\r\n      }\r\n      else {\r\n          return numberToFixed(value, 0, resolvedRoundingFunction);\r\n      }\r\n  };\n\n  const replaceDigitsWithNumeralSystem = (numericString, numeralSystemMap) => {\r\n      if (!numeralSystemMap || numeralSystemMap.length !== 10)\r\n          return numericString;\r\n      const numericStringLength = numericString.length;\r\n      let output = '';\r\n      for (let numericStringIndex = 0; numericStringIndex < numericStringLength; numericStringIndex++) {\r\n          const char = numericString[numericStringIndex];\r\n          output += numeralSystemMap[char] || char;\r\n      }\r\n      return output;\r\n  };\n\n  /**\r\n   * <i> Add or remove leading zeros\r\n   * Expects: a value integer part as string, without the minus sign. And nothing else but a number at the start.\r\n   * Returns:\r\n   *     - The value with the added or removed leading zeros\r\n   */\r\n  const addOrRemoveLeadingZerosToValue = (valueIntegerPartWithoutSign, patternRules) => {\r\n      const { minimumIntegerDigits } = patternRules;\r\n      if (minimumIntegerDigits === 0 && +valueIntegerPartWithoutSign < 1 && +valueIntegerPartWithoutSign > -1) {\r\n          return '';\r\n      }\r\n      return valueIntegerPartWithoutSign.length >= minimumIntegerDigits\r\n          ? valueIntegerPartWithoutSign\r\n          : `${stringRepeat('0', minimumIntegerDigits - valueIntegerPartWithoutSign.length)}${valueIntegerPartWithoutSign}`;\r\n  };\n\n  const addSignInfoToFullFormattedNumber = (fullFormattedValueWithoutSign, isValueNegative, isValueZero, patternRules) => {\r\n      const { negativeParentheses, forceSign } = patternRules;\r\n      let output = fullFormattedValueWithoutSign;\r\n      if (negativeParentheses && isValueNegative) {\r\n          output = output.replace(/'(nps|npe)'/g, match => match === `'nps'` ? '(' : ')');\r\n      }\r\n      else if (forceSign) {\r\n          output = output.replace(`'s'`, isValueNegative ? '-' : isValueZero ? '' : '+');\r\n      }\r\n      else if (isValueNegative) {\r\n          output = output.replace(`'s'`, '-');\r\n      }\r\n      return output;\r\n  };\n\n  /**\r\n   * Splits the given number (as string) in the integer and decimal parts.\r\n   * Returns:\r\n   *     [integerPart: string, decimalPart: string]\r\n   * <i> The integer part can potentially contain the number sign (-) if it wasn't removed previously.\r\n   * <i> It should always return [string, string]\r\n   */\r\n  const splitNumberIntegerAndDecimalParts = (valueAsString, patternRules) => {\r\n      const { optionalFractionDigits } = patternRules;\r\n      const [integerPart, decimalPart] = splitStringInTwoParts(valueAsString, '.');\r\n      // Checks whether optionalDecimalPlaces [.] is enabled and the value is an integer (no decimals)\r\n      if (optionalFractionDigits && Number(decimalPart) === 0) {\r\n          return [integerPart, ''];\r\n      }\r\n      return [integerPart, decimalPart];\r\n  };\n\n  const addThousandsSeparatorToValueIntegerPart = (valueIntegerPartWithLeadingZerosAndWithoutSign, patternRules, options) => {\r\n      const { delimiters, digitGroupingStyle } = options.locale;\r\n      const { grouping } = patternRules;\r\n      if (!grouping || !delimiters.thousands) {\r\n          return valueIntegerPartWithLeadingZerosAndWithoutSign;\r\n      }\r\n      const valueAsString = valueIntegerPartWithLeadingZerosAndWithoutSign;\r\n      const thousandsSeparator = delimiters.thousands;\r\n      const digitGrouping = !!(digitGroupingStyle === null || digitGroupingStyle === void 0 ? void 0 : digitGroupingStyle.length) ? digitGroupingStyle : [3];\r\n      const restDigitGrouping = [...digitGrouping];\r\n      let output = '';\r\n      let groupingSubIteration = 1;\r\n      for (let i = valueAsString.length - 1; i >= 0; i--) {\r\n          if (groupingSubIteration === restDigitGrouping[0] && i !== 0) {\r\n              output = thousandsSeparator + valueAsString[i] + output;\r\n              if (restDigitGrouping.length > 1)\r\n                  restDigitGrouping.shift();\r\n              groupingSubIteration = 1;\r\n          }\r\n          else {\r\n              output = valueAsString[i] + output;\r\n              groupingSubIteration += 1;\r\n          }\r\n      }\r\n      return output;\r\n  };\n\n  /**\r\n   * Applies the localized abbreviation unit to the pattern mask\r\n   * <i> If the localized unit is empty (''), it will remove the space between the number and the abbreviation.\r\n   * <i> Replaces the single quotes from the abbreviation, to prevent collision with patternMask escaped text.\r\n   */\r\n  const applyAbbreviationLocalizedUnitToPatternMask = (patternMask, abbreviationLocalizedUnit, hasAbbreviationInPatternMask) => {\r\n      if (!hasAbbreviationInPatternMask)\r\n          return patternMask;\r\n      if (abbreviationLocalizedUnit) {\r\n          /**\r\n           * If it has abbreviation in the rules, and has a valid unit (e.g. K | M | B | T, or\r\n           * other localized one), escapes the single quotes in the localized abbreviation unit and appends to the mask.\r\n           */\r\n          return patternMask.replace(`'a'`, _ => `'${abbreviationLocalizedUnit.replace(/'/g, _ => \"\\\\'\")}'`);\r\n      }\r\n      else {\r\n          // If it has abbreviation in the rules, but it has no unit, removes the space between abbreviation and number\r\n          return patternMask.match(/'n'\\s*'a'/)\r\n              // If abbreviation is before\r\n              ? patternMask.replace(/\\s*'a'/, '')\r\n              // If abbreviation is after\r\n              : patternMask.replace(/'a'\\s*/, '');\r\n      }\r\n  };\n\n  const scaleAndRoundValue = (number, patternRules, options) => {\r\n      // If it doesn't have abbreviation, just round the value and add trailing zeros\r\n      if (!patternRules.compact) {\r\n          const roundedValueAsString = roundValueAndAddTrailingZeros(number, patternRules, options);\r\n          return [roundedValueAsString, null];\r\n      }\r\n      // If it has abbreviation, scales the value\r\n      const [scaledValue, scaledValueLocalizedUnit] = scaleValueWithAbbreviation(number, patternRules, options);\r\n      const roundedScaledValue = +roundValueAndAddTrailingZeros(scaledValue, patternRules, options);\r\n      const [rescaledValue, rescaledValueLocalizedUnit] = rescaleRoundedValue(+roundedScaledValue, scaledValueLocalizedUnit, patternRules, options);\r\n      const roundedRescaledValueAsStringWithTrailingZeros = roundValueAndAddTrailingZeros(rescaledValue, patternRules, options);\r\n      return [roundedRescaledValueAsStringWithTrailingZeros, rescaledValueLocalizedUnit];\r\n  };\r\n  const numberToFormattedNumber = (number, pattern, options) => {\r\n      var _a;\r\n      const patternRules = parsePattern(pattern);\r\n      // Ensure always uses a number or default number\r\n      const resolvedValue = isFiniteNumber(number) ? number : 0;\r\n      const [valueAsString, localizedAbbreviationUnit] = scaleAndRoundValue(resolvedValue, patternRules, options);\r\n      // Prevents potentially wrong formatting coming from this function\r\n      if (valueAsString === 'NaN')\r\n          return '';\r\n      const isValueNegative = options.signedZero ? number < 0 : +valueAsString < 0;\r\n      const isValueZero = options.signedZero ? number === 0 : +valueAsString === 0;\r\n      const valueAsStringWithoutSign = removeSignIfExists(valueAsString);\r\n      const [integerPart, decimalPart] = splitNumberIntegerAndDecimalParts(valueAsStringWithoutSign, patternRules);\r\n      const valueIntegerPartWithLeadingZeros = addOrRemoveLeadingZerosToValue(integerPart, patternRules);\r\n      const valueIntegerPartWithThousandsSeparator = addThousandsSeparatorToValueIntegerPart(valueIntegerPartWithLeadingZeros, patternRules, options);\r\n      const numeralSystemFromLocale = options.locale.numeralSystem;\r\n      const integerPartWithNumeralSystem = replaceDigitsWithNumeralSystem(valueIntegerPartWithThousandsSeparator, numeralSystemFromLocale);\r\n      const decimalPartWithNumeralSystem = replaceDigitsWithNumeralSystem(decimalPart, numeralSystemFromLocale);\r\n      const fullNumberWithNumeralSystem = (integerPartWithNumeralSystem\r\n          + (!!decimalPartWithNumeralSystem ? (((_a = options.locale.delimiters) === null || _a === void 0 ? void 0 : _a.decimal) || '.') + decimalPartWithNumeralSystem : ''));\r\n      // Assembling\r\n      const patternMaskWithAbbreviation = applyAbbreviationLocalizedUnitToPatternMask(patternRules.patternMask, localizedAbbreviationUnit, patternRules.compact);\r\n      const patternMaskWithNumber = patternMaskWithAbbreviation.replace(`'n'`, _ => `'${fullNumberWithNumeralSystem.replace(/'/g, \"\\\\'\")}'`);\r\n      const patternMaskWithSignInfo = addSignInfoToFullFormattedNumber(patternMaskWithNumber, isValueNegative, isValueZero, patternRules);\r\n      const cleanPatternMask = patternMaskWithSignInfo.replace(/'(nps|npe|s|a|n)'/g, '');\r\n      const fullFormattedValueWithNormalizedText = patternStripAndNormalizeEscapedText(cleanPatternMask);\r\n      return fullFormattedValueWithNormalizedText;\r\n  };\n\n  /**\r\n   * Basis point format (BPS)\r\n   * <i> See https://en.wikipedia.org/wiki/Basis_point\r\n   */\r\n  const bpsFormatter = {\r\n      name: 'bps',\r\n      regexps: {\r\n          format: /BPS/,\r\n          unformat: /BPS/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const scaledValue = multiplyByPowerOfTen(number, 4);\r\n          const patternWithEscapedBPS = patternReplace(pattern, /BPS/, `'BPS'`);\r\n          const formatResult = numberToFormattedNumber(scaledValue, patternWithEscapedBPS, options);\r\n          return formatResult.replace('BPS', 'BPS');\r\n      },\r\n      unformat: (string, options) => {\r\n          const number = formattedStringToNumber(string.replace(/\\s?BPS/, ''), options);\r\n          return isFiniteNumber(number) ? multiplyByPowerOfTen(number, -4) : number;\r\n      },\r\n  };\n\n  const timeFormatter = {\r\n      name: 'time',\r\n      regexps: {\r\n          format: /([0-9]{1,2}:[0-9]{2}) *$/,\r\n          unformat: /([0-9]{1,2}:[0-9]{2}) *$/,\r\n      },\r\n      format: (number) => {\r\n          const absoluteValue = Math.abs(number);\r\n          const sign = number < 0 ? '-' : '';\r\n          const hours = truncateNumber(absoluteValue / 3600);\r\n          const minutes = truncateNumber((absoluteValue - (hours * 3600)) / 60);\r\n          const seconds = truncateNumber(absoluteValue - (hours * 3600) - (minutes * 60));\r\n          return `${sign}${hours}:${(minutes < 10 ? '0' : '') + minutes}:${(seconds < 10 ? '0' : '') + seconds}`;\r\n      },\r\n      unformat: (string) => {\r\n          const isNegative = /^ *-/.test(string);\r\n          const stringWithoutSign = string.replace(/^ *-/, '');\r\n          const timeArray = stringWithoutSign.split(':').reverse();\r\n          let seconds = 0;\r\n          seconds += +timeArray[0];\r\n          seconds += +timeArray[1] * 60;\r\n          seconds += (+timeArray[2] || 0) * 3600;\r\n          return isNegative && seconds !== 0 ? -seconds : seconds;\r\n      },\r\n  };\n\n  const decimalSuffixes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\r\n  const binarySuffixes = ['B', 'KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'];\r\n  const allSuffixes = decimalSuffixes.concat(binarySuffixes.slice(1));\r\n  /** Avoid collision with BPS format @see formats|bps.ts */\r\n  const unformatRegex = `(${allSuffixes.join('|').replace(/B/g, 'B(?!PS)')})`;\r\n  const bytesDecimalScale = unitScale({ base: 'B', scale: toObject(decimalSuffixes, (unit, unitIndex) => [unit, Math.pow(1000, unitIndex)]) });\r\n  const bytesBinaryScale = unitScale({ base: 'B', scale: toObject(binarySuffixes, (unit, unitIndex) => [unit, Math.pow(1024, unitIndex)]) });\r\n  const bytesFormatter = {\r\n      name: 'bytes',\r\n      regexps: {\r\n          format: /([0\\s]b[bd])|(b[bd][0\\s])/,\r\n          unformat: (string, options) => options.type === 'bytes' ? new RegExp(unformatRegex).test(string) : false,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const scale = patternIncludes(pattern, 'bb') ? bytesBinaryScale : bytesDecimalScale;\r\n          const [scaledValue, scaledValueUnit] = scale.toBest(number, 'B');\r\n          const patternWithEscapedBytes = patternReplace(pattern, /b[bd]/, `'bytes'`);\r\n          const formatResult = numberToFormattedNumber(scaledValue, patternWithEscapedBytes, options);\r\n          return formatResult.replace('bytes', scaledValueUnit || '');\r\n      },\r\n      unformat: (string, options) => {\r\n          var _a;\r\n          const number = formattedStringToNumber(string.replace(new RegExp(unformatRegex), ''), options);\r\n          const suffix = ((_a = string.match(unformatRegex)) === null || _a === void 0 ? void 0 : _a[0]) || '';\r\n          const scale = !!bytesBinaryScale.scaleDefinition.scale[suffix] ? bytesBinaryScale : bytesDecimalScale;\r\n          return number ? scale.toBase(number, suffix) : number;\r\n      }\r\n  };\n\n  const ordinalFormatter = {\r\n      name: 'ordinal',\r\n      regexps: {\r\n          format: /o/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          var _a, _b;\r\n          const localizedOrdinal = ((_b = (_a = options.locale).ordinal) === null || _b === void 0 ? void 0 : _b.call(_a, number)) || '';\r\n          const patternWithEscapedOrdinal = patternReplace(pattern, /o/, `'ord'`);\r\n          const formatResult = numberToFormattedNumber(number, patternWithEscapedOrdinal, options);\r\n          return formatResult.replace('ord', _ => localizedOrdinal);\r\n      }\r\n  };\n\n  const currencySymbolsMap = {\r\n      EUR: '',\r\n      USD: '$',\r\n      XCD: 'EC$',\r\n      AUD: 'A$',\r\n      INR: '',\r\n      BRL: 'R$',\r\n      CAD: 'CA$',\r\n      XAF: 'FCFA',\r\n      CNY: 'CN',\r\n      NZD: 'NZ$',\r\n      XPF: 'CFPF',\r\n      GBP: '',\r\n      HKD: 'HK$',\r\n      ILS: '',\r\n      JPY: '',\r\n      KRW: '',\r\n      XOF: 'CFA',\r\n      MXN: 'MX$',\r\n      TWD: 'NT$',\r\n      VND: '',\r\n  };\r\n  const currencyFormatter = {\r\n      name: 'currency',\r\n      regexps: {\r\n          format: /(\\$)/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          var _a;\r\n          const currencyFromOptions = (_a = options.currency) === null || _a === void 0 ? void 0 : _a.toUpperCase();\r\n          const localizedCurrencySymbol = currencySymbolsMap[currencyFromOptions] || currencyFromOptions || '';\r\n          const patternWithEscapedCurrencySymbol = patternReplace(pattern, /\\$/, `'currency'`);\r\n          const formatResult = numberToFormattedNumber(number, patternWithEscapedCurrencySymbol, options);\r\n          return formatResult.replace('currency', _ => localizedCurrencySymbol);\r\n      },\r\n  };\n\n  const percentageFormatter = {\r\n      name: 'percentage',\r\n      regexps: {\r\n          format: /%!?/,\r\n          unformat: /%/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const hasNotScalePercentageSymbolInPattern = patternIncludes(pattern, '%!');\r\n          const scaledValue = options.scalePercentage && !hasNotScalePercentageSymbolInPattern ? multiplyByPowerOfTen(number, 2) : number;\r\n          const patternWithEscapedPercentage = patternReplace(pattern, /%!?/, `'%'`);\r\n          const formatResult = numberToFormattedNumber(scaledValue, patternWithEscapedPercentage, options);\r\n          return formatResult.replace('%', '%');\r\n      },\r\n      unformat: (string, options) => {\r\n          const number = formattedStringToNumber(string.replace(/\\s?%/, ''), options);\r\n          return number && options.scalePercentage ? multiplyByPowerOfTen(number, -2) : number;\r\n      },\r\n  };\n\n  const exponentialFormatter = {\r\n      name: 'exponential',\r\n      regexps: {\r\n          format: /[eE][+-][0-9]+/,\r\n          unformat: /[eE][+-][0-9]+/,\r\n      },\r\n      format: (number, pattern, options) => {\r\n          const exponential = typeof number === 'number' && !isNaNNumber(number) ? number.toExponential() : '0e+0';\r\n          const parts = splitStringInTwoParts(exponential, 'e');\r\n          const patternWithoutExponential = patternReplace(pattern, /e[+|-]{1}0/i, '');\r\n          const formatResult = numberToFormattedNumber(+parts[0], patternWithoutExponential, options);\r\n          return formatResult + 'e' + parts[1];\r\n      },\r\n      unformat: (string, options) => {\r\n          var _a;\r\n          const value = formattedStringToNumber(string.replace(/e[+-]{1}[0-9]{1,3}/i, ''), options);\r\n          const powerOfTenExponent = +(((_a = string.match(/e([+-]{1}[0-9]{1,3})/i)) === null || _a === void 0 ? void 0 : _a[1]) || '0');\r\n          return isFiniteNumber(value) ? multiplyByPowerOfTen(value, powerOfTenExponent) : value;\r\n      },\r\n  };\n\n  const BUILT_IN_FORMATTERS = [\r\n      percentageFormatter,\r\n      currencyFormatter,\r\n      ordinalFormatter,\r\n      timeFormatter,\r\n      bytesFormatter,\r\n      exponentialFormatter,\r\n      bpsFormatter,\r\n  ];\n\n  const roundHalfAwayFromZero = (value) => {\r\n      return value >= 0\r\n          ? Math.round(value)\r\n          : (value % 0.5 === 0) ? Math.floor(value) : Math.round(value);\r\n  };\n\n  const areDelimitersValid = (delimiters) => {\r\n      return !!(delimiters === null || delimiters === void 0 ? void 0 : delimiters.decimal)\r\n          && isString(delimiters === null || delimiters === void 0 ? void 0 : delimiters.thousands)\r\n          && delimiters.decimal !== delimiters.thousands;\r\n  };\r\n  const resolveOptionsLocale = (optionsLocale) => {\r\n      const defaultLocale = locale;\r\n      if (!isObject(optionsLocale))\r\n          return defaultLocale;\r\n      return merge(optionsLocale, {\r\n          delimiters: areDelimitersValid(optionsLocale.delimiters) ? optionsLocale.delimiters : defaultLocale.delimiters,\r\n          abbreviations: optionsLocale.abbreviations || defaultLocale.abbreviations,\r\n          ordinal: optionsLocale.ordinal || defaultLocale.ordinal,\r\n      });\r\n  };\r\n  const resolveRoundingOption = (roundingOption) => {\r\n      switch (roundingOption) {\r\n          case 'ceil': return Math.ceil;\r\n          case 'floor': return Math.floor;\r\n          case 'truncate': return truncateNumber;\r\n          case 'half-up': return Math.round;\r\n          case 'half-away-from-zero': return roundHalfAwayFromZero;\r\n          default: return isFunction(roundingOption) ? roundingOption : roundHalfAwayFromZero;\r\n      }\r\n  };\r\n  const resolveOptionsFormatters = (optionsFormatters) => {\r\n      if (!optionsFormatters)\r\n          return BUILT_IN_FORMATTERS;\r\n      return isFunction(optionsFormatters)\r\n          ? optionsFormatters(BUILT_IN_FORMATTERS)\r\n          : [...optionsFormatters, ...BUILT_IN_FORMATTERS];\r\n  };\r\n  const resolveFormatOptions = (formatOptions) => {\r\n      var _a, _b, _c;\r\n      const options = formatOptions || {};\r\n      const resolvedRoundingFunction = resolveRoundingOption(options.rounding);\r\n      const resolvedLocale = resolveOptionsLocale(options.locale);\r\n      const resolvedFormatters = resolveOptionsFormatters(options.formatters);\r\n      return {\r\n          defaultPattern: options.defaultPattern || '0,0.##########',\r\n          nullFormat: options.nullFormat || '',\r\n          nanFormat: options.nanFormat,\r\n          zeroFormat: options.zeroFormat,\r\n          locale: resolvedLocale,\r\n          rounding: resolvedRoundingFunction,\r\n          type: options.type,\r\n          scalePercentage: (_a = options.scalePercentage) !== null && _a !== void 0 ? _a : true,\r\n          trim: (_b = options.trim) !== null && _b !== void 0 ? _b : true,\r\n          formatters: resolvedFormatters,\r\n          currency: options.currency,\r\n          signedZero: !!options.signedZero,\r\n          nonBreakingSpace: (_c = options.nonBreakingSpace) !== null && _c !== void 0 ? _c : false,\r\n      };\r\n  };\n\n  const getUnformatFunctionIfMatch = (input, resolvedOptions) => {\r\n      for (const formatter of resolvedOptions.formatters) {\r\n          const matcher = formatter.regexps.unformat;\r\n          if (!matcher)\r\n              continue;\r\n          const matcherResult = isFunction(matcher) ? matcher(input, resolvedOptions) : !!input.match(matcher);\r\n          if (matcherResult)\r\n              return formatter.unformat;\r\n      }\r\n  };\r\n  const parse$1 = (input, options) => {\r\n      const resolvedOptions = resolveFormatOptions(options);\r\n      let value;\r\n      if (isNil(input) || isNaNNumber(input)) {\r\n          value = null;\r\n      }\r\n      else if (typeof input === 'number') {\r\n          // Handles negative zero\r\n          value = input === 0 ? 0 : input;\r\n      }\r\n      else if (typeof input === 'string') {\r\n          if (resolvedOptions.zeroFormat && input === resolvedOptions.zeroFormat) {\r\n              value = 0;\r\n          }\r\n          else if (resolvedOptions.nullFormat && input === resolvedOptions.nullFormat) {\r\n              value = null;\r\n          }\r\n          else {\r\n              // Removes non-breaking spaces if they exists\r\n              const inputStringWithNormalSpaces = input.replace(/\\u00A0/, ' ');\r\n              const unformatFunctionFromFormatters = getUnformatFunctionIfMatch(inputStringWithNormalSpaces, resolvedOptions);\r\n              const unformatFunction = unformatFunctionFromFormatters || formattedStringToNumber;\r\n              value = unformatFunction(inputStringWithNormalSpaces, resolvedOptions);\r\n          }\r\n      }\r\n      else {\r\n          const result = +input;\r\n          value = result === 0 ? result : (result || null);\r\n      }\r\n      return value;\r\n  };\n\n  /**\r\n   * @example\r\n   * ```javascript\r\n   * parse('1,250.48')\r\n   * //=> 1250.48\r\n   * parse('10 %')\r\n   * //=> 0.1\r\n   * parse('1 000,582', { locale: fr })\r\n   * //=> 1000.582\r\n   * ```\r\n   * Parse the given numeric-string applying the provided options.\r\n   *\r\n   * options:\r\n   * ```typescript\r\n   * {\r\n   * nullFormat?: string;\r\n   * nanFormat?: string;\r\n   * zeroFormat?: string;\r\n   * defaultPattern?: string;\r\n   * rounding?: 'truncate' | 'ceil' | 'floor' | 'round' | ((scaledValueForRounding: number) => number);\r\n   * locale?: NumerableLocale;\r\n   * type?: string;\r\n   * scalePercentage?: boolean;\r\n   * formatters?: NumerableFormatter[] | ((builtInFormatters: NumerableFormatter[]) => NumerableFormatter[]);\r\n   * }\r\n   * ```\r\n   *\r\n   * @param string string: The numeric-string to parse (e.g. **'10 %'**)\r\n   * @param options options: The options used to parse the numeric-string\r\n   * ```typescript\r\n   * {\r\n   * nullFormat?: string;\r\n   * nanFormat?: string;\r\n   * zeroFormat?: string;\r\n   * defaultPattern?: string;\r\n   * rounding?: 'truncate' | 'ceil' | 'floor' | 'round' | ((scaledValueForRounding: number) => number);\r\n   * locale?: NumerableLocale;\r\n   * type?: string;\r\n   * scalePercentage?: boolean;\r\n   * formatters?: NumerableFormatter[] | ((builtInFormatters: NumerableFormatter[]) => NumerableFormatter[]);\r\n   * }\r\n   * ```\r\n   */\r\n  const parse = (string, options) => {\r\n      return parse$1(string, options);\r\n  };\n\n  /**\r\n   * @example\r\n   * ```javascript\r\n   * round(12.687, 2)\r\n   * //=> 12.69\r\n   * round(12.687)\r\n   * //=> 13\r\n   * round(12.687, 2, Math.floor)\r\n   * //=> 12.68\r\n   * ```\r\n   * Rounds the given number to the specified amount of decimal places.\r\n   *\r\n   * - The **default precision** is 0.\r\n   * - The **default roundingFunction** is Math.round.\r\n   *\r\n   * @param number number: The number to round (e.g. **10.23**)\r\n   * @param precision precision: The desired amount of decimal places (e.g. **2**)\r\n   * @param roundingFunction roundingFunction: The function applied for rounding (e.g. **Math.floor**)\r\n   * */\r\n  const round = (number, precision, roundingFunction) => {\r\n      return roundNumber(number, precision, roundingFunction);\r\n  };\n\n  const getFormatFunctionIfMatch = (pattern, resolvedOptions) => {\r\n      const patternWithoutEscapedText = patternRemoveEscapedText(pattern);\r\n      for (const formatter of resolvedOptions.formatters) {\r\n          const matcher = formatter.regexps.format;\r\n          if (!matcher)\r\n              continue;\r\n          const matcherResult = isFunction(matcher) ? matcher(pattern, resolvedOptions) : !!patternWithoutEscapedText.match(matcher);\r\n          if (matcherResult)\r\n              return formatter.format;\r\n      }\r\n  };\r\n  const format$1 = (value, pattern, options) => {\r\n      var _a;\r\n      try {\r\n          const resolvedValue = isString(value) ? parseFloat(value) : value;\r\n          const resolvedOptions = resolveFormatOptions(options);\r\n          const resolvedPattern = pattern || resolvedOptions.defaultPattern;\r\n          let output;\r\n          if (resolvedValue === Infinity || resolvedValue === -Infinity) {\r\n              output = resolvedValue > 0 ? '' : '-';\r\n          }\r\n          else if (isNaNNumber(resolvedValue)) {\r\n              return isString(resolvedOptions.nanFormat)\r\n                  ? resolvedOptions.nanFormat\r\n                  : (isString(resolvedOptions.nullFormat) ? resolvedOptions.nullFormat : '');\r\n          }\r\n          else if (isNil(resolvedValue)) {\r\n              output = isString(resolvedOptions.nullFormat) ? resolvedOptions.nullFormat : '';\r\n          }\r\n          else if (resolvedValue === 0 && isString(resolvedOptions.zeroFormat)) {\r\n              output = resolvedOptions.zeroFormat;\r\n          }\r\n          else {\r\n              // <!> Here value should always be a number\r\n              const resolvedValueAsNumber = resolvedValue || 0;\r\n              const formatFunctionFromFormatters = getFormatFunctionIfMatch(resolvedPattern, resolvedOptions);\r\n              const resolvedFormatFunction = formatFunctionFromFormatters || numberToFormattedNumber;\r\n              output = resolvedFormatFunction(resolvedValueAsNumber, resolvedPattern, resolvedOptions);\r\n          }\r\n          // Ensures that it always returns an string\r\n          output = isString(output) ? output : '';\r\n          // Replaces spaces with non-breaking spaces if needed\r\n          output = resolvedOptions.nonBreakingSpace\r\n              ? output.replace(/ /g, _ => '\\u00A0')\r\n              : output;\r\n          // Trims the output if needed\r\n          output = resolvedOptions.trim ? output.trim() : output;\r\n          return output;\r\n      }\r\n      catch (_error) {\r\n          return ((_a = options) === null || _a === void 0 ? void 0 : _a._errorFormat) || '';\r\n      }\r\n  };\n\n  function format(number, arg2, arg3) {\r\n      const pattern = isString(arg2) ? arg2 : null;\r\n      const options = isObject(arg2) ? arg2 : (isObject(arg3) ? arg3 : {});\r\n      return format$1(number, pattern, options);\r\n  }\r\n  const createFormatFunction = (options) => {\r\n      const baseOptions = merge(options, {\r\n          locale: isFunction(options.locale) ? options.locale() : options.locale,\r\n      });\r\n      return ((value, arg2, arg3) => {\r\n          const pattern = isString(arg2) ? arg2 : null;\r\n          const optionsFromArguments = isObject(arg2) ? arg2 : (isObject(arg3) ? arg3 : {});\r\n          return format$1(value, pattern, merge(baseOptions, optionsFromArguments));\r\n      });\r\n  };\r\n  format.withOptions = createFormatFunction;\n\n  const unique = (arr) => {\r\n      if (!arr)\r\n          return [];\r\n      return arr.filter((value, index, self) => self.indexOf(value) === index);\r\n  };\n\n  // <i> Extracted from https://stackoverflow.com/questions/12006095/javascript-how-to-check-if-character-is-rtl\r\n  const leftToRightMark = '\\u200e';\r\n  const rtlCharsRanges = '\\u0591-\\u07FF\\u200F\\u202B\\u202E\\uFB1D-\\uFDFD\\uFE70-\\uFEFC';\r\n  const rtlDirCheck = new RegExp('^[^' + rtlCharsRanges + ']*?[' + rtlCharsRanges + ']');\r\n  const isRTL = (string) => rtlDirCheck.test(string);\r\n  const appendLeftToRightMarkIfIsRTL = (string) => isRTL(string) ? string + leftToRightMark : string;\r\n  const languagesWith4DigitsGroupingStyle = ['zh', 'yue', 'ko', 'ja'];\r\n  const toLocaleStringSupportsOptions = () => {\r\n      return typeof Intl === 'object' && !!Intl && typeof Intl.NumberFormat === 'function';\r\n  };\r\n  const getNumeralSystemDigits = (languageTag) => {\r\n      try {\r\n          const localizedNumber = (1234567890).toLocaleString(languageTag, { useGrouping: false });\r\n          const lookupObject = {};\r\n          const repeatedChar = localizedNumber.split('').find((char) => {\r\n              if (lookupObject[char])\r\n                  return true;\r\n              lookupObject[char] = true;\r\n          });\r\n          const digitsWithoutGroupingDelimiters = repeatedChar\r\n              ? localizedNumber.replace(new RegExp(escapeRegexString(repeatedChar || ''), 'g'), '')\r\n              : localizedNumber;\r\n          const digitsAsArray = digitsWithoutGroupingDelimiters.split('');\r\n          const sortedDigits = [digitsAsArray[digitsAsArray.length - 1], ...digitsAsArray.slice(0, -1)];\r\n          return sortedDigits.join('');\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getGroupingAndFractionDelimiters = (languageTag, digits) => {\r\n      try {\r\n          const localizedNumber = (12345678.123).toLocaleString(languageTag);\r\n          const localizedNumberWithoutDigits = localizedNumber.replace(new RegExp(`[${escapeRegexString(digits)}]`, 'g'), '');\r\n          const [groupingDelimiter = ',', fractionDelimiter = '.'] = unique(localizedNumberWithoutDigits.split(''));\r\n          return [groupingDelimiter, fractionDelimiter];\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getGroupingStyle = (languageTag, groupingDelimiter) => {\r\n      // <i> Handle '4 digits' grouping style for some asian countries (not CLDR)\r\n      if (languagesWith4DigitsGroupingStyle.some(language => languageTag.indexOf(language) === 0))\r\n          return [4];\r\n      try {\r\n          const result = [];\r\n          let subIterationIndex = 0;\r\n          (100000000000).toLocaleString(languageTag).split('').reverse().forEach((digitOrGroupingDelimiter) => {\r\n              if (digitOrGroupingDelimiter === groupingDelimiter) {\r\n                  result.push(subIterationIndex);\r\n                  subIterationIndex = 0;\r\n              }\r\n              else {\r\n                  subIterationIndex += 1;\r\n              }\r\n          });\r\n          let resultIndex = result.length;\r\n          while (resultIndex--) {\r\n              if (result[resultIndex] === result[resultIndex - 1])\r\n                  result.pop();\r\n              else\r\n                  break;\r\n          }\r\n          return result;\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const getAbbreviations = (languageTag, digits, type) => {\r\n      try {\r\n          if (!toLocaleStringSupportsOptions())\r\n              return null;\r\n          const intlFormatOptions = { notation: 'compact', useGrouping: false, compactDisplay: type };\r\n          const [digitOfZero, digitOfOne, digitOfTwo] = digits.split('');\r\n          let abbreviations = '';\r\n          for (let i = 1; i < 50; i++) {\r\n              const abbreviationResultForOne = (+(1 + stringRepeat('0', i))).toLocaleString(languageTag, intlFormatOptions);\r\n              if (new RegExp(`^${digitOfOne}[^${digitOfZero}]+$`).test(abbreviationResultForOne)) {\r\n                  if (type === 'long') {\r\n                      const abbreviationResultForTwo = (+(2 + stringRepeat('0', i))).toLocaleString(languageTag, intlFormatOptions);\r\n                      const abbreviationOne = abbreviationResultForOne.replace(new RegExp(`${digitOfOne}`, 'g'), '').trim();\r\n                      const abbreviationTwo = abbreviationResultForTwo.replace(new RegExp(`${digitOfTwo}`, 'g'), '').trim();\r\n                      abbreviations += '|' + appendLeftToRightMarkIfIsRTL(abbreviationOne) + ':::' + appendLeftToRightMarkIfIsRTL(abbreviationTwo);\r\n                  }\r\n                  else {\r\n                      const abbreviation = abbreviationResultForOne.replace(new RegExp(`${digitOfOne}`, 'g'), '').trim();\r\n                      abbreviations += '|' + appendLeftToRightMarkIfIsRTL(abbreviation);\r\n                  }\r\n              }\r\n              else {\r\n                  abbreviations += '|';\r\n              }\r\n          }\r\n          // Remove trailing pipes '|'\r\n          let result = abbreviations;\r\n          let resultIndex = result.length;\r\n          while (resultIndex--) {\r\n              if (result[resultIndex] === '|')\r\n                  result = result.slice(0, -1);\r\n              else\r\n                  break;\r\n          }\r\n          return result;\r\n      }\r\n      catch (_err) {\r\n          return null;\r\n      }\r\n  };\r\n  const baseGetLocaleFromPlatform = (languageTag) => {\r\n      const resolvedLanguageTag = languageTag || 'en';\r\n      const digits = getNumeralSystemDigits(resolvedLanguageTag);\r\n      const resolvedDigits = digits || '0123456789';\r\n      const delimiters = getGroupingAndFractionDelimiters(resolvedLanguageTag, resolvedDigits);\r\n      const [groupingDelimiter, fractionDelimiter] = !!delimiters && delimiters.length >= 2 ? delimiters : [',', '.'];\r\n      const groupingStyle = getGroupingStyle(resolvedLanguageTag, groupingDelimiter);\r\n      const shortAbbreviations = getAbbreviations(resolvedLanguageTag, resolvedDigits, 'short');\r\n      const longAbbreviations = getAbbreviations(resolvedLanguageTag, resolvedDigits, 'long');\r\n      return {\r\n          _abbreviationsLong: longAbbreviations || locale.abbreviations,\r\n          code: resolvedLanguageTag,\r\n          delimiters: { thousands: groupingDelimiter, decimal: fractionDelimiter },\r\n          abbreviations: shortAbbreviations || locale.abbreviations,\r\n          digitGroupingStyle: !!(groupingStyle === null || groupingStyle === void 0 ? void 0 : groupingStyle.length) ? groupingStyle : undefined,\r\n          numeralSystem: digits !== '0123456789' ? digits === null || digits === void 0 ? void 0 : digits.split('').map(appendLeftToRightMarkIfIsRTL) : undefined,\r\n          ordinal: locale.ordinal,\r\n      };\r\n  };\r\n  const getLocaleFromPlatform$1 = memoize(baseGetLocaleFromPlatform);\n\n  /**\r\n   * Given a language tag (e.g. '**zh**' | '**es**' | '**fr**' | '**en-IN**' | '**zh-Hans**'), returns a NumerableLocale\r\n   * object extracted from the platform Intl.NumberFormat behavior.\r\n   *\r\n   * This locale object can be used in the numerable functions that support i18n (*format* and *parse*).\r\n   * Example:\r\n   * ```javascript\r\n   * format(12345, '0,0.00', { locale: getLocaleFromPlatform('fr') })\r\n   * ```\r\n   *\r\n   * <i> Take into account that the returned locale is not complete, and some features like\r\n   *     'ordinal formatting' won't work. Use this feature only for simple applications that don't require\r\n   *     full support from numeral, and don't target legacy browsers.\r\n   */\r\n  const getLocaleFromPlatform = (languageTag) => {\r\n      return getLocaleFromPlatform$1(languageTag);\r\n  };\n\n  var numerable = {\n    __proto__: null,\n    parse,\n    round,\n    format,\n    getLocaleFromPlatform\n  };\n\n  Object.assign(ew__default.default, numerable);\n\n})(ew, jQuery, luxon);\n"]}